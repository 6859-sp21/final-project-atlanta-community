(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58613fcd"],{"04d2":function(t,n,e){},"15fa":function(t,n,e){},"229f":function(t,n,e){"use strict";e("ab6d")},"23bc":function(t,n,e){},"25cc":function(t,n,e){"use strict";e("d5ee")},"2ba6":function(t,n,e){},"2d8a":function(t,n,e){!function(n,e){t.exports=e()}(0,(function(){"use strict";function t(t){return"function"==typeof t}function n(){}var e=function(t){this.previousValue=t,this.interrupted=!1,this.interruptHandlers=new Set};function r(t){return function(){return t}}function i(){return[]}e.prototype.throwIfInterrupted=function(){if(this.interrupted)throw new Error},e.prototype.interrupt=function(){this.interrupted||(this.interrupted=!0,this.interruptHandlers.forEach((function(t){try{t()}catch(t){}})))},e.prototype.onInterrupt=function(t){if(this.interrupted&&!this.interruptHandlers.has(t))try{t()}catch(t){}this.interruptHandlers.add(t)};var a={animationDuration:{type:Number,default:1e3},animationEasing:{type:String,default:"ease"},animationOverlap:{type:Number,default:1},color:{type:[String,Function],default:"Black"},createCanvas:{type:Function,default:function(){return document.createElement("canvas")}},createWorker:{type:Function,default:function(t){return new Worker(URL.createObjectURL(new Blob([t])))}},enterAnimation:{type:[Object,String],default:r({opacity:0})},fontFamily:{type:[String,Function],default:"serif"},fontSizeRatio:{type:Number,default:0},fontStyle:{type:[String,Function],default:"normal"},fontVariant:{type:[String,Function],default:"normal"},fontWeight:{type:[String,Function],default:"normal"},leaveAnimation:{type:[Object,String],default:r({opacity:0})},loadFont:{type:Function,default:function(t,n,e,r){return document.fonts.load([n,e,"1px",t].join(" "),r)}},rotation:{type:[Number,Function],default:0},rotationUnit:{type:[String,Function],default:"turn"},spacing:{type:Number,default:0},text:{type:[String,Function],default:""},weight:{type:[Number,Function],default:1},words:{type:Array,default:i}},o=r(null);function s(t){if(t){var n=typeof t;return"object"===n||"function"===n}return!1}function u(t){return"string"==typeof t}var l={animationOptions:function(){var t,n,e,r=this.animationDuration,i=this.enterAnimation,a=this.leaveAnimation;if(s(i)&&s(a)){var l=(t=Object.assign({},i,a),n=o,e={},Object.entries(t).forEach((function(r){var i=r[0],a=r[1];e[i]=n(a,i,t)})),e),c=function(t){Object.assign(t.style,i)},h=function(t,n){setTimeout((function(){Object.assign(t.style,l),setTimeout(n,r)}),1)};return{props:{css:!1},on:{beforeAppear:c,appear:h,beforeEnter:c,enter:h,leave:function(t,n){Object.assign(t.style,a),setTimeout(n,r)}}}}return u(i)&&u(a)?{props:{duration:r,appear:!0,appearActiveClass:i,enterActiveClass:i,leaveActiveClass:a}}:{}},normalizedAnimationOverlap:function(){var t=this.animationOverlap;return(t=Math.abs(t))<1&&(t=1/t),t},separateAnimationDelay:function(){var t=this.cloudWords;return t.length>1?(this.animationDuration-this.separateAnimationDuration)/(t.length-1):0},separateAnimationDuration:function(){var t=this.cloudWords;if(t.length>0){var n=this.animationDuration,e=this.normalizedAnimationOverlap;return n/Math.min(e,t.length)}return 0}},c=Array.isArray;function h(n){return t(n)?n:r(n)}var f=2*Math.PI,d=f/360;function p(t){return void 0===t}function m(t,n){return t.postMessage(n),function(t){return new Promise((function(n,e){var r,i=function(t){var e=t.data;r(),n(e)},a=function(t){var n=t.error;r(),e(n)};r=function(){t.removeEventListener("message",i),t.removeEventListener("error",a)},t.addEventListener("message",i),t.addEventListener("error",a)}))}(t)}function g(t,n,e){return Math.ceil(t*Math.abs(Math.sin(e))+n*Math.abs(Math.cos(e)))}function v(t,n,e){return Math.ceil(t*Math.abs(Math.cos(e))+n*Math.abs(Math.sin(e)))}function y(t,n,e,r,i){return[t,n,e,r+"px",i].join(" ")}function w(t,n){return Math.ceil(t/n)*n}function _(t,n,e){var r=e().getContext("2d");return r.font=n,r.measureText(t).width}var b=function(t,n,e,r,i,a,o){this.t=t,this.i=n,this.o=e,this.u=r,this.s=i,this.h=a,this.l=o,this.v=1,this.m=0,this.p=0,this.g=0},x={M:{configurable:!0},S:{configurable:!0},j:{configurable:!0},F:{configurable:!0},O:{configurable:!0},W:{configurable:!0},A:{configurable:!0},B:{configurable:!0},C:{configurable:!0},L:{configurable:!0},_:{configurable:!0},P:{configurable:!0},T:{configurable:!0},k:{configurable:!0},N:{configurable:!0},D:{configurable:!0},H:{configurable:!0},R:{configurable:!0},U:{configurable:!0}};x.M.get=function(){return this.v},x.M.set=function(t){this.v!==t&&(this.v=t,this.V=void 0)},x.S.get=function(){return y(this.h,this.s,this.u,this.M,this.o)},x.j.get=function(){return void 0===this.q&&(this.q=_(this.t,y(this.h,this.s,this.u,1,this.o),this.l)),this.q},x.F.get=function(){return this.j*this.M},x.O.get=function(){return this.p*this.M},x.O.set=function(t){this.p=t/this.M},x.W.get=function(){return this.g*this.M},x.W.set=function(t){this.g=t/this.M},x.A.get=function(){return v(this.F,this.M,this.i)},x.B.get=function(){return g(this.F,this.M,this.i)},x.C.get=function(){return this.O-this.A/2},x.L.get=function(){return this.W-this.B/2},x._.get=function(){return this.m},x._.set=function(t){this.m!==t&&(this.m=t,this.V=void 0)},x.P.get=function(){return void 0===this.V&&(this.V=function(t,n,e,r,i,a,o,s,u){var l=y(n,e,r,i*=4,a),c=o*i*2,h=c+_(t,l,u),f=c+i,d=u(),p=d.getContext("2d"),m=w(v(h,f,s),4),b=w(g(h,f,s),4);d.width=m,d.height=b,p.translate(m/2,b/2),p.rotate(s),p.font=l,p.textAlign="center",p.textBaseline="middle",p.fillText(t,0,0),c>0&&(p.miterLimit=1,p.lineWidth=c,p.strokeText(t,0,0));for(var x=p.getImageData(0,0,m,b).data,M=[],k=1/0,A=0,N=1/0,E=0,S=m/4,C=b/4,T=0;T<S;++T)for(var j=0;j<C;++j)t:for(var $=0;$<4;++$)for(var O=0;O<4;++O)if(x[4*(m*(4*j+O)+(4*T+$))+3]){M.push([T,j]),k=Math.min(T,k),A=Math.max(T+1,A),N=Math.min(j,N),E=Math.max(j+1,E);break t}return M.length>0?[M.map((function(t){var n=t[0],e=t[1];return[n-k,e-N]})),A-k,E-N,Math.ceil(S/2)-k,Math.ceil(C/2)-N]:[M,0,0,0,0]}(this.t,this.h,this.s,this.u,this.M,this.o,this._,this.i,this.l)),this.V},x.T.get=function(){return this.P[0]},x.k.get=function(){return this.P[1]},x.N.get=function(){return this.P[2]},x.D.get=function(){return this.P[3]},x.H.get=function(){return this.P[4]},x.R.get=function(){return Math.ceil(this.O)-this.D},x.R.set=function(t){this.O=t+this.D},x.U.get=function(){return Math.ceil(this.W)-this.H},x.U.set=function(t){this.W=t+this.H},Object.defineProperties(b.prototype,x);var M={cloudWords:function(t){this.$emit("update:cloudWords",t)},progress:{handler:function(t){this.$emit("update:progress",t)},deep:!0,immediate:!0}},k={updateElementSize:function(){var t=this.$el;t&&(this.elementWidth=t.offsetWidth,this.elementHeight=t.offsetHeight)}},A={name:"VueWordCloud",mixins:[function(r){return{data:function(){var t={};return Object.keys(r).forEach((function(n){t["asyncComputed_trigger_"+n]={}})),t},computed:{},beforeCreate:function(){var i=this,a=new Set;Object.entries(r).forEach((function(r){var o=r[0],s=r[1],u=s.get,l=s.default,c=s.errorHandler;void 0===c&&(c=n);var h,f=!0;i.$options.computed[o]=function(){return this["asyncComputed_trigger_"+o],this["asyncComputed_promise_"+o],l},i.$options.computed["asyncComputed_promise_"+o]=function(){var n=this;h&&(h.interrupt(),a.delete(h)),f&&(f=!1,t(l)&&(l=l.call(this)));var r=new e(l);h=r,a.add(h),new Promise((function(t){t(u.call(n,r))})).then((function(t){r.throwIfInterrupted(),l=t,n["asyncComputed_trigger_"+o]={}})).catch(c)}}))}}}({cloudWords:{get:function(t){var e,r=this,i=this,a=i.elementWidth,o=i.elementHeight,l=i.words,g=i.text,v=i.weight,y=i.rotation,w=i.rotationUnit,_=i.fontFamily,x=i.fontWeight,M=i.fontVariant,k=i.fontStyle,A=i.color,N=i.spacing,E=i.fontSizeRatio,S=i.createCanvas,C=i.loadFont,T=i.createWorker;e=E,E=(e=Math.abs(e))>1?1/e:e;var j=function(t){var n=t[0],e=t[1];return n>e?[1,e/n]:e>n?[n/e,1]:[1,1]}([a,o]);if(a>0&&o>0){var $=h(g),O=h(v),B=h(y),z=h(w),F=h(_),P=h(x),R=h(M),H=h(k),D=h(A);return l=l.map((function(t,n){var e,r,i,a,o,h,m,g,v,y,w;t&&(u(t)?i=t:c(t)?(i=(e=t)[0],a=e[1]):s(t)&&(i=(r=t).text,a=r.weight,o=r.rotation,h=r.rotationUnit,m=r.fontFamily,g=r.fontWeight,v=r.fontVariant,y=r.fontStyle,w=r.color)),p(i)&&(i=$(t,n,l)),p(a)&&(a=O(t,n,l)),p(o)&&(o=B(t,n,l)),p(h)&&(h=z(t,n,l)),p(m)&&(m=F(t,n,l)),p(g)&&(g=P(t,n,l)),p(v)&&(v=R(t,n,l)),p(y)&&(y=H(t,n,l)),p(w)&&(w=D(t,n,l));var _=new b(i,function(){switch(h){case"turn":return o*f;case"deg":return function(t){return t*d}(o)}return o}(),m,g,v,y,S);return Object.assign(_,{J:t,Y:a,G:w}),_})),Promise.resolve().then((function(){return Promise.all(l.map((function(t){var n=t.o,e=t.h,r=t.u,i=t.t;return C(n,e,r,i)})))})).catch(n).then((function(){if((l=l.filter((function(t){return t.F>0})).sort((function(t,n){return n.Y-t.Y}))).length>0){var n=l[0],e=function(t){return t[(n=t,n.length-1)];var n}(l),i=n.Y,s=e.Y;if(s<i){var u=E>0?1/E:s>0?i/s:i<0?s/i:1+i-s;l.forEach((function(t){var n,e,r;t.M=(n=t.Y,(r=1)+(n-(e=s))*(u-r)/(i-e))}))}l.reduceRight((function(t,n){return n.M<2*t?n.M/=t:(t=n.M,n.M=1),n.I=t}),1),l.forEach((function(t){t.M*=4}));var c=T('!function(){"use strict";var r=function(t){self.removeEventListener("message",r);var n,e,a,f,i,u=t.data,o=function(){n={},e=0,a=0,f=0,i=0};o();var s=function(){return Math.ceil((e+a)/2)},v=function(){return Math.ceil((f+i)/2)},c=function(){return{left:s(),top:v(),width:a-e,height:i-f}},l=function(r,t,u){r.forEach((function(r){var o=r[0],s=r[1],v=t+o,c=u+s;n[v+"|"+c]=!0,e=Math.min(v,e),a=Math.max(v+1,a),f=Math.min(c,f),i=Math.max(c+1,i)}))},h=function(r,t,e){return function(r,t,n){var e,a,f=r[0],i=r[1],u=t[0],o=t[1];f>i?(e=1,a=i/f):i>f?(a=1,e=f/i):e=a=1;var s=[u,o];if(n(s))return s;for(var v=u,c=o,l=u,h=o,M=v,d=c;;){u-=e,o-=a,v+=e,c+=a;var m=Math.floor(u),g=Math.floor(o),p=Math.ceil(v),E=Math.ceil(c);if(p>M)for(var L=g;L<E;++L){var x=[p,L];if(n(x))return x}if(E>d)for(var y=p;y>m;--y){var w=[y,E];if(n(w))return w}if(m<l)for(var B=E;B>g;--B){var F=[m,B];if(n(F))return F}if(g<h)for(var b=m;b<p;++b){var j=[b,g];if(n(j))return j}l=m,h=g,M=p,d=E}}(u,[t+s(),e+v()],(function(t){var e=t[0],a=t[1];return function(r,t,e){return r.every((function(r){var a=r[0],f=r[1];return!n[t+a+"|"+(e+f)]}))}(r,e,a)}))};self.postMessage({}),self.addEventListener("message",(function(r){self.postMessage({getBounds:c,put:l,findFit:h,clear:o}[r.data.name].apply(null,r.data.args))}))};self.addEventListener("message",r)}();\n'),h={completedWords:0,totalWords:l.length};return Promise.resolve().then((function(){return t.throwIfInterrupted(),r.progress=h,m(c,j)})).then((function(){t.throwIfInterrupted(),h.completedWords++;var n=Promise.resolve();return l.reduce((function(e,r,i){return n=n.then((function(){return r.I<e.I?Promise.resolve().then((function(){return m(c,{name:"clear"})})).then((function(){var t=Promise.resolve(),n=e.I/r.I;return l.slice(0,i).forEach((function(e){t=t.then((function(){return e.M*=n,m(c,{name:"put",args:[e.T,e.R,e.U]})}))})),t})):m(c,{name:"put",args:[e.T,e.R,e.U]})})).then((function(){return r._=N,m(c,{name:"findFit",args:[r.T,r.R,r.U]})})).then((function(n){var e=n[0],i=n[1];t.throwIfInterrupted(),h.completedWords++,r.R=e,r.U=i,r._=0})),r})),n})).then((function(){return m(c,{name:"put",args:[e.T,e.R,e.U]})})).then((function(){return m(c,{name:"getBounds"})})).then((function(t){var n=t.left,e=t.top,r=t.width,i=t.height;if(r>0&&i>0){var s=Math.min(a/r,o/i);l.forEach((function(t){t.O-=n,t.W-=e,t.M*=s}))}var u=new Set;return l.map((function(t){for(var n=t.J,e=t.t,r=t.Y,i=t.i,a=t.o,o=t.u,s=t.s,l=t.h,c=t.S,h=t.O,f=t.W,d=t.G,p=JSON.stringify([e,a,o,s,l]);u.has(p);)p+="!";return u.add(p),{key:p,word:n,text:e,weight:r,rotation:i,font:c,color:d,left:h,top:f}}))})).finally((function(){c.terminate()})).finally((function(){t.throwIfInterrupted(),r.progress=null}))}return[]}))}return[]},default:i}})],props:a,data:function(){return{elementWidth:0,elementHeight:0,progress:null}},computed:l,watch:M,mounted:function(){var t,n,e=this;t=function(){if(e._isDestroyed)return!1;e.updateElementSize()},n=1e3,function(t){var n=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return t.call.apply(t,[this,n].concat(e))};return n}((function(e){requestAnimationFrame((function(){!1!==t()&&setTimeout(e,n)}))}))()},methods:k,render:function(t){var n=this.$scopedSlots,e=this.animationEasing,r=this.animationOptions,i=this.cloudWords,a=this.separateAnimationDelay,o=this.separateAnimationDuration;return n=Object.assign({},{default:function(t){return t.text}},n),t("div",{style:{height:"100%",position:"relative",width:"100%"}},[t("div",{style:{bottom:"50%",position:"absolute",right:"50%",transform:"translate(50%,50%)"}},i.map((function(i,s){var u=i.color,l=i.font,c=i.left,h=i.rotation,f=i.text,d=i.top,p=i.weight,m=i.word;return t("transition",Object.assign({},r),[t("div",{key:s,style:Object.assign({},{left:c+"px",position:"absolute",top:d+"px"},o>0?{animation:[o+"ms",e,a*s+"ms"].join(" "),transition:["all",o+"ms",e,a*s+"ms"].join(" ")}:{})},[t("div",{style:Object.assign({},{bottom:0,position:"absolute",right:0,transform:["translate(50%,50%)","rotate("+h+"rad)"].join(" ")},o>0?{transition:["all",o+"ms",e,a*s+"ms"].join(" ")}:{})},[t("span",{style:{color:u,display:"inline-block",font:l,lineHeight:1,transform:"translateY(-0.1em)",whiteSpace:"nowrap"}},[n.default({color:u,font:l,left:c,text:f,top:d,weight:p,word:m})])])])])})))])}},N=globalThis.window;if(N){var E=N.Vue;E&&E.component(A.name,A)}return A}))},"381f":function(t,n,e){"use strict";e("6aca")},"38cc":function(t,n,e){"use strict";e("f31c")},"477a":function(t,n,e){"use strict";e("d706")},"4b5e":function(t,n,e){"use strict";e("23bc")},"561f":function(t,n,e){},"56d5":function(t,n,e){},"5c9d":function(t,n,e){"use strict";e("561f")},"5d6f":function(t,n,e){"use strict";e("15fa")},"680f":function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"viz-page"},[e("Cover"),e("Intro"),e("Tutorial"),e("CirclePacking",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]}),e("BarChart",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]}),e("ScatterChart",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]}),e("Thanks")],1)},i=[],a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"intro"}},[e("div",{attrs:{id:"title"}},[e("div",{attrs:{id:"title-text"}},[e("h1",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v(" "+t._s(t.title1)+" ")]),e("h2",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v(" "+t._s(t.title2)+" ")])]),e("span",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v("╲╱")])]),e("div",{attrs:{id:"cover-image"}})])},o=[],s={name:"Cover",data(){return{title1:"Exploring patterns of language variation on social media",title2:"A case study in Atlanta online communities"}}},u=s,l=(e("229f"),e("2877")),c=Object(l["a"])(u,a,o,!1,null,"1ca14d72",null),h=c.exports,f=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"intro"}},[e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],attrs:{id:"text-block"}},[e("hr"),e("p",[t._v(" Our team will explore how different communities in Atlanta perceive language in different ways. To do this, we’ll be using a dataset of 149 local communities with information about their online behavior on Twitter. Information at the twitter account level allowed us to create summary statistics at the community level such as community size, average number of followers, friends and tweets and understand what are the top follows and topic words in each community. Following a specific methodology, deviations from the normal language can be measured and these deviations are called semantic change. Our main goal is that the user can understand the semantic change in social media across Atlanta’s communities and have a guide for current local trends online. Examples of potential users are journalists, politicians and society as a whole. ")]),e("span",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v("╲╱")])])])},d=[],p={name:"Intro",data(){return{}}},m=p,g=(e("a93e"),Object(l["a"])(m,f,d,!1,null,"2e8df011",null)),v=g.exports,y=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"tutorial"}},[e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],attrs:{id:"text-block"}},[e("hr"),e("p",[t._v(' What is Semantic Change? According to wikipedia, Semantic Change is a form of language change regarding the evolution of word usage. For example, if you take the word "Gay", that word\'s usage has drastically changed over the past century. Originally in the 1940s, "Gay" meant happy and joyful. But today, the word "Gay" is associated with the LGBTQIA+ community. Another example is the phrase "What\'s up?". The original meaning of that in English would\'ve meant "what is located above me?", but today it\'s used as a casual way of starting conversation. ')]),e("span",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v("╲╱")])])])},w=[],_={name:"Tutorial",data(){return{}}},b=_,x=(e("477a"),Object(l["a"])(b,y,w,!1,null,"99e5f08e",null)),M=x.exports,k=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"page"},[t._m(0),e("div",{staticClass:"content"},[e("div",{staticClass:"left"},[e("Ranking")],1),e("div",{ref:"right",staticClass:"right"},[e("BarGraph")],1)]),e("span",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v("╲╱")])])},A=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"title"},[e("h2",[t._v(" Community Grouping ")])])}],N=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{ref:"chart1",attrs:{id:"chart-1"}},[e("div",{ref:"svg-container",attrs:{id:"svg-container-1"}})])},E=[];function S(t,n){let e;if(void 0===n)for(const r of t)null!=r&&(e<r||void 0===e&&r>=r)&&(e=r);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e<i||void 0===e&&i>=i)&&(e=i)}return e}var C=Array.prototype.slice,T=function(t){return t},j=1,$=2,O=3,B=4,z=1e-6;function F(t){return"translate("+t+",0)"}function P(t){return"translate(0,"+t+")"}function R(t){return n=>+t(n)}function H(t,n){return n=Math.max(0,t.bandwidth()-2*n)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function D(){return!this.__axis}function I(t,n){var e=[],r=null,i=null,a=6,o=6,s=3,u="undefined"!==typeof window&&window.devicePixelRatio>1?0:.5,l=t===j||t===B?-1:1,c=t===B||t===$?"x":"y",h=t===j||t===O?F:P;function f(f){var d=null==r?n.ticks?n.ticks.apply(n,e):n.domain():r,p=null==i?n.tickFormat?n.tickFormat.apply(n,e):T:i,m=Math.max(a,0)+s,g=n.range(),v=+g[0]+u,y=+g[g.length-1]+u,w=(n.bandwidth?H:R)(n.copy(),u),_=f.selection?f.selection():f,b=_.selectAll(".domain").data([null]),x=_.selectAll(".tick").data(d,n).order(),M=x.exit(),k=x.enter().append("g").attr("class","tick"),A=x.select("line"),N=x.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(k),A=A.merge(k.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),N=N.merge(k.append("text").attr("fill","currentColor").attr(c,l*m).attr("dy",t===j?"0em":t===O?"0.71em":"0.32em")),f!==_&&(b=b.transition(f),x=x.transition(f),A=A.transition(f),N=N.transition(f),M=M.transition(f).attr("opacity",z).attr("transform",(function(t){return isFinite(t=w(t))?h(t+u):this.getAttribute("transform")})),k.attr("opacity",z).attr("transform",(function(t){var n=this.parentNode.__axis;return h((n&&isFinite(n=n(t))?n:w(t))+u)}))),M.remove(),b.attr("d",t===B||t===$?o?"M"+l*o+","+v+"H"+u+"V"+y+"H"+l*o:"M"+u+","+v+"V"+y:o?"M"+v+","+l*o+"V"+u+"H"+y+"V"+l*o:"M"+v+","+u+"H"+y),x.attr("opacity",1).attr("transform",(function(t){return h(w(t)+u)})),A.attr(c+"2",l*a),N.attr(c,l*m).text(p),_.filter(D).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===$?"start":t===B?"end":"middle"),_.each((function(){this.__axis=w}))}return f.scale=function(t){return arguments.length?(n=t,f):n},f.ticks=function(){return e=C.call(arguments),f},f.tickArguments=function(t){return arguments.length?(e=null==t?[]:C.call(t),f):e.slice()},f.tickValues=function(t){return arguments.length?(r=null==t?null:C.call(t),f):r&&r.slice()},f.tickFormat=function(t){return arguments.length?(i=t,f):i},f.tickSize=function(t){return arguments.length?(a=o=+t,f):a},f.tickSizeInner=function(t){return arguments.length?(a=+t,f):a},f.tickSizeOuter=function(t){return arguments.length?(o=+t,f):o},f.tickPadding=function(t){return arguments.length?(s=+t,f):s},f.offset=function(t){return arguments.length?(u=+t,f):u},f}function W(t){return I(O,t)}function L(t){return I(B,t)}var q={value:()=>{}};function V(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new U(r)}function U(t){this._=t}function Y(t,n){return t.trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))}function X(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function G(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=q,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}U.prototype=V.prototype={constructor:U,on:function(t,n){var e,r=this._,i=Y(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=n&&"function"!==typeof n)throw new Error("invalid callback: "+n);while(++a<o)if(e=(t=i[a]).type)r[e]=G(r[e],t.name,n);else if(null==n)for(e in r)r[e]=G(r[e],t.name,null);return this}while(++a<o)if((e=(t=i[a]).type)&&(e=X(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new U(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),a=0;a<e;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],a=0,e=r.length;a<e;++a)r[a].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(n,e)}};var K=V;function J(){}var Z=function(t){return null==t?J:function(){return this.querySelector(t)}},Q=function(t){"function"!==typeof t&&(t=Z(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a,o,s=n[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(a=s[c])&&(o=t.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),l[c]=o);return new Yn(r,this._parents)},tt=function(t){return"object"===typeof t&&"length"in t?t:Array.from(t)};function nt(){return[]}var et=function(t){return null==t?nt:function(){return this.querySelectorAll(t)}};function rt(t){return function(){var n=t.apply(this,arguments);return null==n?[]:tt(n)}}var it=function(t){t="function"===typeof t?rt(t):et(t);for(var n=this._groups,e=n.length,r=[],i=[],a=0;a<e;++a)for(var o,s=n[a],u=s.length,l=0;l<u;++l)(o=s[l])&&(r.push(t.call(o,o.__data__,l,s)),i.push(o));return new Yn(r,i)},at=function(t){return function(){return this.matches(t)}};function ot(t){return function(n){return n.matches(t)}}var st=Array.prototype.find;function ut(t){return function(){return st.call(this.children,t)}}function lt(){return this.firstElementChild}var ct=function(t){return this.select(null==t?lt:ut("function"===typeof t?t:ot(t)))},ht=Array.prototype.filter;function ft(){return this.children}function dt(t){return function(){return ht.call(this.children,t)}}var pt=function(t){return this.selectAll(null==t?ft:dt("function"===typeof t?t:ot(t)))},mt=function(t){"function"!==typeof t&&(t=at(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a,o=n[i],s=o.length,u=r[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&u.push(a);return new Yn(r,this._parents)},gt=function(t){return new Array(t.length)},vt=function(){return new Yn(this._enter||this._groups.map(gt),this._parents)};function yt(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}yt.prototype={constructor:yt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var wt=function(t){return function(){return t}};function _t(t,n,e,r,i,a){for(var o,s=0,u=n.length,l=a.length;s<l;++s)(o=n[s])?(o.__data__=a[s],r[s]=o):e[s]=new yt(t,a[s]);for(;s<u;++s)(o=n[s])&&(i[s]=o)}function bt(t,n,e,r,i,a,o){var s,u,l,c=new Map,h=n.length,f=a.length,d=new Array(h);for(s=0;s<h;++s)(u=n[s])&&(d[s]=l=o.call(u,u.__data__,s,n)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<f;++s)l=o.call(t,a[s],s,a)+"",(u=c.get(l))?(r[s]=u,u.__data__=a[s],c.delete(l)):e[s]=new yt(t,a[s]);for(s=0;s<h;++s)(u=n[s])&&c.get(d[s])===u&&(i[s]=u)}function xt(t){return t.__data__}var Mt=function(t,n){if(!arguments.length)return Array.from(this,xt);var e=n?bt:_t,r=this._parents,i=this._groups;"function"!==typeof t&&(t=wt(t));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var c=r[l],h=i[l],f=h.length,d=tt(t.call(c,c&&c.__data__,l,r)),p=d.length,m=s[l]=new Array(p),g=o[l]=new Array(p),v=u[l]=new Array(f);e(c,h,m,g,v,d,n);for(var y,w,_=0,b=0;_<p;++_)if(y=m[_]){_>=b&&(b=_+1);while(!(w=g[b])&&++b<p);y._next=w||null}}return o=new Yn(o,r),o._enter=s,o._exit=u,o},kt=function(){return new Yn(this._exit||this._groups.map(gt),this._parents)},At=function(t,n,e){var r=this.enter(),i=this,a=this.exit();return r="function"===typeof t?t(r):r.append(t+""),null!=n&&(i=n(i)),null==e?a.remove():e(a),r&&i?r.merge(i).order():i},Nt=function(t){if(!(t instanceof Yn))throw new Error("invalid merge");for(var n=this._groups,e=t._groups,r=n.length,i=e.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u,l=n[s],c=e[s],h=l.length,f=o[s]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;s<r;++s)o[s]=n[s];return new Yn(o,this._parents)},Et=function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},St=function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=Ct);for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a){for(var o,s=e[a],u=s.length,l=i[a]=new Array(u),c=0;c<u;++c)(o=s[c])&&(l[c]=o);l.sort(n)}return new Yn(i,this._parents).order()};function Ct(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}var Tt=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},jt=function(){return Array.from(this)},$t=function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},Ot=function(){let t=0;for(const n of this)++t;return t},Bt=function(){return!this.node()},zt=function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,a=n[e],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},Ft="http://www.w3.org/1999/xhtml",Pt={svg:"http://www.w3.org/2000/svg",xhtml:Ft,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Rt=function(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Pt.hasOwnProperty(n)?{space:Pt[n],local:t}:t};function Ht(t){return function(){this.removeAttribute(t)}}function Dt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function It(t,n){return function(){this.setAttribute(t,n)}}function Wt(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Lt(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function qt(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}var Vt=function(t,n){var e=Rt(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?Dt:Ht:"function"===typeof n?e.local?qt:Lt:e.local?Wt:It)(e,n))},Ut=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function Yt(t){return function(){this.style.removeProperty(t)}}function Xt(t,n,e){return function(){this.style.setProperty(t,n,e)}}function Gt(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}var Kt=function(t,n,e){return arguments.length>1?this.each((null==n?Yt:"function"===typeof n?Gt:Xt)(t,n,null==e?"":e)):Jt(this.node(),t)};function Jt(t,n){return t.style.getPropertyValue(n)||Ut(t).getComputedStyle(t,null).getPropertyValue(n)}function Zt(t){return function(){delete this[t]}}function Qt(t,n){return function(){this[t]=n}}function tn(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}var nn=function(t,n){return arguments.length>1?this.each((null==n?Zt:"function"===typeof n?tn:Qt)(t,n)):this.node()[t]};function en(t){return t.trim().split(/^|\s+/)}function rn(t){return t.classList||new an(t)}function an(t){this._node=t,this._names=en(t.getAttribute("class")||"")}function on(t,n){var e=rn(t),r=-1,i=n.length;while(++r<i)e.add(n[r])}function sn(t,n){var e=rn(t),r=-1,i=n.length;while(++r<i)e.remove(n[r])}function un(t){return function(){on(this,t)}}function ln(t){return function(){sn(this,t)}}function cn(t,n){return function(){(n.apply(this,arguments)?on:sn)(this,t)}}an.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var hn=function(t,n){var e=en(t+"");if(arguments.length<2){var r=rn(this.node()),i=-1,a=e.length;while(++i<a)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"===typeof n?cn:n?un:ln)(e,n))};function fn(){this.textContent=""}function dn(t){return function(){this.textContent=t}}function pn(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}var mn=function(t){return arguments.length?this.each(null==t?fn:("function"===typeof t?pn:dn)(t)):this.node().textContent};function gn(){this.innerHTML=""}function vn(t){return function(){this.innerHTML=t}}function yn(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}var wn=function(t){return arguments.length?this.each(null==t?gn:("function"===typeof t?yn:vn)(t)):this.node().innerHTML};function _n(){this.nextSibling&&this.parentNode.appendChild(this)}var bn=function(){return this.each(_n)};function xn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}var Mn=function(){return this.each(xn)};function kn(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Ft&&n.documentElement.namespaceURI===Ft?n.createElement(t):n.createElementNS(e,t)}}function An(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var Nn=function(t){var n=Rt(t);return(n.local?An:kn)(n)},En=function(t){var n="function"===typeof t?t:Nn(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))};function Sn(){return null}var Cn=function(t,n){var e="function"===typeof t?t:Nn(t),r=null==n?Sn:"function"===typeof n?n:Z(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))};function Tn(){var t=this.parentNode;t&&t.removeChild(this)}var jn=function(){return this.each(Tn)};function $n(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function On(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}var Bn=function(t){return this.select(t?On:$n)},zn=function(t){return arguments.length?this.property("__data__",t):this.node().__data__};function Fn(t){return function(n){t.call(this,n,this.__data__)}}function Pn(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}function Rn(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,a=n.length;r<a;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?n.length=i:delete this.__on}}}function Hn(t,n,e){return function(){var r,i=this.__on,a=Fn(n);if(i)for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=e),void(r.value=n);this.addEventListener(t.type,a,e),r={type:t.type,name:t.name,value:n,listener:a,options:e},i?i.push(r):this.__on=[r]}}var Dn=function(t,n,e){var r,i,a=Pn(t+""),o=a.length;if(!(arguments.length<2)){for(s=n?Hn:Rn,r=0;r<o;++r)this.each(s(a[r],n,e));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<o;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value};function In(t,n,e){var r=Ut(t),i=r.CustomEvent;"function"===typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function Wn(t,n){return function(){return In(this,t,n)}}function Ln(t,n){return function(){return In(this,t,n.apply(this,arguments))}}var qn=function(t,n){return this.each(("function"===typeof n?Ln:Wn)(t,n))},Vn=function*(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,i=t[n],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)},Un=[null];function Yn(t,n){this._groups=t,this._parents=n}function Xn(){return new Yn([[document.documentElement]],Un)}function Gn(){return this}Yn.prototype=Xn.prototype={constructor:Yn,select:Q,selectAll:it,selectChild:ct,selectChildren:pt,filter:mt,data:Mt,enter:vt,exit:kt,join:At,merge:Nt,selection:Gn,order:Et,sort:St,call:Tt,nodes:jt,node:$t,size:Ot,empty:Bt,each:zt,attr:Vt,style:Kt,property:nn,classed:hn,text:mn,html:wn,raise:bn,lower:Mn,append:En,insert:Cn,remove:jn,clone:Bn,datum:zn,on:Dn,dispatch:qn,[Symbol.iterator]:Vn};var Kn=Xn,Jn=function(t){return"string"===typeof t?new Yn([[document.querySelector(t)]],[document.documentElement]):new Yn([[t]],Un)};var Zn=function(t){t.preventDefault(),t.stopImmediatePropagation()},Qn=function(t){var n=t.document.documentElement,e=Jn(t).on("dragstart.drag",Zn,!0);"onselectstart"in n?e.on("selectstart.drag",Zn,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")};function te(t,n){var e=t.document.documentElement,r=Jn(t).on("dragstart.drag",null);n&&(r.on("click.drag",Zn,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}var ne=function(t,n,e){t.prototype=n.prototype=e,e.constructor=t};function ee(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function re(){}var ie=.7,ae=1/ie,oe="\\s*([+-]?\\d+)\\s*",se="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ue="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",le=/^#([0-9a-f]{3,8})$/,ce=new RegExp("^rgb\\("+[oe,oe,oe]+"\\)$"),he=new RegExp("^rgb\\("+[ue,ue,ue]+"\\)$"),fe=new RegExp("^rgba\\("+[oe,oe,oe,se]+"\\)$"),de=new RegExp("^rgba\\("+[ue,ue,ue,se]+"\\)$"),pe=new RegExp("^hsl\\("+[se,ue,ue]+"\\)$"),me=new RegExp("^hsla\\("+[se,ue,ue,se]+"\\)$"),ge={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ve(){return this.rgb().formatHex()}function ye(){return Te(this).formatHsl()}function we(){return this.rgb().formatRgb()}function _e(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=le.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?be(n):3===e?new Ae(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?xe(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?xe(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=ce.exec(t))?new Ae(n[1],n[2],n[3],1):(n=he.exec(t))?new Ae(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=fe.exec(t))?xe(n[1],n[2],n[3],n[4]):(n=de.exec(t))?xe(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=pe.exec(t))?Ce(n[1],n[2]/100,n[3]/100,1):(n=me.exec(t))?Ce(n[1],n[2]/100,n[3]/100,n[4]):ge.hasOwnProperty(t)?be(ge[t]):"transparent"===t?new Ae(NaN,NaN,NaN,0):null}function be(t){return new Ae(t>>16&255,t>>8&255,255&t,1)}function xe(t,n,e,r){return r<=0&&(t=n=e=NaN),new Ae(t,n,e,r)}function Me(t){return t instanceof re||(t=_e(t)),t?(t=t.rgb(),new Ae(t.r,t.g,t.b,t.opacity)):new Ae}function ke(t,n,e,r){return 1===arguments.length?Me(t):new Ae(t,n,e,null==r?1:r)}function Ae(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Ne(){return"#"+Se(this.r)+Se(this.g)+Se(this.b)}function Ee(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Se(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function Ce(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new $e(t,n,e,r)}function Te(t){if(t instanceof $e)return new $e(t.h,t.s,t.l,t.opacity);if(t instanceof re||(t=_e(t)),!t)return new $e;if(t instanceof $e)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),a=Math.max(n,e,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=n===a?(e-r)/s+6*(e<r):e===a?(r-n)/s+2:(n-e)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new $e(o,s,u,t.opacity)}function je(t,n,e,r){return 1===arguments.length?Te(t):new $e(t,n,e,null==r?1:r)}function $e(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Oe(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function Be(t,n,e,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*n+(4-6*a+3*o)*e+(1+3*t+3*a-3*o)*r+o*i)/6}ne(re,_e,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ve,formatHex:ve,formatHsl:ye,formatRgb:we,toString:we}),ne(Ae,ke,ee(re,{brighter:function(t){return t=null==t?ae:Math.pow(ae,t),new Ae(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?ie:Math.pow(ie,t),new Ae(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ne,formatHex:Ne,formatRgb:Ee,toString:Ee})),ne($e,je,ee(re,{brighter:function(t){return t=null==t?ae:Math.pow(ae,t),new $e(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?ie:Math.pow(ie,t),new $e(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Ae(Oe(t>=240?t-240:t+120,i,r),Oe(t,i,r),Oe(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var ze=function(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<n-1?t[r+2]:2*a-i;return Be((e-r/n)*n,o,i,a,s)}},Fe=function(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],a=t[r%n],o=t[(r+1)%n],s=t[(r+2)%n];return Be((e-r/n)*n,i,a,o,s)}},Pe=t=>()=>t;function Re(t,n){return function(e){return t+e*n}}function He(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function De(t,n){var e=n-t;return e?Re(t,e>180||e<-180?e-360*Math.round(e/360):e):Pe(isNaN(t)?n:t)}function Ie(t){return 1===(t=+t)?We:function(n,e){return e-n?He(n,e,t):Pe(isNaN(n)?e:n)}}function We(t,n){var e=n-t;return e?Re(t,e):Pe(isNaN(t)?n:t)}var Le=function t(n){var e=Ie(n);function r(t,n){var r=e((t=ke(t)).r,(n=ke(n)).r),i=e(t.g,n.g),a=e(t.b,n.b),o=We(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=a(n),t.opacity=o(n),t+""}}return r.gamma=t,r}(1);function qe(t){return function(n){var e,r,i=n.length,a=new Array(i),o=new Array(i),s=new Array(i);for(e=0;e<i;++e)r=ke(n[e]),a[e]=r.r||0,o[e]=r.g||0,s[e]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}qe(ze),qe(Fe);var Ve=function(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(a){for(e=0;e<r;++e)i[e]=t[e]*(1-a)+n[e]*a;return i}};function Ue(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ye(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(e=0;e<i;++e)a[e]=ir(t[e],n[e]);for(;e<r;++e)o[e]=n[e];return function(t){for(e=0;e<i;++e)o[e]=a[e](t);return o}}var Xe=function(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}},Ge=function(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}},Ke=function(t,n){var e,r={},i={};for(e in null!==t&&"object"===typeof t||(t={}),null!==n&&"object"===typeof n||(n={}),n)e in t?r[e]=ir(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}},Je=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ze=new RegExp(Je.source,"g");function Qe(t){return function(){return t}}function tr(t){return function(n){return t(n)+""}}var nr,er,rr=function(t,n){var e,r,i,a=Je.lastIndex=Ze.lastIndex=0,o=-1,s=[],u=[];t+="",n+="";while((e=Je.exec(t))&&(r=Ze.exec(n)))(i=r.index)>a&&(i=n.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(e=e[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Ge(e,r)})),a=Ze.lastIndex;return a<n.length&&(i=n.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?tr(u[0].x):Qe(n):(n=u.length,function(t){for(var e,r=0;r<n;++r)s[(e=u[r]).i]=e.x(t);return s.join("")})},ir=function(t,n){var e,r=typeof n;return null==n||"boolean"===r?Pe(n):("number"===r?Ge:"string"===r?(e=_e(n))?(n=e,Le):rr:n instanceof _e?Le:n instanceof Date?Xe:Ue(n)?Ve:Array.isArray(n)?Ye:"function"!==typeof n.valueOf&&"function"!==typeof n.toString||isNaN(n)?Ke:Ge)(t,n)},ar=function(t){let n;while(n=t.sourceEvent)t=n;return t},or=function(t,n){if(t=ar(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]},sr=0,ur=0,lr=0,cr=1e3,hr=0,fr=0,dr=0,pr="object"===typeof performance&&performance.now?performance:Date,mr="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function gr(){return fr||(mr(vr),fr=pr.now()+dr)}function vr(){fr=0}function yr(){this._call=this._time=this._next=null}function wr(t,n,e){var r=new yr;return r.restart(t,n,e),r}function _r(){gr(),++sr;var t,n=nr;while(n)(t=fr-n._time)>=0&&n._call.call(null,t),n=n._next;--sr}function br(){fr=(hr=pr.now())+dr,sr=ur=0;try{_r()}finally{sr=0,Mr(),fr=0}}function xr(){var t=pr.now(),n=t-hr;n>cr&&(dr-=n,hr=t)}function Mr(){var t,n,e=nr,r=1/0;while(e)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:nr=n);er=t,kr(r)}function kr(t){if(!sr){ur&&(ur=clearTimeout(ur));var n=t-fr;n>24?(t<1/0&&(ur=setTimeout(br,t-pr.now()-dr)),lr&&(lr=clearInterval(lr))):(lr||(hr=pr.now(),lr=setInterval(xr,cr)),sr=1,mr(br))}}yr.prototype=wr.prototype={constructor:yr,restart:function(t,n,e){if("function"!==typeof t)throw new TypeError("callback is not a function");e=(null==e?gr():+e)+(null==n?0:+n),this._next||er===this||(er?er._next=this:nr=this,er=this),this._call=t,this._time=e,kr()},stop:function(){this._call&&(this._call=null,this._time=1/0,kr())}};var Ar=function(t,n,e){var r=new yr;return n=null==n?0:+n,r.restart(e=>{r.stop(),t(e+n)},n,e),r},Nr=K("start","end","cancel","interrupt"),Er=[],Sr=0,Cr=1,Tr=2,jr=3,$r=4,Or=5,Br=6,zr=function(t,n,e,r,i,a){var o=t.__transition;if(o){if(e in o)return}else t.__transition={};Hr(t,e,{name:n,index:r,group:i,on:Nr,tween:Er,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Sr})};function Fr(t,n){var e=Rr(t,n);if(e.state>Sr)throw new Error("too late; already scheduled");return e}function Pr(t,n){var e=Rr(t,n);if(e.state>jr)throw new Error("too late; already running");return e}function Rr(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Hr(t,n,e){var r,i=t.__transition;function a(t){e.state=Cr,e.timer.restart(o,e.delay,e.time),e.delay<=t&&o(t-e.delay)}function o(a){var l,c,h,f;if(e.state!==Cr)return u();for(l in i)if(f=i[l],f.name===e.name){if(f.state===jr)return Ar(o);f.state===$r?(f.state=Br,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[l]):+l<n&&(f.state=Br,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[l])}if(Ar((function(){e.state===jr&&(e.state=$r,e.timer.restart(s,e.delay,e.time),s(a))})),e.state=Tr,e.on.call("start",t,t.__data__,e.index,e.group),e.state===Tr){for(e.state=jr,r=new Array(h=e.tween.length),l=0,c=-1;l<h;++l)(f=e.tween[l].value.call(t,t.__data__,e.index,e.group))&&(r[++c]=f);r.length=c+1}}function s(n){var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(u),e.state=Or,1),a=-1,o=r.length;while(++a<o)r[a].call(t,i);e.state===Or&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){for(var r in e.state=Br,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=wr(a,0,e.time)}var Dr,Ir=function(t,n){var e,r,i,a=t.__transition,o=!0;if(a){for(i in n=null==n?null:n+"",a)(e=a[i]).name===n?(r=e.state>Tr&&e.state<Or,e.state=Br,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete a[i]):o=!1;o&&delete t.__transition}},Wr=function(t){return this.each((function(){Ir(this,t)}))},Lr=180/Math.PI,qr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Vr=function(t,n,e,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+n*n))&&(t/=o,n/=o),(u=t*e+n*r)&&(e-=t*u,r-=n*u),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,u/=s),t*r<n*e&&(t=-t,n=-n,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(n,t)*Lr,skewX:Math.atan(u)*Lr,scaleX:o,scaleY:s}};function Ur(t){const n=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?qr:Vr(n.a,n.b,n.c,n.d,n.e,n.f)}function Yr(t){return null==t?qr:(Dr||(Dr=document.createElementNS("http://www.w3.org/2000/svg","g")),Dr.setAttribute("transform",t),(t=Dr.transform.baseVal.consolidate())?(t=t.matrix,Vr(t.a,t.b,t.c,t.d,t.e,t.f)):qr)}function Xr(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}function a(t,r,i,a,o,s){if(t!==i||r!==a){var u=o.push("translate(",null,n,null,e);s.push({i:u-4,x:Ge(t,i)},{i:u-2,x:Ge(r,a)})}else(i||a)&&o.push("translate("+i+n+a+e)}function o(t,n,e,a){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),a.push({i:e.push(i(e)+"rotate(",null,r)-2,x:Ge(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}function s(t,n,e,a){t!==n?a.push({i:e.push(i(e)+"skewX(",null,r)-2,x:Ge(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}function u(t,n,e,r,a,o){if(t!==e||n!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:Ge(t,e)},{i:s-2,x:Ge(n,r)})}else 1===e&&1===r||a.push(i(a)+"scale("+e+","+r+")")}return function(n,e){var r=[],i=[];return n=t(n),e=t(e),a(n.translateX,n.translateY,e.translateX,e.translateY,r,i),o(n.rotate,e.rotate,r,i),s(n.skewX,e.skewX,r,i),u(n.scaleX,n.scaleY,e.scaleX,e.scaleY,r,i),n=e=null,function(t){var n,e=-1,a=i.length;while(++e<a)r[(n=i[e]).i]=n.x(t);return r.join("")}}}var Gr=Xr(Ur,"px, ","px)","deg)"),Kr=Xr(Yr,", ",")",")");function Jr(t,n){var e,r;return function(){var i=Pr(this,t),a=i.tween;if(a!==e){r=e=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===n){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Zr(t,n,e){var r,i;if("function"!==typeof e)throw new Error;return function(){var a=Pr(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:n,value:e},u=0,l=i.length;u<l;++u)if(i[u].name===n){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}var Qr=function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=Rr(this.node(),e).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==n?Jr:Zr)(e,t,n))};function ti(t,n,e){var r=t._id;return t.each((function(){var t=Pr(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)})),function(t){return Rr(t,r).value[n]}}var ni=function(t,n){var e;return("number"===typeof n?Ge:n instanceof _e?Le:(e=_e(n))?(n=e,Le):rr)(t,n)};function ei(t){return function(){this.removeAttribute(t)}}function ri(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ii(t,n,e){var r,i,a=e+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=n(r=o,e)}}function ai(t,n,e){var r,i,a=e+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=n(r=o,e)}}function oi(t,n,e){var r,i,a;return function(){var o,s,u=e(this);if(null!=u)return o=this.getAttribute(t),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=n(r=o,u));this.removeAttribute(t)}}function si(t,n,e){var r,i,a;return function(){var o,s,u=e(this);if(null!=u)return o=this.getAttributeNS(t.space,t.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=n(r=o,u));this.removeAttributeNS(t.space,t.local)}}var ui=function(t,n){var e=Rt(t),r="transform"===e?Kr:ni;return this.attrTween(t,"function"===typeof n?(e.local?si:oi)(e,r,ti(this,"attr."+t,n)):null==n?(e.local?ri:ei)(e):(e.local?ai:ii)(e,r,n))};function li(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function ci(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function hi(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&ci(t,i)),e}return i._value=n,i}function fi(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&li(t,i)),e}return i._value=n,i}var di=function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!==typeof n)throw new Error;var r=Rt(t);return this.tween(e,(r.local?hi:fi)(r,n))};function pi(t,n){return function(){Fr(this,t).delay=+n.apply(this,arguments)}}function mi(t,n){return n=+n,function(){Fr(this,t).delay=n}}var gi=function(t){var n=this._id;return arguments.length?this.each(("function"===typeof t?pi:mi)(n,t)):Rr(this.node(),n).delay};function vi(t,n){return function(){Pr(this,t).duration=+n.apply(this,arguments)}}function yi(t,n){return n=+n,function(){Pr(this,t).duration=n}}var wi=function(t){var n=this._id;return arguments.length?this.each(("function"===typeof t?vi:yi)(n,t)):Rr(this.node(),n).duration};function _i(t,n){if("function"!==typeof n)throw new Error;return function(){Pr(this,t).ease=n}}var bi=function(t){var n=this._id;return arguments.length?this.each(_i(n,t)):Rr(this.node(),n).ease};function xi(t,n){return function(){var e=n.apply(this,arguments);if("function"!==typeof e)throw new Error;Pr(this,t).ease=e}}var Mi=function(t){if("function"!==typeof t)throw new Error;return this.each(xi(this._id,t))},ki=function(t){"function"!==typeof t&&(t=at(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a,o=n[i],s=o.length,u=r[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&u.push(a);return new Qi(r,this._parents,this._name,this._id)},Ai=function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u,l=n[s],c=e[s],h=l.length,f=o[s]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;s<r;++s)o[s]=n[s];return new Qi(o,this._parents,this._name,this._id)};function Ni(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t}))}function Ei(t,n,e){var r,i,a=Ni(n)?Fr:Pr;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(n,e),o.on=i}}var Si=function(t,n){var e=this._id;return arguments.length<2?Rr(this.node(),e).on.on(t):this.each(Ei(e,t,n))};function Ci(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}var Ti=function(){return this.on("end.remove",Ci(this._id))},ji=function(t){var n=this._name,e=this._id;"function"!==typeof t&&(t=Z(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,u,l=r[o],c=l.length,h=a[o]=new Array(c),f=0;f<c;++f)(s=l[f])&&(u=t.call(s,s.__data__,f,l))&&("__data__"in s&&(u.__data__=s.__data__),h[f]=u,zr(h[f],n,e,f,h,Rr(s,e)));return new Qi(a,this._parents,n,e)},$i=function(t){var n=this._name,e=this._id;"function"!==typeof t&&(t=et(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,h=0;h<c;++h)if(u=l[h]){for(var f,d=t.call(u,u.__data__,h,l),p=Rr(u,e),m=0,g=d.length;m<g;++m)(f=d[m])&&zr(f,n,e,m,d,p);a.push(d),o.push(u)}return new Qi(a,o,n,e)},Oi=Kn.prototype.constructor,Bi=function(){return new Oi(this._groups,this._parents)};function zi(t,n){var e,r,i;return function(){var a=Jt(this,t),o=(this.style.removeProperty(t),Jt(this,t));return a===o?null:a===e&&o===r?i:i=n(e=a,r=o)}}function Fi(t){return function(){this.style.removeProperty(t)}}function Pi(t,n,e){var r,i,a=e+"";return function(){var o=Jt(this,t);return o===a?null:o===r?i:i=n(r=o,e)}}function Ri(t,n,e){var r,i,a;return function(){var o=Jt(this,t),s=e(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=Jt(this,t)),o===u?null:o===r&&u===i?a:(i=u,a=n(r=o,s))}}function Hi(t,n){var e,r,i,a,o="style."+n,s="end."+o;return function(){var u=Pr(this,t),l=u.on,c=null==u.value[o]?a||(a=Fi(n)):void 0;l===e&&i===c||(r=(e=l).copy()).on(s,i=c),u.on=r}}var Di=function(t,n,e){var r="transform"===(t+="")?Gr:ni;return null==n?this.styleTween(t,zi(t,r)).on("end.style."+t,Fi(t)):"function"===typeof n?this.styleTween(t,Ri(t,r,ti(this,"style."+t,n))).each(Hi(this._id,t)):this.styleTween(t,Pi(t,r,n),e).on("end.style."+t,null)};function Ii(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function Wi(t,n,e){var r,i;function a(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&Ii(t,a,e)),r}return a._value=n,a}var Li=function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!==typeof n)throw new Error;return this.tween(r,Wi(t,n,null==e?"":e))};function qi(t){return function(){this.textContent=t}}function Vi(t){return function(){var n=t(this);this.textContent=null==n?"":n}}var Ui=function(t){return this.tween("text","function"===typeof t?Vi(ti(this,"text",t)):qi(null==t?"":t+""))};function Yi(t){return function(n){this.textContent=t.call(this,n)}}function Xi(t){var n,e;function r(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&Yi(r)),n}return r._value=t,r}var Gi=function(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;return this.tween(n,Xi(t))},Ki=function(){for(var t=this._name,n=this._id,e=na(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],u=s.length,l=0;l<u;++l)if(o=s[l]){var c=Rr(o,n);zr(o,t,e,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Qi(r,this._parents,t,e)},Ji=function(){var t,n,e=this,r=e._id,i=e.size();return new Promise((function(a,o){var s={value:o},u={value:function(){0===--i&&a()}};e.each((function(){var e=Pr(this,r),i=e.on;i!==t&&(n=(t=i).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(u)),e.on=n})),0===i&&a()}))},Zi=0;function Qi(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function ta(t){return Kn().transition(t)}function na(){return++Zi}var ea=Kn.prototype;function ra(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Qi.prototype=ta.prototype={constructor:Qi,select:ji,selectAll:$i,filter:ki,merge:Ai,selection:Bi,transition:Ki,call:ea.call,nodes:ea.nodes,node:ea.node,size:ea.size,empty:ea.empty,each:ea.each,on:Si,attr:ui,attrTween:di,style:Di,styleTween:Li,text:Ui,textTween:Gi,remove:Ti,tween:Qr,delay:gi,duration:wi,ease:bi,easeVarying:Mi,end:Ji,[Symbol.iterator]:ea[Symbol.iterator]};var ia={time:null,delay:0,duration:250,ease:ra};function aa(t,n){var e;while(!(e=t.__transition)||!(e=e[n]))if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}var oa=function(t){var n,e;t instanceof Qi?(n=t._id,t=t._name):(n=na(),(e=ia).time=gr(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],u=s.length,l=0;l<u;++l)(o=s[l])&&zr(o,t,n,l,s,e||aa(o,n));return new Qi(r,this._parents,t,n)};Kn.prototype.interrupt=Wr,Kn.prototype.transition=oa;var sa=t=>()=>t;function ua(t,{sourceEvent:n,target:e,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function la(t){t.stopImmediatePropagation()}var ca=function(t){t.preventDefault(),t.stopImmediatePropagation()},ha={name:"drag"},fa={name:"space"},da={name:"handle"},pa={name:"center"};const{abs:ma,max:ga,min:va}=Math;function ya(t){return[+t[0],+t[1]]}function wa(t){return[ya(t[0]),ya(t[1])]}var _a={name:"x",handles:["w","e"].map(Ea),input:function(t,n){return null==t?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ba={name:"y",handles:["n","s"].map(Ea),input:function(t,n){return null==t?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},xa=(["n","w","e","s","nw","ne","sw","se"].map(Ea),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),Ma={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ka={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Aa={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Na={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ea(t){return{type:t}}function Sa(t){return!t.ctrlKey&&!t.button}function Ca(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Ta(){return navigator.maxTouchPoints||"ontouchstart"in this}function ja(t){while(!t.__brush)if(!(t=t.parentNode))return;return t.__brush}function $a(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Oa(){return Ba(ba)}function Ba(t){var n,e=Ca,r=Sa,i=Ta,a=!0,o=K("start","brush","end"),s=6;function u(n){var e=n.property("__brush",m).selectAll(".overlay").data([Ea("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",xa.overlay).merge(e).each((function(){var t=ja(this).extent;Jn(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),n.selectAll(".selection").data([Ea("selection")]).enter().append("rect").attr("class","selection").attr("cursor",xa.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=n.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return xa[t.type]})),n.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(i).on("touchstart.brush",f).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){var t=Jn(this),n=ja(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?n[1][0]-s/2:n[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?n[1][1]-s/2:n[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(t,n,e){var r=t.__brush.emitter;return!r||e&&r.clean?new h(t,n,e):r}function h(t,n,e){this.that=t,this.args=n,this.state=t.__brush,this.active=0,this.clean=e}function f(e){if((!n||e.touches)&&r.apply(this,arguments)){var i,o,s,u,h,f,d,p,m,g,v,y=this,w=e.target.__data__.type,_="selection"===(a&&e.metaKey?w="overlay":w)?ha:a&&e.altKey?pa:da,b=t===ba?null:Aa[w],x=t===_a?null:Na[w],M=ja(y),k=M.extent,A=M.selection,N=k[0][0],E=k[0][1],S=k[1][0],C=k[1][1],T=0,j=0,$=b&&x&&a&&e.shiftKey,O=Array.from(e.touches||[e],t=>{const n=t.identifier;return t=or(t,y),t.point0=t.slice(),t.identifier=n,t});if("overlay"===w){A&&(m=!0);const n=[O[0],O[1]||O[0]];M.selection=A=[[i=t===ba?N:va(n[0][0],n[1][0]),s=t===_a?E:va(n[0][1],n[1][1])],[h=t===ba?S:ga(n[0][0],n[1][0]),d=t===_a?C:ga(n[0][1],n[1][1])]],O.length>1&&H()}else i=A[0][0],s=A[0][1],h=A[1][0],d=A[1][1];o=i,u=s,f=h,p=d;var B=Jn(y).attr("pointer-events","none"),z=B.selectAll(".overlay").attr("cursor",xa[w]);Ir(y);var F=c(y,arguments,!0).beforestart();if(e.touches)F.moved=R,F.ended=D;else{var P=Jn(e.view).on("mousemove.brush",R,!0).on("mouseup.brush",D,!0);a&&P.on("keydown.brush",I,!0).on("keyup.brush",W,!0),Qn(e.view)}l.call(y),F.start(e,_.name)}function R(t){for(const n of t.changedTouches||[t])for(const t of O)t.identifier===n.identifier&&(t.cur=or(n,y));if($&&!g&&!v&&1===O.length){const t=O[0];ma(t.cur[0]-t[0])>ma(t.cur[1]-t[1])?v=!0:g=!0}for(const n of O)n.cur&&(n[0]=n.cur[0],n[1]=n.cur[1]);m=!0,ca(t),H(t)}function H(t){const n=O[0],e=n.point0;var r;switch(T=n[0]-e[0],j=n[1]-e[1],_){case fa:case ha:b&&(T=ga(N-i,va(S-h,T)),o=i+T,f=h+T),x&&(j=ga(E-s,va(C-d,j)),u=s+j,p=d+j);break;case da:O[1]?(b&&(o=ga(N,va(S,O[0][0])),f=ga(N,va(S,O[1][0])),b=1),x&&(u=ga(E,va(C,O[0][1])),p=ga(E,va(C,O[1][1])),x=1)):(b<0?(T=ga(N-i,va(S-i,T)),o=i+T,f=h):b>0&&(T=ga(N-h,va(S-h,T)),o=i,f=h+T),x<0?(j=ga(E-s,va(C-s,j)),u=s+j,p=d):x>0&&(j=ga(E-d,va(C-d,j)),u=s,p=d+j));break;case pa:b&&(o=ga(N,va(S,i-T*b)),f=ga(N,va(S,h+T*b))),x&&(u=ga(E,va(C,s-j*x)),p=ga(E,va(C,d+j*x)));break}f<o&&(b*=-1,r=i,i=h,h=r,r=o,o=f,f=r,w in Ma&&z.attr("cursor",xa[w=Ma[w]])),p<u&&(x*=-1,r=s,s=d,d=r,r=u,u=p,p=r,w in ka&&z.attr("cursor",xa[w=ka[w]])),M.selection&&(A=M.selection),g&&(o=A[0][0],f=A[1][0]),v&&(u=A[0][1],p=A[1][1]),A[0][0]===o&&A[0][1]===u&&A[1][0]===f&&A[1][1]===p||(M.selection=[[o,u],[f,p]],l.call(y),F.brush(t,_.name))}function D(t){if(la(t),t.touches){if(t.touches.length)return;n&&clearTimeout(n),n=setTimeout((function(){n=null}),500)}else te(t.view,m),P.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);B.attr("pointer-events","all"),z.attr("cursor",xa.overlay),M.selection&&(A=M.selection),$a(A)&&(M.selection=null,l.call(y)),F.end(t,_.name)}function I(t){switch(t.keyCode){case 16:$=b&&x;break;case 18:_===da&&(b&&(h=f-T*b,i=o+T*b),x&&(d=p-j*x,s=u+j*x),_=pa,H());break;case 32:_!==da&&_!==pa||(b<0?h=f-T:b>0&&(i=o-T),x<0?d=p-j:x>0&&(s=u-j),_=fa,z.attr("cursor",xa.selection),H());break;default:return}ca(t)}function W(t){switch(t.keyCode){case 16:$&&(g=v=$=!1,H());break;case 18:_===pa&&(b<0?h=f:b>0&&(i=o),x<0?d=p:x>0&&(s=u),_=da,H());break;case 32:_===fa&&(t.altKey?(b&&(h=f-T*b,i=o+T*b),x&&(d=p-j*x,s=u+j*x),_=pa):(b<0?h=f:b>0&&(i=o),x<0?d=p:x>0&&(s=u),_=da),z.attr("cursor",xa[w]),H());break;default:return}ca(t)}}function d(t){c(this,arguments).moved(t)}function p(t){c(this,arguments).ended(t)}function m(){var n=this.__brush||{selection:null};return n.extent=wa(e.apply(this,arguments)),n.dim=t,n}return u.move=function(n,e){n.tween?n.on("start.brush",(function(t){c(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){c(this,arguments).end(t)})).tween("brush",(function(){var n=this,r=n.__brush,i=c(n,arguments),a=r.selection,o=t.input("function"===typeof e?e.apply(this,arguments):e,r.extent),s=ir(a,o);function u(t){r.selection=1===t&&null===o?null:s(t),l.call(n),i.brush()}return null!==a&&null!==o?u:u(1)})):n.each((function(){var n=this,r=arguments,i=n.__brush,a=t.input("function"===typeof e?e.apply(n,r):e,i.extent),o=c(n,r).beforestart();Ir(n),i.selection=null===a?null:a,l.call(n),o.start().brush().end()}))},u.clear=function(t){u.move(t,null)},h.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,n){return this.starting?(this.starting=!1,this.emit("start",t,n)):this.emit("brush",t),this},brush:function(t,n){return this.emit("brush",t,n),this},end:function(t,n){return 0===--this.active&&(delete this.state.emitter,this.emit("end",t,n)),this},emit:function(n,e,r){var i=Jn(this.that).datum();o.call(n,this.that,new ua(n,{sourceEvent:e,target:u,selection:t.output(this.state.selection),mode:r,dispatch:o}),i)}},u.extent=function(t){return arguments.length?(e="function"===typeof t?t:sa(wa(t)),u):e},u.filter=function(t){return arguments.length?(r="function"===typeof t?t:sa(!!t),u):r},u.touchable=function(t){return arguments.length?(i="function"===typeof t?t:sa(!!t),u):i},u.handleSize=function(t){return arguments.length?(s=+t,u):s},u.keyModifiers=function(t){return arguments.length?(a=!!t,u):a},u.on=function(){var t=o.on.apply(o,arguments);return t===o?u:t},u}var za={},Fa={},Pa=34,Ra=10,Ha=13;function Da(t){return new Function("d","return {"+t.map((function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'})).join(",")+"}")}function Ia(t,n){var e=Da(t);return function(r,i){return n(e(r),i,t)}}function Wa(t){var n=Object.create(null),e=[];return t.forEach((function(t){for(var r in t)r in n||e.push(n[r]=r)})),e}function La(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function qa(t){return t<0?"-"+La(-t,6):t>9999?"+"+La(t,6):La(t,4)}function Va(t){var n=t.getUTCHours(),e=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":qa(t.getUTCFullYear(),4)+"-"+La(t.getUTCMonth()+1,2)+"-"+La(t.getUTCDate(),2)+(i?"T"+La(n,2)+":"+La(e,2)+":"+La(r,2)+"."+La(i,3)+"Z":r?"T"+La(n,2)+":"+La(e,2)+":"+La(r,2)+"Z":e||n?"T"+La(n,2)+":"+La(e,2)+"Z":"")}var Ua=function(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var e,r,a=i(t,(function(t,i){if(e)return e(t,i-1);r=t,e=n?Ia(t,n):Da(t)}));return a.columns=r||[],a}function i(t,n){var r,i=[],a=t.length,o=0,s=0,u=a<=0,l=!1;function c(){if(u)return Fa;if(l)return l=!1,za;var n,r,i=o;if(t.charCodeAt(i)===Pa){while(o++<a&&t.charCodeAt(o)!==Pa||t.charCodeAt(++o)===Pa);return(n=o)>=a?u=!0:(r=t.charCodeAt(o++))===Ra?l=!0:r===Ha&&(l=!0,t.charCodeAt(o)===Ra&&++o),t.slice(i+1,n-1).replace(/""/g,'"')}while(o<a){if((r=t.charCodeAt(n=o++))===Ra)l=!0;else if(r===Ha)l=!0,t.charCodeAt(o)===Ra&&++o;else if(r!==e)continue;return t.slice(i,n)}return u=!0,t.slice(i,a)}t.charCodeAt(a-1)===Ra&&--a,t.charCodeAt(a-1)===Ha&&--a;while((r=c())!==Fa){var h=[];while(r!==za&&r!==Fa)h.push(r),r=c();n&&null==(h=n(h,s++))||i.push(h)}return i}function a(n,e){return n.map((function(n){return e.map((function(t){return c(n[t])})).join(t)}))}function o(n,e){return null==e&&(e=Wa(n)),[e.map(c).join(t)].concat(a(n,e)).join("\n")}function s(t,n){return null==n&&(n=Wa(t)),a(t,n).join("\n")}function u(t){return t.map(l).join("\n")}function l(n){return n.map(c).join(t)}function c(t){return null==t?"":t instanceof Date?Va(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:u,formatRow:l,formatValue:c}},Ya=Ua(","),Xa=Ya.parse,Ga=(Ya.parseRows,Ya.format,Ya.formatBody,Ya.formatRows,Ya.formatRow,Ya.formatValue,Ua("\t")),Ka=Ga.parse;Ga.parseRows,Ga.format,Ga.formatBody,Ga.formatRows,Ga.formatRow,Ga.formatValue;function Ja(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var Za=function(t,n){return fetch(t,n).then(Ja)};function Qa(t){return function(n,e,r){return 2===arguments.length&&"function"===typeof e&&(r=e,e=void 0),Za(n,e).then((function(n){return t(n,r)}))}}var to=Qa(Xa);Qa(Ka);function no(t){var n=0,e=t.children,r=e&&e.length;if(r)while(--r>=0)n+=e[r].value;else n=1;t.value=n}var eo=function(){return this.eachAfter(no)},ro=function(t,n){let e=-1;for(const r of this)t.call(n,r,++e,this);return this},io=function(t,n){var e,r,i=this,a=[i],o=-1;while(i=a.pop())if(t.call(n,i,++o,this),e=i.children)for(r=e.length-1;r>=0;--r)a.push(e[r]);return this},ao=function(t,n){var e,r,i,a=this,o=[a],s=[],u=-1;while(a=o.pop())if(s.push(a),e=a.children)for(r=0,i=e.length;r<i;++r)o.push(e[r]);while(a=s.pop())t.call(n,a,++u,this);return this},oo=function(t,n){let e=-1;for(const r of this)if(t.call(n,r,++e,this))return r},so=function(t){return this.eachAfter((function(n){var e=+t(n.data)||0,r=n.children,i=r&&r.length;while(--i>=0)e+=r[i].value;n.value=e}))},uo=function(t){return this.eachBefore((function(n){n.children&&n.children.sort(t)}))},lo=function(t){var n=this,e=co(n,t),r=[n];while(n!==e)n=n.parent,r.push(n);var i=r.length;while(t!==e)r.splice(i,0,t),t=t.parent;return r};function co(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;t=e.pop(),n=r.pop();while(t===n)i=t,t=e.pop(),n=r.pop();return i}var ho=function(){var t=this,n=[t];while(t=t.parent)n.push(t);return n},fo=function(){return Array.from(this)},po=function(){var t=[];return this.eachBefore((function(n){n.children||t.push(n)})),t},mo=function(){var t=this,n=[];return t.each((function(e){e!==t&&n.push({source:e.parent,target:e})})),n},go=function*(){var t,n,e,r,i=this,a=[i];do{t=a.reverse(),a=[];while(i=t.pop())if(yield i,n=i.children)for(e=0,r=n.length;e<r;++e)a.push(n[e])}while(a.length)};function vo(t,n){t instanceof Map?(t=[void 0,t],void 0===n&&(n=_o)):void 0===n&&(n=wo);var e,r,i,a,o,s=new Mo(t),u=[s];while(e=u.pop())if((i=n(e.data))&&(o=(i=Array.from(i)).length))for(e.children=i,a=o-1;a>=0;--a)u.push(r=i[a]=new Mo(i[a])),r.parent=e,r.depth=e.depth+1;return s.eachBefore(xo)}function yo(){return vo(this).eachBefore(bo)}function wo(t){return t.children}function _o(t){return Array.isArray(t)?t[1]:null}function bo(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function xo(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function Mo(t){this.data=t,this.depth=this.height=0,this.parent=null}Mo.prototype=vo.prototype={constructor:Mo,count:eo,each:ro,eachAfter:ao,eachBefore:io,find:oo,sum:so,sort:uo,path:lo,ancestors:ho,descendants:fo,leaves:po,links:mo,copy:yo,[Symbol.iterator]:go};var ko=function(t){return"object"===typeof t&&"length"in t?t:Array.from(t)};function Ao(t){var n,e,r=t.length;while(r)e=Math.random()*r--|0,n=t[r],t[r]=t[e],t[e]=n;return t}var No=function(t){var n,e,r=0,i=(t=Ao(Array.from(t))).length,a=[];while(r<i)n=t[r],e&&Co(e,n)?++r:(e=jo(a=Eo(a,n)),r=0);return e};function Eo(t,n){var e,r;if(To(n,t))return[n];for(e=0;e<t.length;++e)if(So(n,t[e])&&To(Oo(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(So(Oo(t[e],t[r]),n)&&So(Oo(t[e],n),t[r])&&So(Oo(t[r],n),t[e])&&To(Bo(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function So(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function Co(t,n){var e=t.r-n.r+1e-9*Math.max(t.r,n.r,1),r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function To(t,n){for(var e=0;e<n.length;++e)if(!Co(t,n[e]))return!1;return!0}function jo(t){switch(t.length){case 1:return $o(t[0]);case 2:return Oo(t[0],t[1]);case 3:return Bo(t[0],t[1],t[2])}}function $o(t){return{x:t.x,y:t.y,r:t.r}}function Oo(t,n){var e=t.x,r=t.y,i=t.r,a=n.x,o=n.y,s=n.r,u=a-e,l=o-r,c=s-i,h=Math.sqrt(u*u+l*l);return{x:(e+a+u/h*c)/2,y:(r+o+l/h*c)/2,r:(h+i+s)/2}}function Bo(t,n,e){var r=t.x,i=t.y,a=t.r,o=n.x,s=n.y,u=n.r,l=e.x,c=e.y,h=e.r,f=r-o,d=r-l,p=i-s,m=i-c,g=u-a,v=h-a,y=r*r+i*i-a*a,w=y-o*o-s*s+u*u,_=y-l*l-c*c+h*h,b=d*p-f*m,x=(p*_-m*w)/(2*b)-r,M=(m*g-p*v)/b,k=(d*w-f*_)/(2*b)-i,A=(f*v-d*g)/b,N=M*M+A*A-1,E=2*(a+x*M+k*A),S=x*x+k*k-a*a,C=-(N?(E+Math.sqrt(E*E-4*N*S))/(2*N):S/E);return{x:r+x+M*C,y:i+k+A*C,r:C}}function zo(t,n,e){var r,i,a,o,s=t.x-n.x,u=t.y-n.y,l=s*s+u*u;l?(i=n.r+e.r,i*=i,o=t.r+e.r,o*=o,i>o?(r=(l+o-i)/(2*l),a=Math.sqrt(Math.max(0,o/l-r*r)),e.x=t.x-r*s-a*u,e.y=t.y-r*u+a*s):(r=(l+i-o)/(2*l),a=Math.sqrt(Math.max(0,i/l-r*r)),e.x=n.x+r*s-a*u,e.y=n.y+r*u+a*s)):(e.x=n.x+e.r,e.y=n.y)}function Fo(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function Po(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,a=(n.y*e.r+e.y*n.r)/r;return i*i+a*a}function Ro(t){this._=t,this.next=null,this.previous=null}function Ho(t){if(!(i=(t=ko(t)).length))return 0;var n,e,r,i,a,o,s,u,l,c,h;if(n=t[0],n.x=0,n.y=0,!(i>1))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(i>2))return n.r+e.r;zo(e,n,r=t[2]),n=new Ro(n),e=new Ro(e),r=new Ro(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(s=3;s<i;++s){zo(n._,e._,r=t[s]),r=new Ro(r),u=e.next,l=n.previous,c=e._.r,h=n._.r;do{if(c<=h){if(Fo(u._,r._)){e=u,n.next=e,e.previous=n,--s;continue t}c+=u._.r,u=u.next}else{if(Fo(l._,r._)){n=l,n.next=e,e.previous=n,--s;continue t}h+=l._.r,l=l.previous}}while(u!==l.next);r.previous=n,r.next=e,n.next=e.previous=e=r,a=Po(n);while((r=r.next)!==e)(o=Po(r))<a&&(n=r,a=o);e=n.next}n=[e._],r=e;while((r=r.next)!==e)n.push(r._);for(r=No(n),s=0;s<i;++s)n=t[s],n.x-=r.x,n.y-=r.y;return r.r}function Do(t){return null==t?null:Io(t)}function Io(t){if("function"!==typeof t)throw new Error;return t}function Wo(){return 0}var Lo=function(t){return function(){return t}};function qo(t){return Math.sqrt(t.value)}var Vo=function(){var t=null,n=1,e=1,r=Wo;function i(i){return i.x=n/2,i.y=e/2,t?i.eachBefore(Uo(t)).eachAfter(Yo(r,.5)).eachBefore(Xo(1)):i.eachBefore(Uo(qo)).eachAfter(Yo(Wo,1)).eachAfter(Yo(r,i.r/Math.min(n,e))).eachBefore(Xo(Math.min(n,e)/(2*i.r))),i}return i.radius=function(n){return arguments.length?(t=Do(n),i):t},i.size=function(t){return arguments.length?(n=+t[0],e=+t[1],i):[n,e]},i.padding=function(t){return arguments.length?(r="function"===typeof t?t:Lo(+t),i):r},i};function Uo(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Yo(t,n){return function(e){if(r=e.children){var r,i,a,o=r.length,s=t(e)*n||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=Ho(r),s)for(i=0;i<o;++i)r[i].r-=s;e.r=a+s}}}function Xo(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}var Go=1e-12;function Ko(t){return((t=Math.exp(t))+1/t)/2}function Jo(t){return((t=Math.exp(t))-1/t)/2}function Zo(t){return((t=Math.exp(2*t))-1)/(t+1)}var Qo=function t(n,e,r){function i(t,i){var a,o,s=t[0],u=t[1],l=t[2],c=i[0],h=i[1],f=i[2],d=c-s,p=h-u,m=d*d+p*p;if(m<Go)o=Math.log(f/l)/n,a=function(t){return[s+t*d,u+t*p,l*Math.exp(n*t*o)]};else{var g=Math.sqrt(m),v=(f*f-l*l+r*m)/(2*l*e*g),y=(f*f-l*l-r*m)/(2*f*e*g),w=Math.log(Math.sqrt(v*v+1)-v),_=Math.log(Math.sqrt(y*y+1)-y);o=(_-w)/n,a=function(t){var r=t*o,i=Ko(w),a=l/(e*g)*(i*Zo(n*r+w)-Jo(w));return[s+a*d,u+a*p,l*i/Ko(n*r+w)]}}return a.duration=1e3*o*n/Math.SQRT2,a}return i.rho=function(n){var e=Math.max(.001,+n),r=e*e,i=r*r;return t(e,r,i)},i}(Math.SQRT2,2,4);const ts=Math.PI/180,ns=180/Math.PI,es=18,rs=.96422,is=1,as=.82521,os=4/29,ss=6/29,us=3*ss*ss,ls=ss*ss*ss;function cs(t){if(t instanceof fs)return new fs(t.l,t.a,t.b,t.opacity);if(t instanceof ws)return _s(t);t instanceof Ae||(t=Me(t));var n,e,r=gs(t.r),i=gs(t.g),a=gs(t.b),o=ds((.2225045*r+.7168786*i+.0606169*a)/is);return r===i&&i===a?n=e=o:(n=ds((.4360747*r+.3850649*i+.1430804*a)/rs),e=ds((.0139322*r+.0971045*i+.7141733*a)/as)),new fs(116*o-16,500*(n-o),200*(o-e),t.opacity)}function hs(t,n,e,r){return 1===arguments.length?cs(t):new fs(t,n,e,null==r?1:r)}function fs(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function ds(t){return t>ls?Math.pow(t,1/3):t/us+os}function ps(t){return t>ss?t*t*t:us*(t-os)}function ms(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function gs(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function vs(t){if(t instanceof ws)return new ws(t.h,t.c,t.l,t.opacity);if(t instanceof fs||(t=cs(t)),0===t.a&&0===t.b)return new ws(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*ns;return new ws(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function ys(t,n,e,r){return 1===arguments.length?vs(t):new ws(t,n,e,null==r?1:r)}function ws(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function _s(t){if(isNaN(t.h))return new fs(t.l,0,0,t.opacity);var n=t.h*ts;return new fs(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}function bs(t){return function(n,e){var r=t((n=ys(n)).h,(e=ys(e)).h),i=We(n.c,e.c),a=We(n.l,e.l),o=We(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=a(t),n.opacity=o(t),n+""}}}ne(fs,hs,ee(re,{brighter:function(t){return new fs(this.l+es*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new fs(this.l-es*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return n=rs*ps(n),t=is*ps(t),e=as*ps(e),new Ae(ms(3.1338561*n-1.6168667*t-.4906146*e),ms(-.9787684*n+1.9161415*t+.033454*e),ms(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),ne(ws,ys,ee(re,{brighter:function(t){return new ws(this.h,this.c,this.l+es*(null==t?1:t),this.opacity)},darker:function(t){return new ws(this.h,this.c,this.l-es*(null==t?1:t),this.opacity)},rgb:function(){return _s(this).rgb()}}));var xs=bs(De),Ms=(bs(We),function(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),a=new Array(i);while(++r<i)a[r]=t+r*e;return a});function ks(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}const As=Symbol("implicit");function Ns(){var t=new Map,n=[],e=[],r=As;function i(i){var a=i+"",o=t.get(a);if(!o){if(r!==As)return r;t.set(a,o=n.push(i))}return e[(o-1)%e.length]}return i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new Map;for(const r of e){const e=r+"";t.has(e)||t.set(e,n.push(r))}return i},i.range=function(t){return arguments.length?(e=Array.from(t),i):e.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Ns(n,e).unknown(r)},ks.apply(i,arguments),i}function Es(){var t,n,e=Ns().unknown(void 0),r=e.domain,i=e.range,a=0,o=1,s=!1,u=0,l=0,c=.5;function h(){var e=r().length,h=o<a,f=h?o:a,d=h?a:o;t=(d-f)/Math.max(1,e-u+2*l),s&&(t=Math.floor(t)),f+=(d-f-t*(e-u))*c,n=t*(1-u),s&&(f=Math.round(f),n=Math.round(n));var p=Ms(e).map((function(n){return f+t*n}));return i(h?p.reverse():p)}return delete e.unknown,e.domain=function(t){return arguments.length?(r(t),h()):r()},e.range=function(t){return arguments.length?([a,o]=t,a=+a,o=+o,h()):[a,o]},e.rangeRound=function(t){return[a,o]=t,a=+a,o=+o,s=!0,h()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(s=!!t,h()):s},e.padding=function(t){return arguments.length?(u=Math.min(1,l=+t),h()):u},e.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),h()):u},e.paddingOuter=function(t){return arguments.length?(l=+t,h()):l},e.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),h()):c},e.copy=function(){return Es(r(),[a,o]).round(s).paddingInner(u).paddingOuter(l).align(c)},ks.apply(h(),arguments)}var Ss=Math.sqrt(50),Cs=Math.sqrt(10),Ts=Math.sqrt(2),js=function(t,n,e){var r,i,a,o,s=-1;if(n=+n,t=+t,e=+e,t===n&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(o=$s(t,n,e))||!isFinite(o))return[];if(o>0){let e=Math.round(t/o),r=Math.round(n/o);e*o<t&&++e,r*o>n&&--r,a=new Array(i=r-e+1);while(++s<i)a[s]=(e+s)*o}else{o=-o;let e=Math.round(t*o),r=Math.round(n*o);e/o<t&&++e,r/o>n&&--r,a=new Array(i=r-e+1);while(++s<i)a[s]=(e+s)/o}return r&&a.reverse(),a};function $s(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Ss?10:a>=Cs?5:a>=Ts?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Ss?10:a>=Cs?5:a>=Ts?2:1)}function Os(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Ss?i*=10:a>=Cs?i*=5:a>=Ts&&(i*=2),n<t?-i:i}var Bs=function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN},zs=function(t){let n=t,e=t;function r(t,n,r,i){null==r&&(r=0),null==i&&(i=t.length);while(r<i){const a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r}function i(t,n,r,i){null==r&&(r=0),null==i&&(i=t.length);while(r<i){const a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}function a(t,e,i,a){null==i&&(i=0),null==a&&(a=t.length);const o=r(t,e,i,a-1);return o>i&&n(t[o-1],e)>-n(t[o],e)?o-1:o}return 1===t.length&&(n=(n,e)=>t(n)-e,e=Fs(t)),{left:r,center:a,right:i}};function Fs(t){return(n,e)=>Bs(t(n),e)}var Ps=function(t){return null===t?NaN:+t};const Rs=zs(Bs),Hs=Rs.right;Rs.left,zs(Ps).center;var Ds=Hs,Is=function(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}};function Ws(t){return function(){return t}}function Ls(t){return+t}var qs=[0,1];function Vs(t){return t}function Us(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:Ws(isNaN(n)?NaN:.5)}function Ys(t,n){var e;return t>n&&(e=t,t=n,n=e),function(e){return Math.max(t,Math.min(n,e))}}function Xs(t,n,e){var r=t[0],i=t[1],a=n[0],o=n[1];return i<r?(r=Us(i,r),a=e(o,a)):(r=Us(r,i),a=e(a,o)),function(t){return a(r(t))}}function Gs(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),a=new Array(r),o=-1;t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());while(++o<r)i[o]=Us(t[o],t[o+1]),a[o]=e(n[o],n[o+1]);return function(n){var e=Ds(t,n,1,r)-1;return a[e](i[e](n))}}function Ks(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Js(){var t,n,e,r,i,a,o=qs,s=qs,u=ir,l=Vs;function c(){var t=Math.min(o.length,s.length);return l!==Vs&&(l=Ys(o[0],o[t-1])),r=t>2?Gs:Xs,i=a=null,h}function h(n){return null==n||isNaN(n=+n)?e:(i||(i=r(o.map(t),s,u)))(t(l(n)))}return h.invert=function(e){return l(n((a||(a=r(s,o.map(t),Ge)))(e)))},h.domain=function(t){return arguments.length?(o=Array.from(t,Ls),c()):o.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),u=Is,c()},h.clamp=function(t){return arguments.length?(l=!!t||Vs,c()):l!==Vs},h.interpolate=function(t){return arguments.length?(u=t,c()):u},h.unknown=function(t){return arguments.length?(e=t,h):e},function(e,r){return t=e,n=r,c()}}function Zs(){return Js()(Vs,Vs)}var Qs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tu(t){if(!(n=Qs.exec(t)))throw new Error("invalid format: "+t);var n;return new nu({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function nu(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}tu.prototype=nu.prototype,nu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var eu=function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)};function ru(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}var iu,au,ou,su,uu=function(t){return t=ru(Math.abs(t)),t?t[1]:NaN},lu=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(uu(n)/3)))-uu(Math.abs(t)))},cu=function(t,n){return function(e,r){var i=e.length,a=[],o=0,s=t[0],u=0;while(i>0&&s>0){if(u+s+1>r&&(s=Math.max(1,r-u)),a.push(e.substring(i-=s,i+s)),(u+=s+1)>r)break;s=t[o=(o+1)%t.length]}return a.reverse().join(n)}},hu=function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}},fu=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(n+1):t},du=function(t,n){var e=ru(t,n);if(!e)return t+"";var r=e[0],i=e[1],a=i-(iu=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ru(t,Math.max(0,n+a-1))[0]},pu=function(t,n){var e=ru(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},mu={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:eu,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>pu(100*t,n),r:pu,s:du,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},gu=function(t){return t},vu=Array.prototype.map,yu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],wu=function(t){var n=void 0===t.grouping||void 0===t.thousands?gu:cu(vu.call(t.grouping,Number),t.thousands+""),e=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?gu:hu(vu.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function l(t){t=tu(t);var l=t.fill,c=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,m=t.comma,g=t.precision,v=t.trim,y=t.type;"n"===y?(m=!0,y="g"):mu[y]||(void 0===g&&(g=12),v=!0,y="g"),(d||"0"===l&&"="===c)&&(d=!0,l="0",c="=");var w="$"===f?e:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===f?r:/[%p]/.test(y)?o:"",b=mu[y],x=/[defgprs%]/.test(y);function M(t){var e,r,o,f=w,M=_;if("c"===y)M=b(t)+M,t="";else{t=+t;var k=t<0||1/t<0;if(t=isNaN(t)?u:b(Math.abs(t),g),v&&(t=fu(t)),k&&0===+t&&"+"!==h&&(k=!1),f=(k?"("===h?h:s:"-"===h||"("===h?"":h)+f,M=("s"===y?yu[8+iu/3]:"")+M+(k&&"("===h?")":""),x){e=-1,r=t.length;while(++e<r)if(o=t.charCodeAt(e),48>o||o>57){M=(46===o?i+t.slice(e+1):t.slice(e))+M,t=t.slice(0,e);break}}}m&&!d&&(t=n(t,1/0));var A=f.length+t.length+M.length,N=A<p?new Array(p-A+1).join(l):"";switch(m&&d&&(t=n(N+t,N.length?p-M.length:1/0),N=""),c){case"<":t=f+t+M+N;break;case"=":t=f+N+t+M;break;case"^":t=N.slice(0,A=N.length>>1)+f+t+M+N.slice(A);break;default:t=N+f+t+M;break}return a(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),M.toString=function(){return t+""},M}function c(t,n){var e=l((t=tu(t),t.type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(uu(n)/3))),i=Math.pow(10,-r),a=yu[8+r/3];return function(t){return e(i*t)+a}}return{format:l,formatPrefix:c}};function _u(t){return au=wu(t),ou=au.format,su=au.formatPrefix,au}_u({thousands:",",grouping:[3],currency:["$",""]});var bu=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,uu(n)-uu(t))+1},xu=function(t){return Math.max(0,-uu(Math.abs(t)))};function Mu(t,n,e,r){var i,a=Os(t,n,e);switch(r=tu(null==r?",f":r),r.type){case"s":var o=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(i=lu(a,o))||(r.precision=i),su(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=bu(a,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=xu(a))||(r.precision=i-2*("%"===r.type));break}return ou(r)}function ku(t){var n=t.domain;return t.ticks=function(t){var e=n();return js(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return Mu(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i,a=n(),o=0,s=a.length-1,u=a[o],l=a[s],c=10;l<u&&(i=u,u=l,l=i,i=o,o=s,s=i);while(c-- >0){if(i=$s(u,l,e),i===r)return a[o]=u,a[s]=l,n(a);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return t},t}function Au(){var t=Zs();return t.copy=function(){return Ks(t,Au())},ks.apply(t,arguments),ku(t)}function Nu(t,n,e){this.k=t,this.x=n,this.y=e}Nu.prototype={constructor:Nu,scale:function(t){return 1===t?this:new Nu(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new Nu(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Eu=new Nu(1,0,0);function Su(t){while(!t.__zoom)if(!(t=t.parentNode))return Eu;return t.__zoom}Su.prototype=Nu.prototype;var Cu=e("56d7"),Tu={name:"BarGraph",props:["clusters"],data(){return{margin:null,margin2:null,width:null,width2:null,height:null,x:null,y:null,x2:null,y2:null,svg:null,xAxis:null,yAxis:null,xScale:null,yScale:null,brush:null,brushArea:null,content:null,focus:null,xText:""}},created:function(){Cu["eventBus"].$on("select-ranking",this.reorder)},beforeDestroy:function(){Cu["eventBus"].$off("select-ranking",this.reorder)},mounted(){this.margin={top:20,right:10,bottom:50,left:120},this.margin2={top:20,right:5,bottom:50,left:50},this.width2=75,this.width=this.$refs.chart1.clientWidth-this.margin2.left-this.width2-this.margin2.right,this.height=this.$refs.chart1.clientHeight,this.x=Au().range([this.margin.left,this.width-this.margin.right]).nice(),this.y=Es().range([this.height-this.margin.bottom,this.margin.top]).padding(.1),this.x2=Au().range([this.margin2.left,this.width2-this.margin2.right]).nice(),this.y2=Es().range([this.height-this.margin.bottom,this.margin.top]).padding(.1),this.svg=Jn("#chart-1").append("svg").attr("width",this.width).attr("height",this.height),this.content=this.svg.append("g").attr("transform","translate(0,0)"),this.focus=this.svg.append("g").attr("transform","translate("+this.width2+",0)");const t=this;function n(n){const e=n.selection;if(e){const n=[];t.y2.domain().forEach(r=>{var i=t.y2(r)+t.y2.bandwidth()/2;i>e[0]&&i<e[1]&&n.push(r)}),t.y.domain(n),t.svg.selectAll(".bar").attr("y",n=>t.y(n.cluster_name)).attr("height",t.y.bandwidth()),t.yAxis.call(t.yScale,t.y)}}function e({selection:n}){n||t.brushArea.call(t.brush).call(t.brush.move,[t.margin.top,t.height-t.margin.bottom])}this.brush=Oa().extent([[this.margin2.left-this.margin2.right,this.margin.top],[this.width2,this.height-this.margin.bottom]]).on("brush",n).on("end",e),this.brushArea=this.content.append("g").attr("class","brush"),this.xScale=function(n){n.attr("transform",`translate(0, ${t.height-t.margin.bottom})`).call(W(t.x)).call(t=>t.select(".domain").remove())},this.xAxis=this.focus.append("g").attr("class","x-axis").call(this.xScale),this.xText=this.focus.append("text").attr("x",t.width/2).attr("y",t.height-5).attr("text-anchor","middle").attr("font-family","Helvetica Neue, Arial").attr("font-weight",700).attr("font-size",20).attr("fill","White").text(""),this.yScale=function(n,e){n.attr("transform",`translate(${t.margin.left}, 0)`).call(L(e).ticks(t.width/80).tickSizeOuter(0))},this.yAxis=this.focus.append("g").attr("class","y-axis").call(this.yScale,this.y),this.content.append("text").attr("class","y-label").attr("transform","rotate(-90)").attr("x",-(this.height-this.margin.bottom)/2-50).attr("y",15).attr("text-anchor","middle").attr("font-family","Helvetica Neue, Arial").attr("font-weight",700).attr("font-size",20).attr("fill","White").text("cluster name"),this.reorder("community_size")},computed:{chartHeight(){return this.$refs.chart1.clientHeight},chartWidth(){return this.$refs.chart1.clientWidth}},methods:{updateBars(t){this.x.domain([0,S(t,t=>t.value)]),this.xAxis.transition().duration(1e3).call(W(this.x)),this.y.domain(t.map(t=>t.cluster_name)),this.yAxis.transition().duration(1e3).call(L(this.y)),this.x2.domain([0,S(t,t=>t.value)]),this.y2.domain(t.map(t=>t.cluster_name));const n=this.focus.selectAll(".bar").data(t),e=this;n.enter().append("rect").attr("class","bar").attr("id",t=>t.cluster_name).attr("x",e.margin.left).attr("y",t=>e.y(t.cluster_name)).attr("width",t=>e.x(t.value)).attr("height",e.y.bandwidth()).attr("fill","#1da1f2"),n.transition().duration(250).attr("x",e.margin.left).attr("y",t=>e.y(t.cluster_name)).attr("width",t=>e.x(t.value)).attr("height",e.y.bandwidth()).attr("fill","#1da1f2"),n.exit().remove();const r=this.content.selectAll(".bar2").data(t);r.enter().append("rect").attr("class","bar2").attr("x",e.margin2.left).attr("y",t=>e.y(t.cluster_name)).attr("width",t=>e.x2(t.value)-e.margin2.left).attr("height",e.y.bandwidth()).attr("fill","#1da1f2"),r.transition().duration(250).attr("x",e.margin2.left).attr("y",t=>e.y(t.cluster_name)).attr("width",t=>e.x2(t.value)-e.margin2.left).attr("height",e.y.bandwidth()).attr("fill","#1da1f2"),r.exit().remove(),this.brushArea.call(e.brush).call(e.brush.move,[this.margin.top,this.height-this.margin.bottom])},reorder(t){to("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(n=>{this.xText.text(t),n.forEach(n=>n.value=parseFloat(n[t])),n.sort((t,n)=>t.value-n.value),n.forEach((t,n)=>t.Rank=n+1),t=[],this.updateBars(n)})}}},ju=Tu,$u=(e("afbe"),Object(l["a"])(ju,N,E,!1,null,"07991b1b",null)),Ou=$u.exports,Bu=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("b-form-group",{attrs:{label:"Sort the communities by:"}},[e("b-form-radio-group",{staticClass:"button-radio",attrs:{id:"btn-radios-3",options:t.options,name:"radio-btn-stacked",buttons:"",stacked:"","button-variant":"outline-secondary"},on:{change:function(n){return t.selectRanking(t.selected)}},model:{value:t.selected,callback:function(n){t.selected=n},expression:"selected"}})],1),e("h4",[t._v(" Zoom in/out and move 👉 ")])],1)},zu=[],Fu={name:"Ranking",data(){return{selected:"community_size",options:[{text:"community size",value:"community_size"},{text:"average friends count",value:"friends_count_mean"},{text:"average follower count",value:"follower_count_mean"},{text:"average tweet count",value:"tweet_count_mean"},{text:"lexical change",value:"lexical_change"},{text:"ideology lexical change",value:"ideology_lexical_change"},{text:"male ratio",value:"male_ratio"}]}},created:function(){Cu["eventBus"].$on("select-ranking",this.changeButton)},beforeDestroy:function(){Cu["eventBus"].$off("select-ranking",this.changeButton)},methods:{selectRanking:function(){Cu["eventBus"].$emit("select-ranking",this.selected)},changeButton:function(t){this.selected=t}}},Pu=Fu,Ru=(e("9746"),Object(l["a"])(Pu,Bu,zu,!1,null,"2b08d38f",null)),Hu=Ru.exports,Du={name:"BarChart",components:{BarGraph:Ou,Ranking:Hu},data(){return{}},created:function(){},beforeDestroy:function(){},mounted(){},methods:{}},Iu=Du,Wu=(e("38cc"),Object(l["a"])(Iu,k,A,!1,null,"2f71e376",null)),Lu=Wu.exports,qu=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"page"},[t._m(0),e("div",{staticClass:"content"},[e("div",{staticClass:"left"},[e("Factors"),e("transition",{attrs:{name:"fade"}},[t.showingHint?e("div",[e("h4",[t._v(" Hover on a dot to see the topic words of the community 👉 ")])]):e("TooltipThree",{attrs:{clusterName:t.clusterName,topicWords:t.topicWords}})],1)],1),e("div",{ref:"right",staticClass:"right"},[e("ScatterGraph")],1)]),e("span",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v("╲╱")])])},Vu=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"title"},[e("h2",[t._v(" Investigate how language variation relates to social factors ")])])}],Uu=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{ref:"chart3",attrs:{id:"chart-3"}},[e("div",{ref:"svg-container-3",attrs:{id:"svg-container-3"}})])},Yu=[],Xu={name:"ScatterGraph",props:["clusters"],data(){return{margin:null,width:null,height:null,x:null,y:null,color:null,svg:null,xAxis:null,yAxis:null,xScale:null,yScale:null,xText:"",yText:"",storedData:null,r:null}},created:function(){Cu["eventBus"].$on("select-factors",this.updateScatterPlot)},beforeDestroy:function(){Cu["eventBus"].$off("select-factors",this.updateScatterPlot)},mounted(){this.margin={top:20,right:20,bottom:50,left:70},this.width=this.$refs.chart3.clientWidth,this.height=this.$refs.chart3.clientHeight,this.r=Au().range([2,20]),this.x=Au().range([this.margin.left,this.width-this.margin.right]),this.y=Au().range([this.height-this.margin.bottom,this.margin.top]),this.svg=Jn("#chart-3").append("svg").attr("width",this.width).attr("height",this.height);const t=["atlanta","society","entertainment","sports"],n=["#FFBF00","#FF7F50","#6495ED","#808000"];this.color=Ns().domain(t).range(n);const e=this;this.xAxis=this.svg.append("g").attr("class","x-axis").attr("transform",`translate(0, ${e.height-e.margin.bottom})`).call(W(e.x)),this.xText=this.xAxis.append("text").attr("text-anchor","middle").attr("font-family","Helvetica Neue, Arial").attr("x",(this.width-this.margin.right)/2).attr("y",40).attr("font-weight",700).attr("font-size",20).attr("fill","black").text(""),this.yAxis=this.svg.append("g").attr("class","y-axis").attr("transform",`translate(${e.margin.left}, 0)`).call(L(e.y)),this.yText=this.yAxis.append("text").attr("transform","rotate(-90)").attr("text-anchor","middle").attr("x",-(this.height-this.margin.bottom)/2-50).attr("y",-40).attr("font-family","Helvetica Neue, Arial").attr("font-weight",700).attr("font-size",20).attr("fill","black").text(""),to("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(t=>{this.storedData=t,console.log(this.storedData),this.updateScatterPlot("community_size","lexical_change","all")})},methods:{updateScatterPlot(t,n,e){console.log(t,n,e);const r=this,i="all"!=e?r.storedData.filter(t=>t.category==e):r.storedData;console.log(r.storedData),console.log(i),this.x.domain([0,S(i,n=>parseFloat(n[t]))]),this.xAxis.transition().duration(1e3).call(W(this.x)),this.xText.text(t),this.y.domain([0,S(i,t=>parseFloat(t[n]))]),this.yAxis.transition().duration(1e3).call(L(this.y)),this.yText.text(n);const a=this.svg.selectAll(".dot").data(i.filter((function(t,n){return n<1500})));console.log("Here"),this.r.domain([0,S(i,t=>parseFloat(t["community_size"]))]),a.enter().append("circle").attr("class","dot").attr("r",5).style("fill","#e25609").style("opacity",0).style("stroke","white").attr("cx",r.margin.left).attr("cy",r.height-r.margin.bottom).on("mouseover",(function(t,n){console.log("over"),console.log(t);const e=n.cluster_name,r=n.topic_words;Cu["eventBus"].$emit("show-tooltip-3",e,r)})).on("mouseout",(function(){console.log("out"),Cu["eventBus"].$emit("hide-tooltip-3")})).transition().delay((function(t,n){return 3*n})).duration(2e3).attr("cx",(function(n){return r.x(n[t])})).attr("cy",(function(t){return r.y(t[n])})).attr("r",(function(t){return r.r(t["community_size"])})).style("fill",(function(t){return r.color(t["category"])})).attr("stroke",(function(t){return r.color(t["category"])})).style("opacity",.8),console.log("Here"),a.transition().delay((function(t,n){return 3*n})).duration(2e3).attr("cx",(function(n){return r.x(n[t])})).attr("cy",(function(t){return r.y(t[n])})).attr("r",(function(t){return r.r(t["community_size"])})).style("fill",(function(t){return r.color(t["category"])})).attr("stroke",(function(t){return r.color(t["category"])})),console.log("Here"),a.exit().transition().delay((function(t,n){return 3*n})).duration(2e3).attr("cx",r.margin.left).attr("cy",r.height-r.margin.bottom).style("opacity",0).remove(),console.log("Here")}}},Gu=Xu,Ku=(e("381f"),Object(l["a"])(Gu,Uu,Yu,!1,null,"31e0cbf9",null)),Ju=Ku.exports,Zu=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("b-form-group",{attrs:{id:"input-group-1",label:"Choose two factors:","label-for":"m-2"}},[e("b-form-select",{attrs:{options:t.factors},on:{change:t.selectFactors},model:{value:t.factor1,callback:function(n){t.factor1=n},expression:"factor1"}}),e("b-form-select",{attrs:{options:t.factors},on:{change:t.selectFactors},model:{value:t.factor2,callback:function(n){t.factor2=n},expression:"factor2"}})],1),e("b-form-group",{attrs:{id:"input-group-3",label:"Choose a category:","label-for":"m-2"}},[e("b-form-select",{attrs:{options:t.categories},on:{change:t.selectFactors},model:{value:t.category,callback:function(n){t.category=n},expression:"category"}})],1)],1)},Qu=[],tl={name:"Ranking",data(){return{factor1:"community_size",factor2:"lexical_change",category:"all",categories:["all","atlanta","society","entertainment","sports"],factors:["community_size","lexical_change","ideology_lexical_change","male_ratio","friends_count_mean","friends_count_median","follower_count_mean","follower_count_median","tweet_count_mean","tweet_count_median","tweet_count_rank"]}},methods:{selectFactors:function(){Cu["eventBus"].$emit("select-factors",this.factor1,this.factor2,this.category)}}},nl=tl,el=(e("25cc"),Object(l["a"])(nl,Zu,Qu,!1,null,"7ec2b6fd",null)),rl=el.exports,il=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"tooltip-3"}},[e("vue-word-cloud",{attrs:{id:"wordcloud",rotation:t.rotate,spacing:t.spacing,words:t.topicWords,color:"black","font-family":"Roboto"}})],1)},al=[],ol=e("2d8a"),sl=e.n(ol),ul={name:"TooltipThree",props:["clusterName","topicWords"],components:{[sl.a.name]:sl.a},data(){return{words:[{text:"Vue",value:1e3},{text:"js",value:200},{text:"is",value:800},{text:"very cool",value:1e6},{text:"lunch",value:100}],margin:{top:0,right:0,bottom:0,left:0},rotate:null,spacing:1/4}},mounted(){this.rotate=function(){const t=[0,1/8,3/4,7/8],n=Math.floor(Math.random()*t.length);return t[n]}}},ll=ul,cl=(e("c0b8"),Object(l["a"])(ll,il,al,!1,null,"6f4fd53e",null)),hl=cl.exports,fl={name:"BarChart",components:{ScatterGraph:Ju,Factors:rl,TooltipThree:hl},data(){return{clusterName:"",topicWords:[],showingHint:!0}},created:function(){Cu["eventBus"].$on("show-tooltip-3",this.showTooltip),Cu["eventBus"].$on("hide-tooltip-3",this.hideTooltip)},beforeDestroy:function(){Cu["eventBus"].$off("show-tooltip-3",this.showTooltip),Cu["eventBus"].$off("hide-tooltip-3",this.hideTooltip)},methods:{showTooltip(t,n){console.log("show"),this.clusterName=t,this.topicWords=n.split(",").map(t=>({text:t,value:1})),this.showingHint=!1},hideTooltip(){this.showingHint=!0,console.log("hide")}}},dl=fl,pl=(e("5c9d"),Object(l["a"])(dl,qu,Vu,!1,null,"45decc30",null)),ml=pl.exports,gl=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"thanks"}},[e("div",{attrs:{id:"thanks-title"}},[e("h1",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v(" "+t._s(t.title1)+" ")])]),e("div",{attrs:{id:"thanks-content"}},[e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],staticClass:"thanks-text-block"},[e("b-link",{attrs:{href:"/final-project-atlanta-community/#/"}},[t._v("back to our project page")]),e("b-link",{attrs:{href:"https://github.com/6859-sp21/final-project-atlanta-community"}},[t._v("go to our github page")])],1),e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],attrs:{id:"thanks-image-block"}},[e("b-button",{staticClass:"button-share",attrs:{"label-for":"input-1",variant:"link"}},[e("ShareNetwork",{attrs:{network:"twitter",url:"https://6859-sp21.github.io/final-project-atlanta-community/",title:"A visualization on tweets in Atlanta"}},[e("b-icon",{attrs:{icon:"twitter","font-scale":"3"}}),e("span",{staticStyle:{margin:"0.5em"}},[t._v("Share on twitter")])],1)],1),e("b-img")],1)])])},vl=[],yl={name:"Thanks",data(){return{title1:"Thanks for exploring"}}},wl=yl,_l=(e("6e8f"),Object(l["a"])(wl,gl,vl,!1,null,"70d14a18",null)),bl=_l.exports,xl=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"page"},[t._m(0),e("div",{staticClass:"content"},[e("div",{staticClass:"left"},[e("Ranking"),e("transition",{attrs:{name:"move"}},[t.showingTwitters?e("Twitters",{attrs:{followingList:t.followingList}}):t._e()],1),e("transition",{attrs:{name:"move"}},[t.showingHint2?e("div",{attrs:{id:"hint-2"}},[e("h4",[t._v(" Check a community to see the top follows 👉 ")])]):t._e()])],1),e("div",{ref:"right",staticClass:"right"},[e("CircleGraph")],1)]),e("span",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v("╲╱")])])},Ml=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"title"},[e("h2",[t._v(" Community Grouping ")])])}],kl=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{ref:"chart2",attrs:{id:"chart-2"}},[e("b-breadcrumb",{attrs:{items:t.items}}),e("div",{attrs:{id:"svg-container-2"}})],1)},Al=[],Nl={name:"CircleGraph",data(){return{width:null,height:null,color:null,svg:null,root:null,focus:null,view:null,label:null,storedData:null,node:null,parents:null,followings:null,items:[{text:"All"}]}},created:function(){Cu["eventBus"].$on("select-ranking",this.update)},beforeDestroy:function(){Cu["eventBus"].$off("select-ranking",this.update)},mounted(){this.width=this.$refs.chart2.clientWidth,this.height=this.$refs.chart2.clientHeight,this.width=Math.min(this.width,this.height),this.height=this.width,this.color=Au().domain([0,5]).range(["rgb(6,103,162)","#7bbbe3"]).interpolate(xs);const t=this;this.svg=Jn("#chart-2").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox",`-${t.width/2} -${t.height/2} ${t.width} ${t.height}`).style("cursor","pointer").on("click",n=>t.zoom(n,t.root)),this.node=this.svg.append("g"),this.label=this.svg.append("g").style("font","10px sans-serif").attr("pointer-events","none").attr("text-anchor","middle"),to("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(n=>{const e=new Map,r=new Map;this.parents=new Map,this.followings=new Map,n.forEach(t=>{const n=[];if(t.top_follows.split(",").forEach(e=>{n.push({name:e,community_size:parseFloat(t.community_size)/25,lexical_change:parseFloat(t.lexical_change)/25,ideology_lexical_change:parseFloat(t.ideology_lexical_change)/25,male_ratio:parseFloat(t.male_ratio)/25,friends_count_mean:parseFloat(t.friends_count_mean)/25,follower_count_mean:parseFloat(t.follower_count_mean)/25,tweet_count_mean:parseFloat(t.tweet_count_mean)/25})}),e.get(t.cluster_group)?e.get(t.cluster_group).push({name:t.cluster_name,children:n}):e.set(t.cluster_group,[{name:t.cluster_name,children:n}]),r.get(t.category))r.get(t.category).add(t.cluster_group);else{const n=new Set;n.add(t.cluster_group),r.set(t.category,n)}this.parents.set(t.cluster_name,t.cluster_group),this.parents.set(t.cluster_group,t.category),this.parents.set(t.category,"All"),this.followings.set(t.cluster_name,t.top_follows.split(","))}),this.parents.set("All",null);const i=[];r.forEach((t,n)=>{const r=[];t.forEach(t=>{r.push({name:t,children:e.get(t)})}),i.push({name:n,children:r})}),this.storedData={name:"All",children:i},this.root=vo(this.storedData).sum(t=>t["community_size"]).sort((t,n)=>n.value-t.value),this.node=this.svg.append("g").selectAll("circle").data(t.root.descendants().slice(1)).join("circle").attr("fill",n=>n.children?t.color(n.depth):"none").attr("pointer-events",t=>t.children?null:"none").on("mouseover",(function(){Jn(this).attr("stroke","#ffffff")})).on("mouseout",(function(){Jn(this).attr("stroke",null)})).on("click",(n,e)=>{t.focus!==e&&(t.zoom(n,e),n.stopPropagation())}),this.label=this.svg.append("g").style("font","15px sans-serif").attr("text-anchor","middle").selectAll("text").data(t.root.descendants()).join("text").style("fill-opacity",n=>n.parent===t.root?1:0).style("display",n=>n.parent===t.root?"inline":"none").text(t=>t.children?t.data.name:"@"+t.data.name).attr("pointer-events",t=>t.children?"none":null).on("click",(t,n)=>{console.log(n.data.name),window.open("https://twitter.com/"+n.data.name)}),this.update("community_size")})},methods:{pack(t){const n=Vo().size([this.width,this.height]).padding(3);return n(this.root.sum(n=>n[t]).sort((t,n)=>n.value-t.value))},update(t){this.root=this.pack(t),this.focus=this.root;const n=this;this.node.selectAll("circle").transition().duration(300).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).attr("r",(function(t){return t.r})),this.zoomTo([n.root.x,n.root.y,2*n.root.r])},zoomTo(t){const n=this.width/t[2];this.view=t,this.label.attr("transform",e=>`translate(${(e.x-t[0])*n},${(e.y-t[1])*n})`),this.node.attr("transform",e=>`translate(${(e.x-t[0])*n},${(e.y-t[1])*n})`),this.node.attr("r",t=>t.r*n)},zoom(t,n){this.focus=n,console.log("------------------"),console.log("zooming"),console.log(n.data.name);const e=this,r=this.svg.transition().duration(t.altKey?7500:750).tween("zoom",t=>{console.log("zooming"),console.log(t);const n=Qo(e.view,[e.focus.x,e.focus.y,2*e.focus.r]);return t=>e.zoomTo(n(t))});this.label.filter((function(t){return t.parent===e.focus||"inline"===this.style.display})).transition(r).style("fill-opacity",t=>t.parent===e.focus?1:0).on("start",(function(t){t.parent===e.focus&&(this.style.display="inline")})).on("end",(function(t){t.parent!==e.focus&&(this.style.display="none")})),this.findAncestors(n.data.name)},findAncestors(t){const n=[];while(t)n.unshift({text:t}),t=this.parents.get(t);this.items=n}}},El=Nl,Sl=(e("97df"),Object(l["a"])(El,kl,Al,!1,null,"9ae183ee",null)),Cl=Sl.exports,Tl=function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.followingList.length>0?e("div",{attrs:{id:"following-list"}},[e("h5",[t._v(" Top Follows of Selected Community ")]),e("div",{attrs:{id:"follows"}},t._l(t.followingList,(function(t){return e("TwitterPreview",{key:t,attrs:{following:t}})})),1)]):t._e()},jl=[],$l=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("b-link",{attrs:{href:"https://twitter.com/"+t.following}},[t._v(" @"+t._s(t.following)+" ")])],1)},Ol=[],Bl={name:"TwitterPreview",props:["following"]},zl=Bl,Fl=Object(l["a"])(zl,$l,Ol,!1,null,null,null),Pl=Fl.exports,Rl={name:"Twitters",components:{TwitterPreview:Pl},props:["followingList"]},Hl=Rl,Dl=(e("4b5e"),Object(l["a"])(Hl,Tl,jl,!1,null,"558772b0",null)),Il=Dl.exports,Wl={name:"CirclePacking",components:{CircleGraph:Cl,Ranking:Hu,Twitters:Il},data(){return{title:"Exploring patterns of language variation on social media",clusters:[],options:[],followingList:[],category:"",showingCheckbox:!1,showingTwitters:!1,showingHint2:!1}},created:function(){Cu["eventBus"].$on("show-checkbox",this.showCheckbox),Cu["eventBus"].$on("select-community",this.showTwitters)},beforeDestroy:function(){Cu["eventBus"].$off("show-checkbox",this.showCheckbox),Cu["eventBus"].$off("select-community",this.showTwitters)},mounted(){to("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(t=>{const n=this;t.forEach((function(t){n.clusters.push({text:t.cluster_name,value:t.cluster_name,category:t.category})}))})},methods:{showCheckbox(t){this.options=t.options,this.category=t.category,this.showingCheckbox=!0,this.showingHint2=!0,this.followingList=[]},showTwitters(t){to("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(n=>{const e=n.find(n=>n.cluster_name==t);this.followingList=e.top_follows.split(",")}),console.log(this.followingList),this.showingTwitters=!0,this.showingHint2=!1}}},Ll=Wl,ql=(e("5d6f"),Object(l["a"])(Ll,xl,Ml,!1,null,"f9b4ea3a",null)),Vl=ql.exports,Ul={components:{Cover:h,Intro:v,Tutorial:M,BarChart:Lu,ScatterChart:ml,Thanks:bl,CirclePacking:Vl},name:"Viz",data(){return{text:"Welcome to Novid"}}},Yl=Ul,Xl=(e("e6b9"),Object(l["a"])(Yl,r,i,!1,null,"066913da",null));n["default"]=Xl.exports},"6aca":function(t,n,e){},"6ae0":function(t,n,e){},"6e8f":function(t,n,e){"use strict";e("c67f")},9746:function(t,n,e){"use strict";e("6ae0")},"97df":function(t,n,e){"use strict";e("2ba6")},"9c89":function(t,n,e){},a93e:function(t,n,e){"use strict";e("04d2")},ab6d:function(t,n,e){},afbe:function(t,n,e){"use strict";e("9c89")},baba:function(t,n,e){},c0b8:function(t,n,e){"use strict";e("56d5")},c67f:function(t,n,e){},d5ee:function(t,n,e){},d706:function(t,n,e){},e6b9:function(t,n,e){"use strict";e("baba")},f31c:function(t,n,e){}}]);
//# sourceMappingURL=chunk-58613fcd.c907ecb5.js.map