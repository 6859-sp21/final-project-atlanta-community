(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d2c7fe0"],{"021a":function(t,n,e){},1374:function(t,n,e){},1859:function(t,n,e){"use strict";e("9f52")},"1f77":function(t,n,e){},2125:function(t,n,e){"use strict";e("e6bb")},2539:function(t,n,e){},"2a46":function(t,n,e){"use strict";e("9298")},"2ca9":function(t,n,e){},"2d8a":function(t,n,e){!function(n,e){t.exports=e()}(0,(function(){"use strict";function t(t){return"function"==typeof t}function n(){}var e=function(t){this.previousValue=t,this.interrupted=!1,this.interruptHandlers=new Set};function r(t){return function(){return t}}function i(){return[]}e.prototype.throwIfInterrupted=function(){if(this.interrupted)throw new Error},e.prototype.interrupt=function(){this.interrupted||(this.interrupted=!0,this.interruptHandlers.forEach((function(t){try{t()}catch(t){}})))},e.prototype.onInterrupt=function(t){if(this.interrupted&&!this.interruptHandlers.has(t))try{t()}catch(t){}this.interruptHandlers.add(t)};var a={animationDuration:{type:Number,default:1e3},animationEasing:{type:String,default:"ease"},animationOverlap:{type:Number,default:1},color:{type:[String,Function],default:"Black"},createCanvas:{type:Function,default:function(){return document.createElement("canvas")}},createWorker:{type:Function,default:function(t){return new Worker(URL.createObjectURL(new Blob([t])))}},enterAnimation:{type:[Object,String],default:r({opacity:0})},fontFamily:{type:[String,Function],default:"serif"},fontSizeRatio:{type:Number,default:0},fontStyle:{type:[String,Function],default:"normal"},fontVariant:{type:[String,Function],default:"normal"},fontWeight:{type:[String,Function],default:"normal"},leaveAnimation:{type:[Object,String],default:r({opacity:0})},loadFont:{type:Function,default:function(t,n,e,r){return document.fonts.load([n,e,"1px",t].join(" "),r)}},rotation:{type:[Number,Function],default:0},rotationUnit:{type:[String,Function],default:"turn"},spacing:{type:Number,default:0},text:{type:[String,Function],default:""},weight:{type:[Number,Function],default:1},words:{type:Array,default:i}},o=r(null);function s(t){if(t){var n=typeof t;return"object"===n||"function"===n}return!1}function u(t){return"string"==typeof t}var l={animationOptions:function(){var t,n,e,r=this.animationDuration,i=this.enterAnimation,a=this.leaveAnimation;if(s(i)&&s(a)){var l=(t=Object.assign({},i,a),n=o,e={},Object.entries(t).forEach((function(r){var i=r[0],a=r[1];e[i]=n(a,i,t)})),e),c=function(t){Object.assign(t.style,i)},h=function(t,n){setTimeout((function(){Object.assign(t.style,l),setTimeout(n,r)}),1)};return{props:{css:!1},on:{beforeAppear:c,appear:h,beforeEnter:c,enter:h,leave:function(t,n){Object.assign(t.style,a),setTimeout(n,r)}}}}return u(i)&&u(a)?{props:{duration:r,appear:!0,appearActiveClass:i,enterActiveClass:i,leaveActiveClass:a}}:{}},normalizedAnimationOverlap:function(){var t=this.animationOverlap;return(t=Math.abs(t))<1&&(t=1/t),t},separateAnimationDelay:function(){var t=this.cloudWords;return t.length>1?(this.animationDuration-this.separateAnimationDuration)/(t.length-1):0},separateAnimationDuration:function(){var t=this.cloudWords;if(t.length>0){var n=this.animationDuration,e=this.normalizedAnimationOverlap;return n/Math.min(e,t.length)}return 0}},c=Array.isArray;function h(n){return t(n)?n:r(n)}var f=2*Math.PI,d=f/360;function p(t){return void 0===t}function m(t,n){return t.postMessage(n),function(t){return new Promise((function(n,e){var r,i=function(t){var e=t.data;r(),n(e)},a=function(t){var n=t.error;r(),e(n)};r=function(){t.removeEventListener("message",i),t.removeEventListener("error",a)},t.addEventListener("message",i),t.addEventListener("error",a)}))}(t)}function g(t,n,e){return Math.ceil(t*Math.abs(Math.sin(e))+n*Math.abs(Math.cos(e)))}function v(t,n,e){return Math.ceil(t*Math.abs(Math.cos(e))+n*Math.abs(Math.sin(e)))}function y(t,n,e,r,i){return[t,n,e,r+"px",i].join(" ")}function w(t,n){return Math.ceil(t/n)*n}function b(t,n,e){var r=e().getContext("2d");return r.font=n,r.measureText(t).width}var _=function(t,n,e,r,i,a,o){this.t=t,this.i=n,this.o=e,this.u=r,this.s=i,this.h=a,this.l=o,this.v=1,this.m=0,this.p=0,this.g=0},x={M:{configurable:!0},S:{configurable:!0},j:{configurable:!0},F:{configurable:!0},O:{configurable:!0},W:{configurable:!0},A:{configurable:!0},B:{configurable:!0},C:{configurable:!0},L:{configurable:!0},_:{configurable:!0},P:{configurable:!0},T:{configurable:!0},k:{configurable:!0},N:{configurable:!0},D:{configurable:!0},H:{configurable:!0},R:{configurable:!0},U:{configurable:!0}};x.M.get=function(){return this.v},x.M.set=function(t){this.v!==t&&(this.v=t,this.V=void 0)},x.S.get=function(){return y(this.h,this.s,this.u,this.M,this.o)},x.j.get=function(){return void 0===this.q&&(this.q=b(this.t,y(this.h,this.s,this.u,1,this.o),this.l)),this.q},x.F.get=function(){return this.j*this.M},x.O.get=function(){return this.p*this.M},x.O.set=function(t){this.p=t/this.M},x.W.get=function(){return this.g*this.M},x.W.set=function(t){this.g=t/this.M},x.A.get=function(){return v(this.F,this.M,this.i)},x.B.get=function(){return g(this.F,this.M,this.i)},x.C.get=function(){return this.O-this.A/2},x.L.get=function(){return this.W-this.B/2},x._.get=function(){return this.m},x._.set=function(t){this.m!==t&&(this.m=t,this.V=void 0)},x.P.get=function(){return void 0===this.V&&(this.V=function(t,n,e,r,i,a,o,s,u){var l=y(n,e,r,i*=4,a),c=o*i*2,h=c+b(t,l,u),f=c+i,d=u(),p=d.getContext("2d"),m=w(v(h,f,s),4),_=w(g(h,f,s),4);d.width=m,d.height=_,p.translate(m/2,_/2),p.rotate(s),p.font=l,p.textAlign="center",p.textBaseline="middle",p.fillText(t,0,0),c>0&&(p.miterLimit=1,p.lineWidth=c,p.strokeText(t,0,0));for(var x=p.getImageData(0,0,m,_).data,M=[],k=1/0,A=0,N=1/0,E=0,C=m/4,S=_/4,T=0;T<C;++T)for(var j=0;j<S;++j)t:for(var B=0;B<4;++B)for(var $=0;$<4;++$)if(x[4*(m*(4*j+$)+(4*T+B))+3]){M.push([T,j]),k=Math.min(T,k),A=Math.max(T+1,A),N=Math.min(j,N),E=Math.max(j+1,E);break t}return M.length>0?[M.map((function(t){var n=t[0],e=t[1];return[n-k,e-N]})),A-k,E-N,Math.ceil(C/2)-k,Math.ceil(S/2)-N]:[M,0,0,0,0]}(this.t,this.h,this.s,this.u,this.M,this.o,this._,this.i,this.l)),this.V},x.T.get=function(){return this.P[0]},x.k.get=function(){return this.P[1]},x.N.get=function(){return this.P[2]},x.D.get=function(){return this.P[3]},x.H.get=function(){return this.P[4]},x.R.get=function(){return Math.ceil(this.O)-this.D},x.R.set=function(t){this.O=t+this.D},x.U.get=function(){return Math.ceil(this.W)-this.H},x.U.set=function(t){this.W=t+this.H},Object.defineProperties(_.prototype,x);var M={cloudWords:function(t){this.$emit("update:cloudWords",t)},progress:{handler:function(t){this.$emit("update:progress",t)},deep:!0,immediate:!0}},k={updateElementSize:function(){var t=this.$el;t&&(this.elementWidth=t.offsetWidth,this.elementHeight=t.offsetHeight)}},A={name:"VueWordCloud",mixins:[function(r){return{data:function(){var t={};return Object.keys(r).forEach((function(n){t["asyncComputed_trigger_"+n]={}})),t},computed:{},beforeCreate:function(){var i=this,a=new Set;Object.entries(r).forEach((function(r){var o=r[0],s=r[1],u=s.get,l=s.default,c=s.errorHandler;void 0===c&&(c=n);var h,f=!0;i.$options.computed[o]=function(){return this["asyncComputed_trigger_"+o],this["asyncComputed_promise_"+o],l},i.$options.computed["asyncComputed_promise_"+o]=function(){var n=this;h&&(h.interrupt(),a.delete(h)),f&&(f=!1,t(l)&&(l=l.call(this)));var r=new e(l);h=r,a.add(h),new Promise((function(t){t(u.call(n,r))})).then((function(t){r.throwIfInterrupted(),l=t,n["asyncComputed_trigger_"+o]={}})).catch(c)}}))}}}({cloudWords:{get:function(t){var e,r=this,i=this,a=i.elementWidth,o=i.elementHeight,l=i.words,g=i.text,v=i.weight,y=i.rotation,w=i.rotationUnit,b=i.fontFamily,x=i.fontWeight,M=i.fontVariant,k=i.fontStyle,A=i.color,N=i.spacing,E=i.fontSizeRatio,C=i.createCanvas,S=i.loadFont,T=i.createWorker;e=E,E=(e=Math.abs(e))>1?1/e:e;var j=function(t){var n=t[0],e=t[1];return n>e?[1,e/n]:e>n?[n/e,1]:[1,1]}([a,o]);if(a>0&&o>0){var B=h(g),$=h(v),I=h(y),z=h(w),O=h(b),F=h(x),P=h(M),R=h(k),D=h(A);return l=l.map((function(t,n){var e,r,i,a,o,h,m,g,v,y,w;t&&(u(t)?i=t:c(t)?(i=(e=t)[0],a=e[1]):s(t)&&(i=(r=t).text,a=r.weight,o=r.rotation,h=r.rotationUnit,m=r.fontFamily,g=r.fontWeight,v=r.fontVariant,y=r.fontStyle,w=r.color)),p(i)&&(i=B(t,n,l)),p(a)&&(a=$(t,n,l)),p(o)&&(o=I(t,n,l)),p(h)&&(h=z(t,n,l)),p(m)&&(m=O(t,n,l)),p(g)&&(g=F(t,n,l)),p(v)&&(v=P(t,n,l)),p(y)&&(y=R(t,n,l)),p(w)&&(w=D(t,n,l));var b=new _(i,function(){switch(h){case"turn":return o*f;case"deg":return function(t){return t*d}(o)}return o}(),m,g,v,y,C);return Object.assign(b,{J:t,Y:a,G:w}),b})),Promise.resolve().then((function(){return Promise.all(l.map((function(t){var n=t.o,e=t.h,r=t.u,i=t.t;return S(n,e,r,i)})))})).catch(n).then((function(){if((l=l.filter((function(t){return t.F>0})).sort((function(t,n){return n.Y-t.Y}))).length>0){var n=l[0],e=function(t){return t[(n=t,n.length-1)];var n}(l),i=n.Y,s=e.Y;if(s<i){var u=E>0?1/E:s>0?i/s:i<0?s/i:1+i-s;l.forEach((function(t){var n,e,r;t.M=(n=t.Y,(r=1)+(n-(e=s))*(u-r)/(i-e))}))}l.reduceRight((function(t,n){return n.M<2*t?n.M/=t:(t=n.M,n.M=1),n.I=t}),1),l.forEach((function(t){t.M*=4}));var c=T('!function(){"use strict";var r=function(t){self.removeEventListener("message",r);var n,e,a,f,i,u=t.data,o=function(){n={},e=0,a=0,f=0,i=0};o();var s=function(){return Math.ceil((e+a)/2)},v=function(){return Math.ceil((f+i)/2)},c=function(){return{left:s(),top:v(),width:a-e,height:i-f}},l=function(r,t,u){r.forEach((function(r){var o=r[0],s=r[1],v=t+o,c=u+s;n[v+"|"+c]=!0,e=Math.min(v,e),a=Math.max(v+1,a),f=Math.min(c,f),i=Math.max(c+1,i)}))},h=function(r,t,e){return function(r,t,n){var e,a,f=r[0],i=r[1],u=t[0],o=t[1];f>i?(e=1,a=i/f):i>f?(a=1,e=f/i):e=a=1;var s=[u,o];if(n(s))return s;for(var v=u,c=o,l=u,h=o,M=v,d=c;;){u-=e,o-=a,v+=e,c+=a;var m=Math.floor(u),g=Math.floor(o),p=Math.ceil(v),E=Math.ceil(c);if(p>M)for(var L=g;L<E;++L){var x=[p,L];if(n(x))return x}if(E>d)for(var y=p;y>m;--y){var w=[y,E];if(n(w))return w}if(m<l)for(var B=E;B>g;--B){var F=[m,B];if(n(F))return F}if(g<h)for(var b=m;b<p;++b){var j=[b,g];if(n(j))return j}l=m,h=g,M=p,d=E}}(u,[t+s(),e+v()],(function(t){var e=t[0],a=t[1];return function(r,t,e){return r.every((function(r){var a=r[0],f=r[1];return!n[t+a+"|"+(e+f)]}))}(r,e,a)}))};self.postMessage({}),self.addEventListener("message",(function(r){self.postMessage({getBounds:c,put:l,findFit:h,clear:o}[r.data.name].apply(null,r.data.args))}))};self.addEventListener("message",r)}();\n'),h={completedWords:0,totalWords:l.length};return Promise.resolve().then((function(){return t.throwIfInterrupted(),r.progress=h,m(c,j)})).then((function(){t.throwIfInterrupted(),h.completedWords++;var n=Promise.resolve();return l.reduce((function(e,r,i){return n=n.then((function(){return r.I<e.I?Promise.resolve().then((function(){return m(c,{name:"clear"})})).then((function(){var t=Promise.resolve(),n=e.I/r.I;return l.slice(0,i).forEach((function(e){t=t.then((function(){return e.M*=n,m(c,{name:"put",args:[e.T,e.R,e.U]})}))})),t})):m(c,{name:"put",args:[e.T,e.R,e.U]})})).then((function(){return r._=N,m(c,{name:"findFit",args:[r.T,r.R,r.U]})})).then((function(n){var e=n[0],i=n[1];t.throwIfInterrupted(),h.completedWords++,r.R=e,r.U=i,r._=0})),r})),n})).then((function(){return m(c,{name:"put",args:[e.T,e.R,e.U]})})).then((function(){return m(c,{name:"getBounds"})})).then((function(t){var n=t.left,e=t.top,r=t.width,i=t.height;if(r>0&&i>0){var s=Math.min(a/r,o/i);l.forEach((function(t){t.O-=n,t.W-=e,t.M*=s}))}var u=new Set;return l.map((function(t){for(var n=t.J,e=t.t,r=t.Y,i=t.i,a=t.o,o=t.u,s=t.s,l=t.h,c=t.S,h=t.O,f=t.W,d=t.G,p=JSON.stringify([e,a,o,s,l]);u.has(p);)p+="!";return u.add(p),{key:p,word:n,text:e,weight:r,rotation:i,font:c,color:d,left:h,top:f}}))})).finally((function(){c.terminate()})).finally((function(){t.throwIfInterrupted(),r.progress=null}))}return[]}))}return[]},default:i}})],props:a,data:function(){return{elementWidth:0,elementHeight:0,progress:null}},computed:l,watch:M,mounted:function(){var t,n,e=this;t=function(){if(e._isDestroyed)return!1;e.updateElementSize()},n=1e3,function(t){var n=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return t.call.apply(t,[this,n].concat(e))};return n}((function(e){requestAnimationFrame((function(){!1!==t()&&setTimeout(e,n)}))}))()},methods:k,render:function(t){var n=this.$scopedSlots,e=this.animationEasing,r=this.animationOptions,i=this.cloudWords,a=this.separateAnimationDelay,o=this.separateAnimationDuration;return n=Object.assign({},{default:function(t){return t.text}},n),t("div",{style:{height:"100%",position:"relative",width:"100%"}},[t("div",{style:{bottom:"50%",position:"absolute",right:"50%",transform:"translate(50%,50%)"}},i.map((function(i,s){var u=i.color,l=i.font,c=i.left,h=i.rotation,f=i.text,d=i.top,p=i.weight,m=i.word;return t("transition",Object.assign({},r),[t("div",{key:s,style:Object.assign({},{left:c+"px",position:"absolute",top:d+"px"},o>0?{animation:[o+"ms",e,a*s+"ms"].join(" "),transition:["all",o+"ms",e,a*s+"ms"].join(" ")}:{})},[t("div",{style:Object.assign({},{bottom:0,position:"absolute",right:0,transform:["translate(50%,50%)","rotate("+h+"rad)"].join(" ")},o>0?{transition:["all",o+"ms",e,a*s+"ms"].join(" ")}:{})},[t("span",{style:{color:u,display:"inline-block",font:l,lineHeight:1,transform:"translateY(-0.1em)",whiteSpace:"nowrap"}},[n.default({color:u,font:l,left:c,text:f,top:d,weight:p,word:m})])])])])})))])}},N=globalThis.window;if(N){var E=N.Vue;E&&E.component(A.name,A)}return A}))},3351:function(t,n,e){},3583:function(t,n,e){},3619:function(t,n,e){"use strict";e("e7a7")},4114:function(t,n,e){"use strict";e("021a")},"4e44":function(t,n,e){"use strict";e("3351")},5484:function(t,n,e){"use strict";e("1f77")},"5c1a":function(t,n,e){},"680f":function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"viz-page"},[e("Cover"),e("Intro"),e("Tutorial"),e("CircleIntro"),e("CirclePacking"),e("BarIntro"),e("BarChart"),e("ScatterIntro"),e("ScatterChart"),e("Thanks")],1)},i=[],a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"cover"}},[e("div",{attrs:{id:"title"}},[e("div",{attrs:{id:"title-text"}},[e("h1",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v(" "+t._s(t.title1)+" ")]),e("h2",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v(" "+t._s(t.title2)+" ")]),e("h5",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v(" "+t._s(t.title3)+" ")])]),e("span",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],attrs:{id:"arrow"},on:{click:function(n){return t.scroll()}}},[t._v("╲╱")])]),e("div",{attrs:{id:"cover-image"}})])},o=[],s={name:"Cover",data(){return{title1:"Exploring patterns of language variation on social media",title2:"A case study in Atlanta online communities",title3:"Warning: there might be some explicit word usage on this website that is not appropriate for all ages"}},methods:{scroll(){document.getElementById("intro").scrollIntoView({behavior:"smooth"})}}},u=s,l=(e("6a84"),e("2877")),c=Object(l["a"])(u,a,o,!1,null,"9604add2",null),h=c.exports,f=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"intro"}},[e("div",{attrs:{id:"text-block"}},[e("hr"),e("p",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v(" Our team will explore how different communities in Atlanta perceive language in different ways. To do this, we’ll be using a dataset of 149 local communities with information about their online behavior on Twitter. Information at the twitter account level allowed us to create summary statistics at the community level such as community size, average number of followers, friends and tweets and understand what are the top follows and topic words in each community. Following a specific methodology, deviations from the normal language can be measured and these deviations are called semantic change. Our main goal is that the user can understand the semantic change in social media across Atlanta’s communities and have a guide for current local trends online. Examples of potential users are journalists, politicians and society as a whole. ")]),e("span",{attrs:{id:"arrow"},on:{click:function(n){return t.scroll()}}},[t._v("╲╱")])])])},d=[],p={name:"Intro",data(){return{}},methods:{scroll(){console.log(document.getElementById("intro")),document.getElementById("tutorial").scrollIntoView({behavior:"smooth"})}}},m=p,g=(e("bdb2"),Object(l["a"])(m,f,d,!1,null,"51c85d92",null)),v=g.exports,y=function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("div",{attrs:{id:"tutorial"}},[r("div",{attrs:{id:"text-block"}},[r("hr"),r("p",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v(" What is Semantic Change? According to wikipedia, Semantic Change is a form of language change regarding the evolution of word usage."),r("br"),r("b-img",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],staticClass:"screenshot",attrs:{src:e("cae8")}})],1),r("span",{attrs:{id:"arrow"},on:{click:function(n){return t.scroll()}}},[t._v("╲╱")])])])},w=[],b={name:"Tutorial",data(){return{}},methods:{scroll(){console.log(document.getElementById("intro")),document.getElementById("intro-circle").scrollIntoView({behavior:"smooth"})}}},_=b,x=(e("9193"),Object(l["a"])(_,y,w,!1,null,"0eeb2502",null)),M=x.exports,k=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"intro-circle"}},[e("h2",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v(" Community Grouping ")]),e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],attrs:{id:"text-block"}},[e("hr"),e("p",[t._v(" In the graph below, each of the 149 identified communities are represented as bubbles which are circled by the group to which that community belongs (e.g. social media, music, etc) and this, in turn, is circled by one of the four broad categories (entertainment, sports, society and atlanta). ")]),e("p",[t._v(" You can explore these hierarchies and grouping by clicking each layer of circles. When you arrive in the community bubble on the third layer, you can click it and see the top Twitter accounts that are followed by members in that community. If you click on any of those accounts, it will open up in a separate page. The size of the bubbles represent a feature of each community which can be selected from the drop -down menu at the left of the chart (community size, average friends count, etc). You can have a general first impression to understand which are Atlanta’s online communities and how they differ on one of these dimensions. For example, one quick takeaway of this graph is that the largest communities in terms of size are not necessarily the ones with the largest follower count. ")])]),e("span",{attrs:{id:"arrow"},on:{click:function(n){return t.scroll()}}},[t._v("╲╱")])])},A=[],N={name:"CircleIntro",data(){return{}},methods:{scroll(){document.getElementById("page-circle").scrollIntoView({behavior:"smooth"})}}},E=N,C=(e("746e"),Object(l["a"])(E,k,A,!1,null,"748339f2",null)),S=C.exports,T=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"page",attrs:{id:"page-barchart"}},[e("div",{staticClass:"content",attrs:{id:"content-barchart"}},[e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],staticClass:"title"},[e("h2",[t._v(" Ranking Communities ")])]),e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],staticClass:"top"},[e("Ranking")],1),e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],ref:"bottom",staticClass:"bottom"},[e("BarGraph")],1)]),e("span",{attrs:{id:"arrow"},on:{click:function(n){return t.scroll()}}},[t._v("╲╱")])])},j=[],B=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{ref:"chart1",attrs:{id:"chart-1"}},[e("div",{ref:"svg-container",attrs:{id:"svg-container-1"}})])},$=[];function I(t,n){let e;if(void 0===n)for(const r of t)null!=r&&(e<r||void 0===e&&r>=r)&&(e=r);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e<i||void 0===e&&i>=i)&&(e=i)}return e}var z=Array.prototype.slice,O=function(t){return t},F=1,P=2,R=3,D=4,H=1e-6;function V(t){return"translate("+t+",0)"}function W(t){return"translate(0,"+t+")"}function L(t){return n=>+t(n)}function q(t,n){return n=Math.max(0,t.bandwidth()-2*n)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function Y(){return!this.__axis}function U(t,n){var e=[],r=null,i=null,a=6,o=6,s=3,u="undefined"!==typeof window&&window.devicePixelRatio>1?0:.5,l=t===F||t===D?-1:1,c=t===D||t===P?"x":"y",h=t===F||t===R?V:W;function f(f){var d=null==r?n.ticks?n.ticks.apply(n,e):n.domain():r,p=null==i?n.tickFormat?n.tickFormat.apply(n,e):O:i,m=Math.max(a,0)+s,g=n.range(),v=+g[0]+u,y=+g[g.length-1]+u,w=(n.bandwidth?q:L)(n.copy(),u),b=f.selection?f.selection():f,_=b.selectAll(".domain").data([null]),x=b.selectAll(".tick").data(d,n).order(),M=x.exit(),k=x.enter().append("g").attr("class","tick"),A=x.select("line"),N=x.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(k),A=A.merge(k.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),N=N.merge(k.append("text").attr("fill","currentColor").attr(c,l*m).attr("dy",t===F?"0em":t===R?"0.71em":"0.32em")),f!==b&&(_=_.transition(f),x=x.transition(f),A=A.transition(f),N=N.transition(f),M=M.transition(f).attr("opacity",H).attr("transform",(function(t){return isFinite(t=w(t))?h(t+u):this.getAttribute("transform")})),k.attr("opacity",H).attr("transform",(function(t){var n=this.parentNode.__axis;return h((n&&isFinite(n=n(t))?n:w(t))+u)}))),M.remove(),_.attr("d",t===D||t===P?o?"M"+l*o+","+v+"H"+u+"V"+y+"H"+l*o:"M"+u+","+v+"V"+y:o?"M"+v+","+l*o+"V"+u+"H"+y+"V"+l*o:"M"+v+","+u+"H"+y),x.attr("opacity",1).attr("transform",(function(t){return h(w(t)+u)})),A.attr(c+"2",l*a),N.attr(c,l*m).text(p),b.filter(Y).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===P?"start":t===D?"end":"middle"),b.each((function(){this.__axis=w}))}return f.scale=function(t){return arguments.length?(n=t,f):n},f.ticks=function(){return e=z.call(arguments),f},f.tickArguments=function(t){return arguments.length?(e=null==t?[]:z.call(t),f):e.slice()},f.tickValues=function(t){return arguments.length?(r=null==t?null:z.call(t),f):r&&r.slice()},f.tickFormat=function(t){return arguments.length?(i=t,f):i},f.tickSize=function(t){return arguments.length?(a=o=+t,f):a},f.tickSizeInner=function(t){return arguments.length?(a=+t,f):a},f.tickSizeOuter=function(t){return arguments.length?(o=+t,f):o},f.tickPadding=function(t){return arguments.length?(s=+t,f):s},f.offset=function(t){return arguments.length?(u=+t,f):u},f}function X(t){return U(R,t)}function G(t){return U(D,t)}var J={value:()=>{}};function K(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Z(r)}function Z(t){this._=t}function Q(t,n){return t.trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))}function tt(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function nt(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=J,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}Z.prototype=K.prototype={constructor:Z,on:function(t,n){var e,r=this._,i=Q(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=n&&"function"!==typeof n)throw new Error("invalid callback: "+n);while(++a<o)if(e=(t=i[a]).type)r[e]=nt(r[e],t.name,n);else if(null==n)for(e in r)r[e]=nt(r[e],t.name,null);return this}while(++a<o)if((e=(t=i[a]).type)&&(e=tt(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new Z(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),a=0;a<e;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],a=0,e=r.length;a<e;++a)r[a].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(n,e)}};var et=K;function rt(){}var it=function(t){return null==t?rt:function(){return this.querySelector(t)}},at=function(t){"function"!==typeof t&&(t=it(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a,o,s=n[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(a=s[c])&&(o=t.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),l[c]=o);return new Qn(r,this._parents)},ot=function(t){return"object"===typeof t&&"length"in t?t:Array.from(t)};function st(){return[]}var ut=function(t){return null==t?st:function(){return this.querySelectorAll(t)}};function lt(t){return function(){var n=t.apply(this,arguments);return null==n?[]:ot(n)}}var ct=function(t){t="function"===typeof t?lt(t):ut(t);for(var n=this._groups,e=n.length,r=[],i=[],a=0;a<e;++a)for(var o,s=n[a],u=s.length,l=0;l<u;++l)(o=s[l])&&(r.push(t.call(o,o.__data__,l,s)),i.push(o));return new Qn(r,i)},ht=function(t){return function(){return this.matches(t)}};function ft(t){return function(n){return n.matches(t)}}var dt=Array.prototype.find;function pt(t){return function(){return dt.call(this.children,t)}}function mt(){return this.firstElementChild}var gt=function(t){return this.select(null==t?mt:pt("function"===typeof t?t:ft(t)))},vt=Array.prototype.filter;function yt(){return this.children}function wt(t){return function(){return vt.call(this.children,t)}}var bt=function(t){return this.selectAll(null==t?yt:wt("function"===typeof t?t:ft(t)))},_t=function(t){"function"!==typeof t&&(t=ht(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a,o=n[i],s=o.length,u=r[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&u.push(a);return new Qn(r,this._parents)},xt=function(t){return new Array(t.length)},Mt=function(){return new Qn(this._enter||this._groups.map(xt),this._parents)};function kt(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}kt.prototype={constructor:kt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var At=function(t){return function(){return t}};function Nt(t,n,e,r,i,a){for(var o,s=0,u=n.length,l=a.length;s<l;++s)(o=n[s])?(o.__data__=a[s],r[s]=o):e[s]=new kt(t,a[s]);for(;s<u;++s)(o=n[s])&&(i[s]=o)}function Et(t,n,e,r,i,a,o){var s,u,l,c=new Map,h=n.length,f=a.length,d=new Array(h);for(s=0;s<h;++s)(u=n[s])&&(d[s]=l=o.call(u,u.__data__,s,n)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<f;++s)l=o.call(t,a[s],s,a)+"",(u=c.get(l))?(r[s]=u,u.__data__=a[s],c.delete(l)):e[s]=new kt(t,a[s]);for(s=0;s<h;++s)(u=n[s])&&c.get(d[s])===u&&(i[s]=u)}function Ct(t){return t.__data__}var St=function(t,n){if(!arguments.length)return Array.from(this,Ct);var e=n?Et:Nt,r=this._parents,i=this._groups;"function"!==typeof t&&(t=At(t));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var c=r[l],h=i[l],f=h.length,d=ot(t.call(c,c&&c.__data__,l,r)),p=d.length,m=s[l]=new Array(p),g=o[l]=new Array(p),v=u[l]=new Array(f);e(c,h,m,g,v,d,n);for(var y,w,b=0,_=0;b<p;++b)if(y=m[b]){b>=_&&(_=b+1);while(!(w=g[_])&&++_<p);y._next=w||null}}return o=new Qn(o,r),o._enter=s,o._exit=u,o},Tt=function(){return new Qn(this._exit||this._groups.map(xt),this._parents)},jt=function(t,n,e){var r=this.enter(),i=this,a=this.exit();return r="function"===typeof t?t(r):r.append(t+""),null!=n&&(i=n(i)),null==e?a.remove():e(a),r&&i?r.merge(i).order():i},Bt=function(t){if(!(t instanceof Qn))throw new Error("invalid merge");for(var n=this._groups,e=t._groups,r=n.length,i=e.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u,l=n[s],c=e[s],h=l.length,f=o[s]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;s<r;++s)o[s]=n[s];return new Qn(o,this._parents)},$t=function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},It=function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=zt);for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a){for(var o,s=e[a],u=s.length,l=i[a]=new Array(u),c=0;c<u;++c)(o=s[c])&&(l[c]=o);l.sort(n)}return new Qn(i,this._parents).order()};function zt(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}var Ot=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},Ft=function(){return Array.from(this)},Pt=function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},Rt=function(){let t=0;for(const n of this)++t;return t},Dt=function(){return!this.node()},Ht=function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,a=n[e],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},Vt="http://www.w3.org/1999/xhtml",Wt={svg:"http://www.w3.org/2000/svg",xhtml:Vt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Lt=function(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Wt.hasOwnProperty(n)?{space:Wt[n],local:t}:t};function qt(t){return function(){this.removeAttribute(t)}}function Yt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ut(t,n){return function(){this.setAttribute(t,n)}}function Xt(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Gt(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function Jt(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}var Kt=function(t,n){var e=Lt(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?Yt:qt:"function"===typeof n?e.local?Jt:Gt:e.local?Xt:Ut)(e,n))},Zt=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function Qt(t){return function(){this.style.removeProperty(t)}}function tn(t,n,e){return function(){this.style.setProperty(t,n,e)}}function nn(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}var en=function(t,n,e){return arguments.length>1?this.each((null==n?Qt:"function"===typeof n?nn:tn)(t,n,null==e?"":e)):rn(this.node(),t)};function rn(t,n){return t.style.getPropertyValue(n)||Zt(t).getComputedStyle(t,null).getPropertyValue(n)}function an(t){return function(){delete this[t]}}function on(t,n){return function(){this[t]=n}}function sn(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}var un=function(t,n){return arguments.length>1?this.each((null==n?an:"function"===typeof n?sn:on)(t,n)):this.node()[t]};function ln(t){return t.trim().split(/^|\s+/)}function cn(t){return t.classList||new hn(t)}function hn(t){this._node=t,this._names=ln(t.getAttribute("class")||"")}function fn(t,n){var e=cn(t),r=-1,i=n.length;while(++r<i)e.add(n[r])}function dn(t,n){var e=cn(t),r=-1,i=n.length;while(++r<i)e.remove(n[r])}function pn(t){return function(){fn(this,t)}}function mn(t){return function(){dn(this,t)}}function gn(t,n){return function(){(n.apply(this,arguments)?fn:dn)(this,t)}}hn.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var vn=function(t,n){var e=ln(t+"");if(arguments.length<2){var r=cn(this.node()),i=-1,a=e.length;while(++i<a)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"===typeof n?gn:n?pn:mn)(e,n))};function yn(){this.textContent=""}function wn(t){return function(){this.textContent=t}}function bn(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}var _n=function(t){return arguments.length?this.each(null==t?yn:("function"===typeof t?bn:wn)(t)):this.node().textContent};function xn(){this.innerHTML=""}function Mn(t){return function(){this.innerHTML=t}}function kn(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}var An=function(t){return arguments.length?this.each(null==t?xn:("function"===typeof t?kn:Mn)(t)):this.node().innerHTML};function Nn(){this.nextSibling&&this.parentNode.appendChild(this)}var En=function(){return this.each(Nn)};function Cn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}var Sn=function(){return this.each(Cn)};function Tn(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Vt&&n.documentElement.namespaceURI===Vt?n.createElement(t):n.createElementNS(e,t)}}function jn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var Bn=function(t){var n=Lt(t);return(n.local?jn:Tn)(n)},$n=function(t){var n="function"===typeof t?t:Bn(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))};function In(){return null}var zn=function(t,n){var e="function"===typeof t?t:Bn(t),r=null==n?In:"function"===typeof n?n:it(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))};function On(){var t=this.parentNode;t&&t.removeChild(this)}var Fn=function(){return this.each(On)};function Pn(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Rn(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}var Dn=function(t){return this.select(t?Rn:Pn)},Hn=function(t){return arguments.length?this.property("__data__",t):this.node().__data__};function Vn(t){return function(n){t.call(this,n,this.__data__)}}function Wn(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}function Ln(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,a=n.length;r<a;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?n.length=i:delete this.__on}}}function qn(t,n,e){return function(){var r,i=this.__on,a=Vn(n);if(i)for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=e),void(r.value=n);this.addEventListener(t.type,a,e),r={type:t.type,name:t.name,value:n,listener:a,options:e},i?i.push(r):this.__on=[r]}}var Yn=function(t,n,e){var r,i,a=Wn(t+""),o=a.length;if(!(arguments.length<2)){for(s=n?qn:Ln,r=0;r<o;++r)this.each(s(a[r],n,e));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<o;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value};function Un(t,n,e){var r=Zt(t),i=r.CustomEvent;"function"===typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function Xn(t,n){return function(){return Un(this,t,n)}}function Gn(t,n){return function(){return Un(this,t,n.apply(this,arguments))}}var Jn=function(t,n){return this.each(("function"===typeof n?Gn:Xn)(t,n))},Kn=function*(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,i=t[n],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)},Zn=[null];function Qn(t,n){this._groups=t,this._parents=n}function te(){return new Qn([[document.documentElement]],Zn)}function ne(){return this}Qn.prototype=te.prototype={constructor:Qn,select:at,selectAll:ct,selectChild:gt,selectChildren:bt,filter:_t,data:St,enter:Mt,exit:Tt,join:jt,merge:Bt,selection:ne,order:$t,sort:It,call:Ot,nodes:Ft,node:Pt,size:Rt,empty:Dt,each:Ht,attr:Kt,style:en,property:un,classed:vn,text:_n,html:An,raise:En,lower:Sn,append:$n,insert:zn,remove:Fn,clone:Dn,datum:Hn,on:Yn,dispatch:Jn,[Symbol.iterator]:Kn};var ee=te,re=function(t){return"string"===typeof t?new Qn([[document.querySelector(t)]],[document.documentElement]):new Qn([[t]],Zn)};var ie=function(t){t.preventDefault(),t.stopImmediatePropagation()},ae=function(t){var n=t.document.documentElement,e=re(t).on("dragstart.drag",ie,!0);"onselectstart"in n?e.on("selectstart.drag",ie,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")};function oe(t,n){var e=t.document.documentElement,r=re(t).on("dragstart.drag",null);n&&(r.on("click.drag",ie,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}var se=function(t,n,e){t.prototype=n.prototype=e,e.constructor=t};function ue(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function le(){}var ce=.7,he=1/ce,fe="\\s*([+-]?\\d+)\\s*",de="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",pe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",me=/^#([0-9a-f]{3,8})$/,ge=new RegExp("^rgb\\("+[fe,fe,fe]+"\\)$"),ve=new RegExp("^rgb\\("+[pe,pe,pe]+"\\)$"),ye=new RegExp("^rgba\\("+[fe,fe,fe,de]+"\\)$"),we=new RegExp("^rgba\\("+[pe,pe,pe,de]+"\\)$"),be=new RegExp("^hsl\\("+[de,pe,pe]+"\\)$"),_e=new RegExp("^hsla\\("+[de,pe,pe,de]+"\\)$"),xe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Me(){return this.rgb().formatHex()}function ke(){return Oe(this).formatHsl()}function Ae(){return this.rgb().formatRgb()}function Ne(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=me.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?Ee(n):3===e?new je(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?Ce(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?Ce(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=ge.exec(t))?new je(n[1],n[2],n[3],1):(n=ve.exec(t))?new je(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=ye.exec(t))?Ce(n[1],n[2],n[3],n[4]):(n=we.exec(t))?Ce(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=be.exec(t))?ze(n[1],n[2]/100,n[3]/100,1):(n=_e.exec(t))?ze(n[1],n[2]/100,n[3]/100,n[4]):xe.hasOwnProperty(t)?Ee(xe[t]):"transparent"===t?new je(NaN,NaN,NaN,0):null}function Ee(t){return new je(t>>16&255,t>>8&255,255&t,1)}function Ce(t,n,e,r){return r<=0&&(t=n=e=NaN),new je(t,n,e,r)}function Se(t){return t instanceof le||(t=Ne(t)),t?(t=t.rgb(),new je(t.r,t.g,t.b,t.opacity)):new je}function Te(t,n,e,r){return 1===arguments.length?Se(t):new je(t,n,e,null==r?1:r)}function je(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Be(){return"#"+Ie(this.r)+Ie(this.g)+Ie(this.b)}function $e(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Ie(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function ze(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Pe(t,n,e,r)}function Oe(t){if(t instanceof Pe)return new Pe(t.h,t.s,t.l,t.opacity);if(t instanceof le||(t=Ne(t)),!t)return new Pe;if(t instanceof Pe)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),a=Math.max(n,e,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=n===a?(e-r)/s+6*(e<r):e===a?(r-n)/s+2:(n-e)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Pe(o,s,u,t.opacity)}function Fe(t,n,e,r){return 1===arguments.length?Oe(t):new Pe(t,n,e,null==r?1:r)}function Pe(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Re(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function De(t,n,e,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*n+(4-6*a+3*o)*e+(1+3*t+3*a-3*o)*r+o*i)/6}se(le,Ne,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Me,formatHex:Me,formatHsl:ke,formatRgb:Ae,toString:Ae}),se(je,Te,ue(le,{brighter:function(t){return t=null==t?he:Math.pow(he,t),new je(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?ce:Math.pow(ce,t),new je(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Be,formatHex:Be,formatRgb:$e,toString:$e})),se(Pe,Fe,ue(le,{brighter:function(t){return t=null==t?he:Math.pow(he,t),new Pe(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?ce:Math.pow(ce,t),new Pe(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new je(Re(t>=240?t-240:t+120,i,r),Re(t,i,r),Re(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var He=function(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<n-1?t[r+2]:2*a-i;return De((e-r/n)*n,o,i,a,s)}},Ve=function(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],a=t[r%n],o=t[(r+1)%n],s=t[(r+2)%n];return De((e-r/n)*n,i,a,o,s)}},We=t=>()=>t;function Le(t,n){return function(e){return t+e*n}}function qe(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function Ye(t,n){var e=n-t;return e?Le(t,e>180||e<-180?e-360*Math.round(e/360):e):We(isNaN(t)?n:t)}function Ue(t){return 1===(t=+t)?Xe:function(n,e){return e-n?qe(n,e,t):We(isNaN(n)?e:n)}}function Xe(t,n){var e=n-t;return e?Le(t,e):We(isNaN(t)?n:t)}var Ge=function t(n){var e=Ue(n);function r(t,n){var r=e((t=Te(t)).r,(n=Te(n)).r),i=e(t.g,n.g),a=e(t.b,n.b),o=Xe(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=a(n),t.opacity=o(n),t+""}}return r.gamma=t,r}(1);function Je(t){return function(n){var e,r,i=n.length,a=new Array(i),o=new Array(i),s=new Array(i);for(e=0;e<i;++e)r=Te(n[e]),a[e]=r.r||0,o[e]=r.g||0,s[e]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}Je(He),Je(Ve);var Ke=function(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(a){for(e=0;e<r;++e)i[e]=t[e]*(1-a)+n[e]*a;return i}};function Ze(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Qe(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(e=0;e<i;++e)a[e]=cr(t[e],n[e]);for(;e<r;++e)o[e]=n[e];return function(t){for(e=0;e<i;++e)o[e]=a[e](t);return o}}var tr=function(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}},nr=function(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}},er=function(t,n){var e,r={},i={};for(e in null!==t&&"object"===typeof t||(t={}),null!==n&&"object"===typeof n||(n={}),n)e in t?r[e]=cr(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}},rr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ir=new RegExp(rr.source,"g");function ar(t){return function(){return t}}function or(t){return function(n){return t(n)+""}}var sr,ur,lr=function(t,n){var e,r,i,a=rr.lastIndex=ir.lastIndex=0,o=-1,s=[],u=[];t+="",n+="";while((e=rr.exec(t))&&(r=ir.exec(n)))(i=r.index)>a&&(i=n.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(e=e[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:nr(e,r)})),a=ir.lastIndex;return a<n.length&&(i=n.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?or(u[0].x):ar(n):(n=u.length,function(t){for(var e,r=0;r<n;++r)s[(e=u[r]).i]=e.x(t);return s.join("")})},cr=function(t,n){var e,r=typeof n;return null==n||"boolean"===r?We(n):("number"===r?nr:"string"===r?(e=Ne(n))?(n=e,Ge):lr:n instanceof Ne?Ge:n instanceof Date?tr:Ze(n)?Ke:Array.isArray(n)?Qe:"function"!==typeof n.valueOf&&"function"!==typeof n.toString||isNaN(n)?er:nr)(t,n)},hr=function(t){let n;while(n=t.sourceEvent)t=n;return t},fr=function(t,n){if(t=hr(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]},dr=0,pr=0,mr=0,gr=1e3,vr=0,yr=0,wr=0,br="object"===typeof performance&&performance.now?performance:Date,_r="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function xr(){return yr||(_r(Mr),yr=br.now()+wr)}function Mr(){yr=0}function kr(){this._call=this._time=this._next=null}function Ar(t,n,e){var r=new kr;return r.restart(t,n,e),r}function Nr(){xr(),++dr;var t,n=sr;while(n)(t=yr-n._time)>=0&&n._call.call(null,t),n=n._next;--dr}function Er(){yr=(vr=br.now())+wr,dr=pr=0;try{Nr()}finally{dr=0,Sr(),yr=0}}function Cr(){var t=br.now(),n=t-vr;n>gr&&(wr-=n,vr=t)}function Sr(){var t,n,e=sr,r=1/0;while(e)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:sr=n);ur=t,Tr(r)}function Tr(t){if(!dr){pr&&(pr=clearTimeout(pr));var n=t-yr;n>24?(t<1/0&&(pr=setTimeout(Er,t-br.now()-wr)),mr&&(mr=clearInterval(mr))):(mr||(vr=br.now(),mr=setInterval(Cr,gr)),dr=1,_r(Er))}}kr.prototype=Ar.prototype={constructor:kr,restart:function(t,n,e){if("function"!==typeof t)throw new TypeError("callback is not a function");e=(null==e?xr():+e)+(null==n?0:+n),this._next||ur===this||(ur?ur._next=this:sr=this,ur=this),this._call=t,this._time=e,Tr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Tr())}};var jr=function(t,n,e){var r=new kr;return n=null==n?0:+n,r.restart(e=>{r.stop(),t(e+n)},n,e),r},Br=et("start","end","cancel","interrupt"),$r=[],Ir=0,zr=1,Or=2,Fr=3,Pr=4,Rr=5,Dr=6,Hr=function(t,n,e,r,i,a){var o=t.__transition;if(o){if(e in o)return}else t.__transition={};qr(t,e,{name:n,index:r,group:i,on:Br,tween:$r,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ir})};function Vr(t,n){var e=Lr(t,n);if(e.state>Ir)throw new Error("too late; already scheduled");return e}function Wr(t,n){var e=Lr(t,n);if(e.state>Fr)throw new Error("too late; already running");return e}function Lr(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function qr(t,n,e){var r,i=t.__transition;function a(t){e.state=zr,e.timer.restart(o,e.delay,e.time),e.delay<=t&&o(t-e.delay)}function o(a){var l,c,h,f;if(e.state!==zr)return u();for(l in i)if(f=i[l],f.name===e.name){if(f.state===Fr)return jr(o);f.state===Pr?(f.state=Dr,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[l]):+l<n&&(f.state=Dr,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[l])}if(jr((function(){e.state===Fr&&(e.state=Pr,e.timer.restart(s,e.delay,e.time),s(a))})),e.state=Or,e.on.call("start",t,t.__data__,e.index,e.group),e.state===Or){for(e.state=Fr,r=new Array(h=e.tween.length),l=0,c=-1;l<h;++l)(f=e.tween[l].value.call(t,t.__data__,e.index,e.group))&&(r[++c]=f);r.length=c+1}}function s(n){var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(u),e.state=Rr,1),a=-1,o=r.length;while(++a<o)r[a].call(t,i);e.state===Rr&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){for(var r in e.state=Dr,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=Ar(a,0,e.time)}var Yr,Ur=function(t,n){var e,r,i,a=t.__transition,o=!0;if(a){for(i in n=null==n?null:n+"",a)(e=a[i]).name===n?(r=e.state>Or&&e.state<Rr,e.state=Dr,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete a[i]):o=!1;o&&delete t.__transition}},Xr=function(t){return this.each((function(){Ur(this,t)}))},Gr=180/Math.PI,Jr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Kr=function(t,n,e,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+n*n))&&(t/=o,n/=o),(u=t*e+n*r)&&(e-=t*u,r-=n*u),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,u/=s),t*r<n*e&&(t=-t,n=-n,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(n,t)*Gr,skewX:Math.atan(u)*Gr,scaleX:o,scaleY:s}};function Zr(t){const n=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Jr:Kr(n.a,n.b,n.c,n.d,n.e,n.f)}function Qr(t){return null==t?Jr:(Yr||(Yr=document.createElementNS("http://www.w3.org/2000/svg","g")),Yr.setAttribute("transform",t),(t=Yr.transform.baseVal.consolidate())?(t=t.matrix,Kr(t.a,t.b,t.c,t.d,t.e,t.f)):Jr)}function ti(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}function a(t,r,i,a,o,s){if(t!==i||r!==a){var u=o.push("translate(",null,n,null,e);s.push({i:u-4,x:nr(t,i)},{i:u-2,x:nr(r,a)})}else(i||a)&&o.push("translate("+i+n+a+e)}function o(t,n,e,a){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),a.push({i:e.push(i(e)+"rotate(",null,r)-2,x:nr(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}function s(t,n,e,a){t!==n?a.push({i:e.push(i(e)+"skewX(",null,r)-2,x:nr(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}function u(t,n,e,r,a,o){if(t!==e||n!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:nr(t,e)},{i:s-2,x:nr(n,r)})}else 1===e&&1===r||a.push(i(a)+"scale("+e+","+r+")")}return function(n,e){var r=[],i=[];return n=t(n),e=t(e),a(n.translateX,n.translateY,e.translateX,e.translateY,r,i),o(n.rotate,e.rotate,r,i),s(n.skewX,e.skewX,r,i),u(n.scaleX,n.scaleY,e.scaleX,e.scaleY,r,i),n=e=null,function(t){var n,e=-1,a=i.length;while(++e<a)r[(n=i[e]).i]=n.x(t);return r.join("")}}}var ni=ti(Zr,"px, ","px)","deg)"),ei=ti(Qr,", ",")",")");function ri(t,n){var e,r;return function(){var i=Wr(this,t),a=i.tween;if(a!==e){r=e=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===n){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function ii(t,n,e){var r,i;if("function"!==typeof e)throw new Error;return function(){var a=Wr(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:n,value:e},u=0,l=i.length;u<l;++u)if(i[u].name===n){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}var ai=function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=Lr(this.node(),e).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==n?ri:ii)(e,t,n))};function oi(t,n,e){var r=t._id;return t.each((function(){var t=Wr(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)})),function(t){return Lr(t,r).value[n]}}var si=function(t,n){var e;return("number"===typeof n?nr:n instanceof Ne?Ge:(e=Ne(n))?(n=e,Ge):lr)(t,n)};function ui(t){return function(){this.removeAttribute(t)}}function li(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ci(t,n,e){var r,i,a=e+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=n(r=o,e)}}function hi(t,n,e){var r,i,a=e+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=n(r=o,e)}}function fi(t,n,e){var r,i,a;return function(){var o,s,u=e(this);if(null!=u)return o=this.getAttribute(t),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=n(r=o,u));this.removeAttribute(t)}}function di(t,n,e){var r,i,a;return function(){var o,s,u=e(this);if(null!=u)return o=this.getAttributeNS(t.space,t.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=n(r=o,u));this.removeAttributeNS(t.space,t.local)}}var pi=function(t,n){var e=Lt(t),r="transform"===e?ei:si;return this.attrTween(t,"function"===typeof n?(e.local?di:fi)(e,r,oi(this,"attr."+t,n)):null==n?(e.local?li:ui)(e):(e.local?hi:ci)(e,r,n))};function mi(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function gi(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function vi(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&gi(t,i)),e}return i._value=n,i}function yi(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&mi(t,i)),e}return i._value=n,i}var wi=function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!==typeof n)throw new Error;var r=Lt(t);return this.tween(e,(r.local?vi:yi)(r,n))};function bi(t,n){return function(){Vr(this,t).delay=+n.apply(this,arguments)}}function _i(t,n){return n=+n,function(){Vr(this,t).delay=n}}var xi=function(t){var n=this._id;return arguments.length?this.each(("function"===typeof t?bi:_i)(n,t)):Lr(this.node(),n).delay};function Mi(t,n){return function(){Wr(this,t).duration=+n.apply(this,arguments)}}function ki(t,n){return n=+n,function(){Wr(this,t).duration=n}}var Ai=function(t){var n=this._id;return arguments.length?this.each(("function"===typeof t?Mi:ki)(n,t)):Lr(this.node(),n).duration};function Ni(t,n){if("function"!==typeof n)throw new Error;return function(){Wr(this,t).ease=n}}var Ei=function(t){var n=this._id;return arguments.length?this.each(Ni(n,t)):Lr(this.node(),n).ease};function Ci(t,n){return function(){var e=n.apply(this,arguments);if("function"!==typeof e)throw new Error;Wr(this,t).ease=e}}var Si=function(t){if("function"!==typeof t)throw new Error;return this.each(Ci(this._id,t))},Ti=function(t){"function"!==typeof t&&(t=ht(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a,o=n[i],s=o.length,u=r[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&u.push(a);return new aa(r,this._parents,this._name,this._id)},ji=function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u,l=n[s],c=e[s],h=l.length,f=o[s]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;s<r;++s)o[s]=n[s];return new aa(o,this._parents,this._name,this._id)};function Bi(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t}))}function $i(t,n,e){var r,i,a=Bi(n)?Vr:Wr;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(n,e),o.on=i}}var Ii=function(t,n){var e=this._id;return arguments.length<2?Lr(this.node(),e).on.on(t):this.each($i(e,t,n))};function zi(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}var Oi=function(){return this.on("end.remove",zi(this._id))},Fi=function(t){var n=this._name,e=this._id;"function"!==typeof t&&(t=it(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,u,l=r[o],c=l.length,h=a[o]=new Array(c),f=0;f<c;++f)(s=l[f])&&(u=t.call(s,s.__data__,f,l))&&("__data__"in s&&(u.__data__=s.__data__),h[f]=u,Hr(h[f],n,e,f,h,Lr(s,e)));return new aa(a,this._parents,n,e)},Pi=function(t){var n=this._name,e=this._id;"function"!==typeof t&&(t=ut(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,h=0;h<c;++h)if(u=l[h]){for(var f,d=t.call(u,u.__data__,h,l),p=Lr(u,e),m=0,g=d.length;m<g;++m)(f=d[m])&&Hr(f,n,e,m,d,p);a.push(d),o.push(u)}return new aa(a,o,n,e)},Ri=ee.prototype.constructor,Di=function(){return new Ri(this._groups,this._parents)};function Hi(t,n){var e,r,i;return function(){var a=rn(this,t),o=(this.style.removeProperty(t),rn(this,t));return a===o?null:a===e&&o===r?i:i=n(e=a,r=o)}}function Vi(t){return function(){this.style.removeProperty(t)}}function Wi(t,n,e){var r,i,a=e+"";return function(){var o=rn(this,t);return o===a?null:o===r?i:i=n(r=o,e)}}function Li(t,n,e){var r,i,a;return function(){var o=rn(this,t),s=e(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=rn(this,t)),o===u?null:o===r&&u===i?a:(i=u,a=n(r=o,s))}}function qi(t,n){var e,r,i,a,o="style."+n,s="end."+o;return function(){var u=Wr(this,t),l=u.on,c=null==u.value[o]?a||(a=Vi(n)):void 0;l===e&&i===c||(r=(e=l).copy()).on(s,i=c),u.on=r}}var Yi=function(t,n,e){var r="transform"===(t+="")?ni:si;return null==n?this.styleTween(t,Hi(t,r)).on("end.style."+t,Vi(t)):"function"===typeof n?this.styleTween(t,Li(t,r,oi(this,"style."+t,n))).each(qi(this._id,t)):this.styleTween(t,Wi(t,r,n),e).on("end.style."+t,null)};function Ui(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function Xi(t,n,e){var r,i;function a(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&Ui(t,a,e)),r}return a._value=n,a}var Gi=function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!==typeof n)throw new Error;return this.tween(r,Xi(t,n,null==e?"":e))};function Ji(t){return function(){this.textContent=t}}function Ki(t){return function(){var n=t(this);this.textContent=null==n?"":n}}var Zi=function(t){return this.tween("text","function"===typeof t?Ki(oi(this,"text",t)):Ji(null==t?"":t+""))};function Qi(t){return function(n){this.textContent=t.call(this,n)}}function ta(t){var n,e;function r(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&Qi(r)),n}return r._value=t,r}var na=function(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;return this.tween(n,ta(t))},ea=function(){for(var t=this._name,n=this._id,e=sa(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],u=s.length,l=0;l<u;++l)if(o=s[l]){var c=Lr(o,n);Hr(o,t,e,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new aa(r,this._parents,t,e)},ra=function(){var t,n,e=this,r=e._id,i=e.size();return new Promise((function(a,o){var s={value:o},u={value:function(){0===--i&&a()}};e.each((function(){var e=Wr(this,r),i=e.on;i!==t&&(n=(t=i).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(u)),e.on=n})),0===i&&a()}))},ia=0;function aa(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function oa(t){return ee().transition(t)}function sa(){return++ia}var ua=ee.prototype;function la(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}aa.prototype=oa.prototype={constructor:aa,select:Fi,selectAll:Pi,filter:Ti,merge:ji,selection:Di,transition:ea,call:ua.call,nodes:ua.nodes,node:ua.node,size:ua.size,empty:ua.empty,each:ua.each,on:Ii,attr:pi,attrTween:wi,style:Yi,styleTween:Gi,text:Zi,textTween:na,remove:Oi,tween:ai,delay:xi,duration:Ai,ease:Ei,easeVarying:Si,end:ra,[Symbol.iterator]:ua[Symbol.iterator]};var ca={time:null,delay:0,duration:250,ease:la};function ha(t,n){var e;while(!(e=t.__transition)||!(e=e[n]))if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}var fa=function(t){var n,e;t instanceof aa?(n=t._id,t=t._name):(n=sa(),(e=ca).time=xr(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],u=s.length,l=0;l<u;++l)(o=s[l])&&Hr(o,t,n,l,s,e||ha(o,n));return new aa(r,this._parents,t,n)};ee.prototype.interrupt=Xr,ee.prototype.transition=fa;var da=t=>()=>t;function pa(t,{sourceEvent:n,target:e,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function ma(t){t.stopImmediatePropagation()}var ga=function(t){t.preventDefault(),t.stopImmediatePropagation()},va={name:"drag"},ya={name:"space"},wa={name:"handle"},ba={name:"center"};const{abs:_a,max:xa,min:Ma}=Math;function ka(t){return[+t[0],+t[1]]}function Aa(t){return[ka(t[0]),ka(t[1])]}var Na={name:"x",handles:["w","e"].map($a),input:function(t,n){return null==t?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Ea={name:"y",handles:["n","s"].map($a),input:function(t,n){return null==t?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ca=(["n","w","e","s","nw","ne","sw","se"].map($a),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),Sa={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ta={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ja={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ba={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function $a(t){return{type:t}}function Ia(t){return!t.ctrlKey&&!t.button}function za(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Oa(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fa(t){while(!t.__brush)if(!(t=t.parentNode))return;return t.__brush}function Pa(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Ra(){return Da(Ea)}function Da(t){var n,e=za,r=Ia,i=Oa,a=!0,o=et("start","brush","end"),s=6;function u(n){var e=n.property("__brush",m).selectAll(".overlay").data([$a("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ca.overlay).merge(e).each((function(){var t=Fa(this).extent;re(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),n.selectAll(".selection").data([$a("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ca.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=n.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Ca[t.type]})),n.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(i).on("touchstart.brush",f).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){var t=re(this),n=Fa(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?n[1][0]-s/2:n[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?n[1][1]-s/2:n[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(t,n,e){var r=t.__brush.emitter;return!r||e&&r.clean?new h(t,n,e):r}function h(t,n,e){this.that=t,this.args=n,this.state=t.__brush,this.active=0,this.clean=e}function f(e){if((!n||e.touches)&&r.apply(this,arguments)){var i,o,s,u,h,f,d,p,m,g,v,y=this,w=e.target.__data__.type,b="selection"===(a&&e.metaKey?w="overlay":w)?va:a&&e.altKey?ba:wa,_=t===Ea?null:ja[w],x=t===Na?null:Ba[w],M=Fa(y),k=M.extent,A=M.selection,N=k[0][0],E=k[0][1],C=k[1][0],S=k[1][1],T=0,j=0,B=_&&x&&a&&e.shiftKey,$=Array.from(e.touches||[e],t=>{const n=t.identifier;return t=fr(t,y),t.point0=t.slice(),t.identifier=n,t});if("overlay"===w){A&&(m=!0);const n=[$[0],$[1]||$[0]];M.selection=A=[[i=t===Ea?N:Ma(n[0][0],n[1][0]),s=t===Na?E:Ma(n[0][1],n[1][1])],[h=t===Ea?C:xa(n[0][0],n[1][0]),d=t===Na?S:xa(n[0][1],n[1][1])]],$.length>1&&R()}else i=A[0][0],s=A[0][1],h=A[1][0],d=A[1][1];o=i,u=s,f=h,p=d;var I=re(y).attr("pointer-events","none"),z=I.selectAll(".overlay").attr("cursor",Ca[w]);Ur(y);var O=c(y,arguments,!0).beforestart();if(e.touches)O.moved=P,O.ended=D;else{var F=re(e.view).on("mousemove.brush",P,!0).on("mouseup.brush",D,!0);a&&F.on("keydown.brush",H,!0).on("keyup.brush",V,!0),ae(e.view)}l.call(y),O.start(e,b.name)}function P(t){for(const n of t.changedTouches||[t])for(const t of $)t.identifier===n.identifier&&(t.cur=fr(n,y));if(B&&!g&&!v&&1===$.length){const t=$[0];_a(t.cur[0]-t[0])>_a(t.cur[1]-t[1])?v=!0:g=!0}for(const n of $)n.cur&&(n[0]=n.cur[0],n[1]=n.cur[1]);m=!0,ga(t),R(t)}function R(t){const n=$[0],e=n.point0;var r;switch(T=n[0]-e[0],j=n[1]-e[1],b){case ya:case va:_&&(T=xa(N-i,Ma(C-h,T)),o=i+T,f=h+T),x&&(j=xa(E-s,Ma(S-d,j)),u=s+j,p=d+j);break;case wa:$[1]?(_&&(o=xa(N,Ma(C,$[0][0])),f=xa(N,Ma(C,$[1][0])),_=1),x&&(u=xa(E,Ma(S,$[0][1])),p=xa(E,Ma(S,$[1][1])),x=1)):(_<0?(T=xa(N-i,Ma(C-i,T)),o=i+T,f=h):_>0&&(T=xa(N-h,Ma(C-h,T)),o=i,f=h+T),x<0?(j=xa(E-s,Ma(S-s,j)),u=s+j,p=d):x>0&&(j=xa(E-d,Ma(S-d,j)),u=s,p=d+j));break;case ba:_&&(o=xa(N,Ma(C,i-T*_)),f=xa(N,Ma(C,h+T*_))),x&&(u=xa(E,Ma(S,s-j*x)),p=xa(E,Ma(S,d+j*x)));break}f<o&&(_*=-1,r=i,i=h,h=r,r=o,o=f,f=r,w in Sa&&z.attr("cursor",Ca[w=Sa[w]])),p<u&&(x*=-1,r=s,s=d,d=r,r=u,u=p,p=r,w in Ta&&z.attr("cursor",Ca[w=Ta[w]])),M.selection&&(A=M.selection),g&&(o=A[0][0],f=A[1][0]),v&&(u=A[0][1],p=A[1][1]),A[0][0]===o&&A[0][1]===u&&A[1][0]===f&&A[1][1]===p||(M.selection=[[o,u],[f,p]],l.call(y),O.brush(t,b.name))}function D(t){if(ma(t),t.touches){if(t.touches.length)return;n&&clearTimeout(n),n=setTimeout((function(){n=null}),500)}else oe(t.view,m),F.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);I.attr("pointer-events","all"),z.attr("cursor",Ca.overlay),M.selection&&(A=M.selection),Pa(A)&&(M.selection=null,l.call(y)),O.end(t,b.name)}function H(t){switch(t.keyCode){case 16:B=_&&x;break;case 18:b===wa&&(_&&(h=f-T*_,i=o+T*_),x&&(d=p-j*x,s=u+j*x),b=ba,R());break;case 32:b!==wa&&b!==ba||(_<0?h=f-T:_>0&&(i=o-T),x<0?d=p-j:x>0&&(s=u-j),b=ya,z.attr("cursor",Ca.selection),R());break;default:return}ga(t)}function V(t){switch(t.keyCode){case 16:B&&(g=v=B=!1,R());break;case 18:b===ba&&(_<0?h=f:_>0&&(i=o),x<0?d=p:x>0&&(s=u),b=wa,R());break;case 32:b===ya&&(t.altKey?(_&&(h=f-T*_,i=o+T*_),x&&(d=p-j*x,s=u+j*x),b=ba):(_<0?h=f:_>0&&(i=o),x<0?d=p:x>0&&(s=u),b=wa),z.attr("cursor",Ca[w]),R());break;default:return}ga(t)}}function d(t){c(this,arguments).moved(t)}function p(t){c(this,arguments).ended(t)}function m(){var n=this.__brush||{selection:null};return n.extent=Aa(e.apply(this,arguments)),n.dim=t,n}return u.move=function(n,e){n.tween?n.on("start.brush",(function(t){c(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){c(this,arguments).end(t)})).tween("brush",(function(){var n=this,r=n.__brush,i=c(n,arguments),a=r.selection,o=t.input("function"===typeof e?e.apply(this,arguments):e,r.extent),s=cr(a,o);function u(t){r.selection=1===t&&null===o?null:s(t),l.call(n),i.brush()}return null!==a&&null!==o?u:u(1)})):n.each((function(){var n=this,r=arguments,i=n.__brush,a=t.input("function"===typeof e?e.apply(n,r):e,i.extent),o=c(n,r).beforestart();Ur(n),i.selection=null===a?null:a,l.call(n),o.start().brush().end()}))},u.clear=function(t){u.move(t,null)},h.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,n){return this.starting?(this.starting=!1,this.emit("start",t,n)):this.emit("brush",t),this},brush:function(t,n){return this.emit("brush",t,n),this},end:function(t,n){return 0===--this.active&&(delete this.state.emitter,this.emit("end",t,n)),this},emit:function(n,e,r){var i=re(this.that).datum();o.call(n,this.that,new pa(n,{sourceEvent:e,target:u,selection:t.output(this.state.selection),mode:r,dispatch:o}),i)}},u.extent=function(t){return arguments.length?(e="function"===typeof t?t:da(Aa(t)),u):e},u.filter=function(t){return arguments.length?(r="function"===typeof t?t:da(!!t),u):r},u.touchable=function(t){return arguments.length?(i="function"===typeof t?t:da(!!t),u):i},u.handleSize=function(t){return arguments.length?(s=+t,u):s},u.keyModifiers=function(t){return arguments.length?(a=!!t,u):a},u.on=function(){var t=o.on.apply(o,arguments);return t===o?u:t},u}var Ha={},Va={},Wa=34,La=10,qa=13;function Ya(t){return new Function("d","return {"+t.map((function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'})).join(",")+"}")}function Ua(t,n){var e=Ya(t);return function(r,i){return n(e(r),i,t)}}function Xa(t){var n=Object.create(null),e=[];return t.forEach((function(t){for(var r in t)r in n||e.push(n[r]=r)})),e}function Ga(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function Ja(t){return t<0?"-"+Ga(-t,6):t>9999?"+"+Ga(t,6):Ga(t,4)}function Ka(t){var n=t.getUTCHours(),e=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Ja(t.getUTCFullYear(),4)+"-"+Ga(t.getUTCMonth()+1,2)+"-"+Ga(t.getUTCDate(),2)+(i?"T"+Ga(n,2)+":"+Ga(e,2)+":"+Ga(r,2)+"."+Ga(i,3)+"Z":r?"T"+Ga(n,2)+":"+Ga(e,2)+":"+Ga(r,2)+"Z":e||n?"T"+Ga(n,2)+":"+Ga(e,2)+"Z":"")}var Za=function(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var e,r,a=i(t,(function(t,i){if(e)return e(t,i-1);r=t,e=n?Ua(t,n):Ya(t)}));return a.columns=r||[],a}function i(t,n){var r,i=[],a=t.length,o=0,s=0,u=a<=0,l=!1;function c(){if(u)return Va;if(l)return l=!1,Ha;var n,r,i=o;if(t.charCodeAt(i)===Wa){while(o++<a&&t.charCodeAt(o)!==Wa||t.charCodeAt(++o)===Wa);return(n=o)>=a?u=!0:(r=t.charCodeAt(o++))===La?l=!0:r===qa&&(l=!0,t.charCodeAt(o)===La&&++o),t.slice(i+1,n-1).replace(/""/g,'"')}while(o<a){if((r=t.charCodeAt(n=o++))===La)l=!0;else if(r===qa)l=!0,t.charCodeAt(o)===La&&++o;else if(r!==e)continue;return t.slice(i,n)}return u=!0,t.slice(i,a)}t.charCodeAt(a-1)===La&&--a,t.charCodeAt(a-1)===qa&&--a;while((r=c())!==Va){var h=[];while(r!==Ha&&r!==Va)h.push(r),r=c();n&&null==(h=n(h,s++))||i.push(h)}return i}function a(n,e){return n.map((function(n){return e.map((function(t){return c(n[t])})).join(t)}))}function o(n,e){return null==e&&(e=Xa(n)),[e.map(c).join(t)].concat(a(n,e)).join("\n")}function s(t,n){return null==n&&(n=Xa(t)),a(t,n).join("\n")}function u(t){return t.map(l).join("\n")}function l(n){return n.map(c).join(t)}function c(t){return null==t?"":t instanceof Date?Ka(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:u,formatRow:l,formatValue:c}},Qa=Za(","),to=Qa.parse,no=(Qa.parseRows,Qa.format,Qa.formatBody,Qa.formatRows,Qa.formatRow,Qa.formatValue,Za("\t")),eo=no.parse;no.parseRows,no.format,no.formatBody,no.formatRows,no.formatRow,no.formatValue;function ro(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var io=function(t,n){return fetch(t,n).then(ro)};function ao(t){return function(n,e,r){return 2===arguments.length&&"function"===typeof e&&(r=e,e=void 0),io(n,e).then((function(n){return t(n,r)}))}}var oo=ao(to);ao(eo);function so(t){var n=0,e=t.children,r=e&&e.length;if(r)while(--r>=0)n+=e[r].value;else n=1;t.value=n}var uo=function(){return this.eachAfter(so)},lo=function(t,n){let e=-1;for(const r of this)t.call(n,r,++e,this);return this},co=function(t,n){var e,r,i=this,a=[i],o=-1;while(i=a.pop())if(t.call(n,i,++o,this),e=i.children)for(r=e.length-1;r>=0;--r)a.push(e[r]);return this},ho=function(t,n){var e,r,i,a=this,o=[a],s=[],u=-1;while(a=o.pop())if(s.push(a),e=a.children)for(r=0,i=e.length;r<i;++r)o.push(e[r]);while(a=s.pop())t.call(n,a,++u,this);return this},fo=function(t,n){let e=-1;for(const r of this)if(t.call(n,r,++e,this))return r},po=function(t){return this.eachAfter((function(n){var e=+t(n.data)||0,r=n.children,i=r&&r.length;while(--i>=0)e+=r[i].value;n.value=e}))},mo=function(t){return this.eachBefore((function(n){n.children&&n.children.sort(t)}))},go=function(t){var n=this,e=vo(n,t),r=[n];while(n!==e)n=n.parent,r.push(n);var i=r.length;while(t!==e)r.splice(i,0,t),t=t.parent;return r};function vo(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;t=e.pop(),n=r.pop();while(t===n)i=t,t=e.pop(),n=r.pop();return i}var yo=function(){var t=this,n=[t];while(t=t.parent)n.push(t);return n},wo=function(){return Array.from(this)},bo=function(){var t=[];return this.eachBefore((function(n){n.children||t.push(n)})),t},_o=function(){var t=this,n=[];return t.each((function(e){e!==t&&n.push({source:e.parent,target:e})})),n},xo=function*(){var t,n,e,r,i=this,a=[i];do{t=a.reverse(),a=[];while(i=t.pop())if(yield i,n=i.children)for(e=0,r=n.length;e<r;++e)a.push(n[e])}while(a.length)};function Mo(t,n){t instanceof Map?(t=[void 0,t],void 0===n&&(n=No)):void 0===n&&(n=Ao);var e,r,i,a,o,s=new So(t),u=[s];while(e=u.pop())if((i=n(e.data))&&(o=(i=Array.from(i)).length))for(e.children=i,a=o-1;a>=0;--a)u.push(r=i[a]=new So(i[a])),r.parent=e,r.depth=e.depth+1;return s.eachBefore(Co)}function ko(){return Mo(this).eachBefore(Eo)}function Ao(t){return t.children}function No(t){return Array.isArray(t)?t[1]:null}function Eo(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Co(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function So(t){this.data=t,this.depth=this.height=0,this.parent=null}So.prototype=Mo.prototype={constructor:So,count:uo,each:lo,eachAfter:ho,eachBefore:co,find:fo,sum:po,sort:mo,path:go,ancestors:yo,descendants:wo,leaves:bo,links:_o,copy:ko,[Symbol.iterator]:xo};var To=function(t){return"object"===typeof t&&"length"in t?t:Array.from(t)};function jo(t){var n,e,r=t.length;while(r)e=Math.random()*r--|0,n=t[r],t[r]=t[e],t[e]=n;return t}var Bo=function(t){var n,e,r=0,i=(t=jo(Array.from(t))).length,a=[];while(r<i)n=t[r],e&&zo(e,n)?++r:(e=Fo(a=$o(a,n)),r=0);return e};function $o(t,n){var e,r;if(Oo(n,t))return[n];for(e=0;e<t.length;++e)if(Io(n,t[e])&&Oo(Ro(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(Io(Ro(t[e],t[r]),n)&&Io(Ro(t[e],n),t[r])&&Io(Ro(t[r],n),t[e])&&Oo(Do(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function Io(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function zo(t,n){var e=t.r-n.r+1e-9*Math.max(t.r,n.r,1),r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function Oo(t,n){for(var e=0;e<n.length;++e)if(!zo(t,n[e]))return!1;return!0}function Fo(t){switch(t.length){case 1:return Po(t[0]);case 2:return Ro(t[0],t[1]);case 3:return Do(t[0],t[1],t[2])}}function Po(t){return{x:t.x,y:t.y,r:t.r}}function Ro(t,n){var e=t.x,r=t.y,i=t.r,a=n.x,o=n.y,s=n.r,u=a-e,l=o-r,c=s-i,h=Math.sqrt(u*u+l*l);return{x:(e+a+u/h*c)/2,y:(r+o+l/h*c)/2,r:(h+i+s)/2}}function Do(t,n,e){var r=t.x,i=t.y,a=t.r,o=n.x,s=n.y,u=n.r,l=e.x,c=e.y,h=e.r,f=r-o,d=r-l,p=i-s,m=i-c,g=u-a,v=h-a,y=r*r+i*i-a*a,w=y-o*o-s*s+u*u,b=y-l*l-c*c+h*h,_=d*p-f*m,x=(p*b-m*w)/(2*_)-r,M=(m*g-p*v)/_,k=(d*w-f*b)/(2*_)-i,A=(f*v-d*g)/_,N=M*M+A*A-1,E=2*(a+x*M+k*A),C=x*x+k*k-a*a,S=-(N?(E+Math.sqrt(E*E-4*N*C))/(2*N):C/E);return{x:r+x+M*S,y:i+k+A*S,r:S}}function Ho(t,n,e){var r,i,a,o,s=t.x-n.x,u=t.y-n.y,l=s*s+u*u;l?(i=n.r+e.r,i*=i,o=t.r+e.r,o*=o,i>o?(r=(l+o-i)/(2*l),a=Math.sqrt(Math.max(0,o/l-r*r)),e.x=t.x-r*s-a*u,e.y=t.y-r*u+a*s):(r=(l+i-o)/(2*l),a=Math.sqrt(Math.max(0,i/l-r*r)),e.x=n.x+r*s-a*u,e.y=n.y+r*u+a*s)):(e.x=n.x+e.r,e.y=n.y)}function Vo(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function Wo(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,a=(n.y*e.r+e.y*n.r)/r;return i*i+a*a}function Lo(t){this._=t,this.next=null,this.previous=null}function qo(t){if(!(i=(t=To(t)).length))return 0;var n,e,r,i,a,o,s,u,l,c,h;if(n=t[0],n.x=0,n.y=0,!(i>1))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(i>2))return n.r+e.r;Ho(e,n,r=t[2]),n=new Lo(n),e=new Lo(e),r=new Lo(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(s=3;s<i;++s){Ho(n._,e._,r=t[s]),r=new Lo(r),u=e.next,l=n.previous,c=e._.r,h=n._.r;do{if(c<=h){if(Vo(u._,r._)){e=u,n.next=e,e.previous=n,--s;continue t}c+=u._.r,u=u.next}else{if(Vo(l._,r._)){n=l,n.next=e,e.previous=n,--s;continue t}h+=l._.r,l=l.previous}}while(u!==l.next);r.previous=n,r.next=e,n.next=e.previous=e=r,a=Wo(n);while((r=r.next)!==e)(o=Wo(r))<a&&(n=r,a=o);e=n.next}n=[e._],r=e;while((r=r.next)!==e)n.push(r._);for(r=Bo(n),s=0;s<i;++s)n=t[s],n.x-=r.x,n.y-=r.y;return r.r}function Yo(t){return null==t?null:Uo(t)}function Uo(t){if("function"!==typeof t)throw new Error;return t}function Xo(){return 0}var Go=function(t){return function(){return t}};function Jo(t){return Math.sqrt(t.value)}var Ko=function(){var t=null,n=1,e=1,r=Xo;function i(i){return i.x=n/2,i.y=e/2,t?i.eachBefore(Zo(t)).eachAfter(Qo(r,.5)).eachBefore(ts(1)):i.eachBefore(Zo(Jo)).eachAfter(Qo(Xo,1)).eachAfter(Qo(r,i.r/Math.min(n,e))).eachBefore(ts(Math.min(n,e)/(2*i.r))),i}return i.radius=function(n){return arguments.length?(t=Yo(n),i):t},i.size=function(t){return arguments.length?(n=+t[0],e=+t[1],i):[n,e]},i.padding=function(t){return arguments.length?(r="function"===typeof t?t:Go(+t),i):r},i};function Zo(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Qo(t,n){return function(e){if(r=e.children){var r,i,a,o=r.length,s=t(e)*n||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=qo(r),s)for(i=0;i<o;++i)r[i].r-=s;e.r=a+s}}}function ts(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}var ns=1e-12;function es(t){return((t=Math.exp(t))+1/t)/2}function rs(t){return((t=Math.exp(t))-1/t)/2}function is(t){return((t=Math.exp(2*t))-1)/(t+1)}var as=function t(n,e,r){function i(t,i){var a,o,s=t[0],u=t[1],l=t[2],c=i[0],h=i[1],f=i[2],d=c-s,p=h-u,m=d*d+p*p;if(m<ns)o=Math.log(f/l)/n,a=function(t){return[s+t*d,u+t*p,l*Math.exp(n*t*o)]};else{var g=Math.sqrt(m),v=(f*f-l*l+r*m)/(2*l*e*g),y=(f*f-l*l-r*m)/(2*f*e*g),w=Math.log(Math.sqrt(v*v+1)-v),b=Math.log(Math.sqrt(y*y+1)-y);o=(b-w)/n,a=function(t){var r=t*o,i=es(w),a=l/(e*g)*(i*is(n*r+w)-rs(w));return[s+a*d,u+a*p,l*i/es(n*r+w)]}}return a.duration=1e3*o*n/Math.SQRT2,a}return i.rho=function(n){var e=Math.max(.001,+n),r=e*e,i=r*r;return t(e,r,i)},i}(Math.SQRT2,2,4);const os=Math.PI/180,ss=180/Math.PI,us=18,ls=.96422,cs=1,hs=.82521,fs=4/29,ds=6/29,ps=3*ds*ds,ms=ds*ds*ds;function gs(t){if(t instanceof ys)return new ys(t.l,t.a,t.b,t.opacity);if(t instanceof As)return Ns(t);t instanceof je||(t=Se(t));var n,e,r=xs(t.r),i=xs(t.g),a=xs(t.b),o=ws((.2225045*r+.7168786*i+.0606169*a)/cs);return r===i&&i===a?n=e=o:(n=ws((.4360747*r+.3850649*i+.1430804*a)/ls),e=ws((.0139322*r+.0971045*i+.7141733*a)/hs)),new ys(116*o-16,500*(n-o),200*(o-e),t.opacity)}function vs(t,n,e,r){return 1===arguments.length?gs(t):new ys(t,n,e,null==r?1:r)}function ys(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function ws(t){return t>ms?Math.pow(t,1/3):t/ps+fs}function bs(t){return t>ds?t*t*t:ps*(t-fs)}function _s(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function xs(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ms(t){if(t instanceof As)return new As(t.h,t.c,t.l,t.opacity);if(t instanceof ys||(t=gs(t)),0===t.a&&0===t.b)return new As(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*ss;return new As(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function ks(t,n,e,r){return 1===arguments.length?Ms(t):new As(t,n,e,null==r?1:r)}function As(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function Ns(t){if(isNaN(t.h))return new ys(t.l,0,0,t.opacity);var n=t.h*os;return new ys(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}function Es(t){return function(n,e){var r=t((n=ks(n)).h,(e=ks(e)).h),i=Xe(n.c,e.c),a=Xe(n.l,e.l),o=Xe(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=a(t),n.opacity=o(t),n+""}}}se(ys,vs,ue(le,{brighter:function(t){return new ys(this.l+us*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new ys(this.l-us*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return n=ls*bs(n),t=cs*bs(t),e=hs*bs(e),new je(_s(3.1338561*n-1.6168667*t-.4906146*e),_s(-.9787684*n+1.9161415*t+.033454*e),_s(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),se(As,ks,ue(le,{brighter:function(t){return new As(this.h,this.c,this.l+us*(null==t?1:t),this.opacity)},darker:function(t){return new As(this.h,this.c,this.l-us*(null==t?1:t),this.opacity)},rgb:function(){return Ns(this).rgb()}}));var Cs=Es(Ye),Ss=(Es(Xe),function(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),a=new Array(i);while(++r<i)a[r]=t+r*e;return a});function Ts(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}const js=Symbol("implicit");function Bs(){var t=new Map,n=[],e=[],r=js;function i(i){var a=i+"",o=t.get(a);if(!o){if(r!==js)return r;t.set(a,o=n.push(i))}return e[(o-1)%e.length]}return i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new Map;for(const r of e){const e=r+"";t.has(e)||t.set(e,n.push(r))}return i},i.range=function(t){return arguments.length?(e=Array.from(t),i):e.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Bs(n,e).unknown(r)},Ts.apply(i,arguments),i}function $s(){var t,n,e=Bs().unknown(void 0),r=e.domain,i=e.range,a=0,o=1,s=!1,u=0,l=0,c=.5;function h(){var e=r().length,h=o<a,f=h?o:a,d=h?a:o;t=(d-f)/Math.max(1,e-u+2*l),s&&(t=Math.floor(t)),f+=(d-f-t*(e-u))*c,n=t*(1-u),s&&(f=Math.round(f),n=Math.round(n));var p=Ss(e).map((function(n){return f+t*n}));return i(h?p.reverse():p)}return delete e.unknown,e.domain=function(t){return arguments.length?(r(t),h()):r()},e.range=function(t){return arguments.length?([a,o]=t,a=+a,o=+o,h()):[a,o]},e.rangeRound=function(t){return[a,o]=t,a=+a,o=+o,s=!0,h()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(s=!!t,h()):s},e.padding=function(t){return arguments.length?(u=Math.min(1,l=+t),h()):u},e.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),h()):u},e.paddingOuter=function(t){return arguments.length?(l=+t,h()):l},e.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),h()):c},e.copy=function(){return $s(r(),[a,o]).round(s).paddingInner(u).paddingOuter(l).align(c)},Ts.apply(h(),arguments)}var Is=Math.sqrt(50),zs=Math.sqrt(10),Os=Math.sqrt(2),Fs=function(t,n,e){var r,i,a,o,s=-1;if(n=+n,t=+t,e=+e,t===n&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(o=Ps(t,n,e))||!isFinite(o))return[];if(o>0){let e=Math.round(t/o),r=Math.round(n/o);e*o<t&&++e,r*o>n&&--r,a=new Array(i=r-e+1);while(++s<i)a[s]=(e+s)*o}else{o=-o;let e=Math.round(t*o),r=Math.round(n*o);e/o<t&&++e,r/o>n&&--r,a=new Array(i=r-e+1);while(++s<i)a[s]=(e+s)/o}return r&&a.reverse(),a};function Ps(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Is?10:a>=zs?5:a>=Os?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Is?10:a>=zs?5:a>=Os?2:1)}function Rs(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Is?i*=10:a>=zs?i*=5:a>=Os&&(i*=2),n<t?-i:i}var Ds=function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN},Hs=function(t){let n=t,e=t;function r(t,n,r,i){null==r&&(r=0),null==i&&(i=t.length);while(r<i){const a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r}function i(t,n,r,i){null==r&&(r=0),null==i&&(i=t.length);while(r<i){const a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}function a(t,e,i,a){null==i&&(i=0),null==a&&(a=t.length);const o=r(t,e,i,a-1);return o>i&&n(t[o-1],e)>-n(t[o],e)?o-1:o}return 1===t.length&&(n=(n,e)=>t(n)-e,e=Vs(t)),{left:r,center:a,right:i}};function Vs(t){return(n,e)=>Ds(t(n),e)}var Ws=function(t){return null===t?NaN:+t};const Ls=Hs(Ds),qs=Ls.right;Ls.left,Hs(Ws).center;var Ys=qs,Us=function(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}};function Xs(t){return function(){return t}}function Gs(t){return+t}var Js=[0,1];function Ks(t){return t}function Zs(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:Xs(isNaN(n)?NaN:.5)}function Qs(t,n){var e;return t>n&&(e=t,t=n,n=e),function(e){return Math.max(t,Math.min(n,e))}}function tu(t,n,e){var r=t[0],i=t[1],a=n[0],o=n[1];return i<r?(r=Zs(i,r),a=e(o,a)):(r=Zs(r,i),a=e(a,o)),function(t){return a(r(t))}}function nu(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),a=new Array(r),o=-1;t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());while(++o<r)i[o]=Zs(t[o],t[o+1]),a[o]=e(n[o],n[o+1]);return function(n){var e=Ys(t,n,1,r)-1;return a[e](i[e](n))}}function eu(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ru(){var t,n,e,r,i,a,o=Js,s=Js,u=cr,l=Ks;function c(){var t=Math.min(o.length,s.length);return l!==Ks&&(l=Qs(o[0],o[t-1])),r=t>2?nu:tu,i=a=null,h}function h(n){return null==n||isNaN(n=+n)?e:(i||(i=r(o.map(t),s,u)))(t(l(n)))}return h.invert=function(e){return l(n((a||(a=r(s,o.map(t),nr)))(e)))},h.domain=function(t){return arguments.length?(o=Array.from(t,Gs),c()):o.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),u=Us,c()},h.clamp=function(t){return arguments.length?(l=!!t||Ks,c()):l!==Ks},h.interpolate=function(t){return arguments.length?(u=t,c()):u},h.unknown=function(t){return arguments.length?(e=t,h):e},function(e,r){return t=e,n=r,c()}}function iu(){return ru()(Ks,Ks)}var au=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ou(t){if(!(n=au.exec(t)))throw new Error("invalid format: "+t);var n;return new su({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function su(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}ou.prototype=su.prototype,su.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var uu=function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)};function lu(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}var cu,hu,fu,du,pu=function(t){return t=lu(Math.abs(t)),t?t[1]:NaN},mu=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(pu(n)/3)))-pu(Math.abs(t)))},gu=function(t,n){return function(e,r){var i=e.length,a=[],o=0,s=t[0],u=0;while(i>0&&s>0){if(u+s+1>r&&(s=Math.max(1,r-u)),a.push(e.substring(i-=s,i+s)),(u+=s+1)>r)break;s=t[o=(o+1)%t.length]}return a.reverse().join(n)}},vu=function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}},yu=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(n+1):t},wu=function(t,n){var e=lu(t,n);if(!e)return t+"";var r=e[0],i=e[1],a=i-(cu=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+lu(t,Math.max(0,n+a-1))[0]},bu=function(t,n){var e=lu(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},_u={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:uu,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>bu(100*t,n),r:bu,s:wu,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},xu=function(t){return t},Mu=Array.prototype.map,ku=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],Au=function(t){var n=void 0===t.grouping||void 0===t.thousands?xu:gu(Mu.call(t.grouping,Number),t.thousands+""),e=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?xu:vu(Mu.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function l(t){t=ou(t);var l=t.fill,c=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,m=t.comma,g=t.precision,v=t.trim,y=t.type;"n"===y?(m=!0,y="g"):_u[y]||(void 0===g&&(g=12),v=!0,y="g"),(d||"0"===l&&"="===c)&&(d=!0,l="0",c="=");var w="$"===f?e:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===f?r:/[%p]/.test(y)?o:"",_=_u[y],x=/[defgprs%]/.test(y);function M(t){var e,r,o,f=w,M=b;if("c"===y)M=_(t)+M,t="";else{t=+t;var k=t<0||1/t<0;if(t=isNaN(t)?u:_(Math.abs(t),g),v&&(t=yu(t)),k&&0===+t&&"+"!==h&&(k=!1),f=(k?"("===h?h:s:"-"===h||"("===h?"":h)+f,M=("s"===y?ku[8+cu/3]:"")+M+(k&&"("===h?")":""),x){e=-1,r=t.length;while(++e<r)if(o=t.charCodeAt(e),48>o||o>57){M=(46===o?i+t.slice(e+1):t.slice(e))+M,t=t.slice(0,e);break}}}m&&!d&&(t=n(t,1/0));var A=f.length+t.length+M.length,N=A<p?new Array(p-A+1).join(l):"";switch(m&&d&&(t=n(N+t,N.length?p-M.length:1/0),N=""),c){case"<":t=f+t+M+N;break;case"=":t=f+N+t+M;break;case"^":t=N.slice(0,A=N.length>>1)+f+t+M+N.slice(A);break;default:t=N+f+t+M;break}return a(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),M.toString=function(){return t+""},M}function c(t,n){var e=l((t=ou(t),t.type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(pu(n)/3))),i=Math.pow(10,-r),a=ku[8+r/3];return function(t){return e(i*t)+a}}return{format:l,formatPrefix:c}};function Nu(t){return hu=Au(t),fu=hu.format,du=hu.formatPrefix,hu}Nu({thousands:",",grouping:[3],currency:["$",""]});var Eu=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,pu(n)-pu(t))+1},Cu=function(t){return Math.max(0,-pu(Math.abs(t)))};function Su(t,n,e,r){var i,a=Rs(t,n,e);switch(r=ou(null==r?",f":r),r.type){case"s":var o=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(i=mu(a,o))||(r.precision=i),du(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Eu(a,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Cu(a))||(r.precision=i-2*("%"===r.type));break}return fu(r)}function Tu(t){var n=t.domain;return t.ticks=function(t){var e=n();return Fs(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return Su(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i,a=n(),o=0,s=a.length-1,u=a[o],l=a[s],c=10;l<u&&(i=u,u=l,l=i,i=o,o=s,s=i);while(c-- >0){if(i=Ps(u,l,e),i===r)return a[o]=u,a[s]=l,n(a);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return t},t}function ju(){var t=iu();return t.copy=function(){return eu(t,ju())},Ts.apply(t,arguments),Tu(t)}function Bu(t,n,e){this.k=t,this.x=n,this.y=e}Bu.prototype={constructor:Bu,scale:function(t){return 1===t?this:new Bu(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new Bu(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $u=new Bu(1,0,0);function Iu(t){while(!t.__zoom)if(!(t=t.parentNode))return $u;return t.__zoom}Iu.prototype=Bu.prototype;var zu=e("56d7"),Ou={name:"BarGraph",props:["clusters"],data(){return{margin:null,margin2:null,width:null,width2:null,height:null,x:null,y:null,x2:null,y2:null,svg:null,xAxis:null,yAxis:null,xScale:null,yScale:null,brush:null,brushArea:null,content:null,focus:null,xText:""}},created:function(){zu["eventBus"].$on("select-ranking",this.reorder)},beforeDestroy:function(){zu["eventBus"].$off("select-ranking",this.reorder)},mounted(){this.margin={top:20,right:10,bottom:50,left:300},this.margin2={top:20,right:5,bottom:50,left:50},this.width2=75,this.width=this.$refs.chart1.clientWidth,this.height=this.$refs.chart1.clientHeight,this.x=ju().range([this.margin.left,this.width-this.margin.right-this.width2]).nice(),this.y=$s().range([this.height-this.margin.bottom,this.margin.top]).padding(.1),this.x2=ju().range([this.margin2.left,this.width2-this.margin2.right]).nice(),this.y2=$s().range([this.height-this.margin.bottom,this.margin.top]).padding(.1),this.svg=re("#chart-1").append("svg").attr("width",this.width).attr("height",this.height),this.svg.append("clipPath").attr("id","my-clip-path").append("rect").attr("x",this.margin.left).attr("y",this.margin.top).attr("width",this.width-this.margin.left-this.margin.right).attr("height",this.height-this.margin.top-this.margin.bottom),this.content=this.svg.append("g").attr("transform","translate(0,0)"),this.focus=this.svg.append("g").attr("transform","translate("+this.width2+",0)");const t=this;function n(n){const e=n.selection;if(e){const n=[];t.y2.domain().forEach(r=>{var i=t.y2(r)+t.y2.bandwidth()/2;i>e[0]&&i<e[1]&&n.push(r)}),t.y.domain(n),t.svg.selectAll(".bar").attr("y",n=>t.y(n.cluster_name)).attr("height",t.y.bandwidth()),t.yAxis.call(t.yScale,t.y)}}function e({selection:n}){n||t.brushArea.call(t.brush.move,[t.margin.top,(t.height-t.margin.bottom)/4])}this.brush=Ra().extent([[this.margin2.left-this.margin2.right,this.margin.top],[this.width2,this.height-this.margin.bottom]]).on("brush",n).on("end",e),this.brushArea=this.content.append("g").attr("class","brush"),this.xScale=function(n){n.attr("transform",`translate(0, ${t.height-t.margin.bottom})`).call(X(t.x)).call(t=>t.select(".domain").remove())},this.xAxis=this.focus.append("g").attr("class","x-axis").call(this.xScale),this.xText=this.focus.append("text").attr("x",t.width/2).attr("y",t.height-5).attr("text-anchor","middle").attr("font-family","Helvetica Neue, Arial").attr("font-weight",700).attr("font-size",20).attr("fill","White").text(""),this.yScale=function(n,e){n.attr("transform",`translate(${t.margin.left}, 0)`).call(G(e).ticks(t.width/40).tickSizeOuter(0))},this.yAxis=this.focus.append("g").attr("class","y-axis").call(this.yScale,this.y),this.content.append("text").attr("class","y-label").attr("transform","rotate(-90)").attr("x",-(this.height-this.margin.bottom)/2-50).attr("y",15).attr("text-anchor","middle").attr("font-family","Helvetica Neue, Arial").attr("font-weight",700).attr("font-size",20).attr("fill","White").text("cluster name"),this.reorder("community_size")},computed:{chartHeight(){return this.$refs.chart1.clientHeight},chartWidth(){return this.$refs.chart1.clientWidth}},methods:{updateBars(t){const n=this;this.x.domain([0,I(t,t=>t.value)]),this.xAxis.transition().duration(250).call(X(this.x)),this.y.domain(t.map(t=>t.cluster_name)),this.yAxis.transition().duration(250).call(G(this.y)),this.x2.domain([0,I(t,t=>t.value)]),this.y2.domain(t.map(t=>t.cluster_name));const e=this.focus.selectAll(".bar").data(t);e.enter().append("rect").attr("clip-path","url(#my-clip-path)").attr("class","bar").attr("id",t=>t.cluster_name).attr("x",n.margin.left).attr("y",t=>n.y(t.cluster_name)).attr("width",t=>n.x(t.value)-this.margin.left).attr("height",n.y.bandwidth()).attr("fill","#1da1f2"),e.transition().duration(250).attr("x",n.margin.left).attr("y",t=>n.y(t.cluster_name)).attr("width",t=>n.x(t.value)-this.margin.left).attr("height",n.y.bandwidth()).attr("fill","#1da1f2"),e.exit().remove();const r=this.content.selectAll(".bar2").data(t);r.enter().append("rect").attr("class","bar2").attr("x",n.margin2.left).attr("y",t=>n.y2(t.cluster_name)).attr("width",t=>n.x2(t.value)-n.margin2.left).attr("height",n.y2.bandwidth()).attr("fill","#1da1f2"),r.transition().duration(250).attr("x",n.margin2.left).attr("y",t=>n.y2(t.cluster_name)).attr("width",t=>n.x2(t.value)-n.margin2.left).attr("height",n.y2.bandwidth()).attr("fill","#1da1f2"),r.exit().remove(),setTimeout(()=>{n.brushArea.call(n.brush).call(n.brush.move,[this.margin.top,(this.height-this.margin.bottom)/4])},300)},reorder(t){oo("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(n=>{this.xText.text(t),console.log(n),n.forEach(n=>n.value=parseFloat(n[t])),n.sort((t,n)=>t.value-n.value),n.forEach((t,n)=>t.Rank=n+1),this.updateBars(n)})}}},Fu=Ou,Pu=(e("e2f8"),Object(l["a"])(Fu,B,$,!1,null,"1f181d19",null)),Ru=Pu.exports,Du=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"ranking-group"}},[t._m(0),e("div",{attrs:{id:"selection"}},[e("b-form-select",{attrs:{options:t.options},on:{change:function(n){return t.selectRanking(t.selected)}},model:{value:t.selected,callback:function(n){t.selected=n},expression:"selected"}})],1)])},Hu=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"selection-text"}},[e("span",[t._v("Sort the communities by:")])])}],Vu={name:"Ranking",data(){return{selected:"community_size",options:[{text:"community size",value:"community_size"},{text:"number of friends",value:"friends_count_median"},{text:"number of followers",value:"follower_count_mean"},{text:"user activity in tweeting",value:"tweet_count_mean"},{text:"user activity in favoriting",value:"favorite_count_mean"},{text:"semantic change",value:"semantic_change"},{text:"ideological semantic change",value:"ideology_semantic_change"},{text:"organization status",value:"is_org"},{text:"age",value:"age"},{text:"gender (female ratio)",value:"gender"},{text:"betweenness",value:"betweenness"},{text:"closeness",value:"closeness"}]}},created:function(){zu["eventBus"].$on("select-ranking",this.changeButton)},beforeDestroy:function(){zu["eventBus"].$off("select-ranking",this.changeButton)},methods:{selectRanking:function(){zu["eventBus"].$emit("select-ranking",this.selected)},changeButton:function(t){this.selected=t}}},Wu=Vu,Lu=(e("4114"),Object(l["a"])(Wu,Du,Hu,!1,null,"7c18b7fa",null)),qu=Lu.exports,Yu={name:"BarChart",components:{BarGraph:Ru,Ranking:qu},data(){return{}},created:function(){},beforeDestroy:function(){},mounted(){},methods:{scroll(){document.getElementById("intro-scatter").scrollIntoView({behavior:"smooth"})}}},Uu=Yu,Xu=(e("5484"),Object(l["a"])(Uu,T,j,!1,null,"310a528d",null)),Gu=Xu.exports,Ju=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"page",attrs:{id:"page-scatter"}},[e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],staticClass:"title"},[e("h2",[t._v(" Language Variation & Social Factors ")])]),e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],staticClass:"content"},[e("div",{staticClass:"left"},[e("Factors"),e("transition",{attrs:{name:"fade"}},[t.showingHint?e("div",[e("h4",[t._v(" Hover on a dot to see the topic words of the community 👉 ")])]):e("TooltipThree",{attrs:{clusterName:t.clusterName,topicWords:t.topicWords}})],1)],1),e("div",{ref:"right",staticClass:"right"},[e("ScatterGraph")],1)]),e("span",{attrs:{id:"arrow"},on:{click:function(n){return t.scroll()}}},[t._v("╲╱")])])},Ku=[],Zu=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{ref:"chart3",attrs:{id:"chart-3"}},[e("div",{ref:"svg-container-3",attrs:{id:"svg-container-3"}})])},Qu=[],tl={name:"ScatterGraph",props:["clusters"],data(){return{margin:null,width:null,height:null,x:null,y:null,color:null,svg:null,xAxis:null,yAxis:null,xScale:null,yScale:null,xText:"",yText:"",storedData:null,r:null}},created:function(){zu["eventBus"].$on("select-factors",this.updateScatterPlot)},beforeDestroy:function(){zu["eventBus"].$off("select-factors",this.updateScatterPlot)},mounted(){this.margin={top:20,right:20,bottom:50,left:70},this.width=this.$refs.chart3.clientWidth,this.height=this.$refs.chart3.clientHeight,this.r=ju().range([2,20]),this.x=ju().range([this.margin.left,this.width-this.margin.right]),this.y=ju().range([this.height-this.margin.bottom,this.margin.top]),this.svg=re("#chart-3").append("svg").attr("width",this.width).attr("height",this.height);const t=["atlanta","society","entertainment","sports"],n=["#FFBF00","#FF7F50","#6495ED","#808000"];this.color=Bs().domain(t).range(n);const e=this;this.svg.selectAll("mydots").data(t).enter().append("circle").attr("class","mydots").attr("cx",e.width-e.margin.right-100).attr("cy",(function(t,n){return e.margin.top+25*n})).attr("r",7).style("fill",(function(t){return e.color(t)})),this.svg.selectAll("mylabels").data(t).enter().append("text").attr("class","mylabels").attr("x",e.width-e.margin.right-82).attr("y",(function(t,n){return e.margin.top+25*n+5})).style("fill",(function(t){return e.color(t)})).text((function(t){return t})).attr("text-anchor","left").style("alignment-baseline","middle"),this.xAxis=this.svg.append("g").attr("class","x-axis").attr("transform",`translate(0, ${e.height-e.margin.bottom})`).call(X(e.x)),this.xText=this.xAxis.append("text").attr("text-anchor","middle").attr("font-family","Helvetica Neue, Arial").attr("x",(this.width-this.margin.right)/2).attr("y",40).attr("font-weight",700).attr("font-size",20).attr("fill","white").text(""),this.yAxis=this.svg.append("g").attr("class","y-axis").attr("transform",`translate(${e.margin.left}, 0)`).call(G(e.y)),this.yText=this.yAxis.append("text").attr("transform","rotate(-90)").attr("text-anchor","middle").attr("x",-(this.height-this.margin.bottom)/2-10).attr("y",-40).attr("font-family","Helvetica Neue, Arial").attr("font-weight",700).attr("font-size",20).attr("fill","white").text(""),oo("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(t=>{this.storedData=t,console.log(this.storedData),this.updateScatterPlot("community_size","semantic_change","all")})},methods:{updateScatterPlot(t,n,e){console.log(t,n,e);const r=this,i="all"!=e?r.storedData.filter(t=>t.category==e):r.storedData;console.log(r.storedData),console.log(i),this.x.domain([0,I(i,n=>parseFloat(n[t]))]),this.xAxis.transition().duration(1e3).call(X(this.x)),this.xText.text(t),this.y.domain([0,I(i,t=>parseFloat(t[n]))]),this.yAxis.transition().duration(1e3).call(G(this.y)),this.yText.text(n);const a=this.svg.selectAll(".dot").data(i.filter((function(t,n){return n<1500})));console.log("Here"),this.r.domain([0,I(i,t=>parseFloat(t["community_size"]))]),a.enter().append("circle").attr("class","dot").attr("r",5).style("fill","#e25609").style("opacity",0).style("stroke","white").attr("cx",r.margin.left).attr("cy",r.height-r.margin.bottom).on("mouseover",(function(t,n){console.log("over"),console.log(t);const e=n.cluster_name,r=n.topic_words;zu["eventBus"].$emit("show-tooltip-3",e,r)})).on("mouseout",(function(){console.log("out"),zu["eventBus"].$emit("hide-tooltip-3")})).transition().delay((function(t,n){return 3*n})).duration(2e3).attr("cx",(function(n){return r.x(n[t])})).attr("cy",(function(t){return r.y(t[n])})).attr("r",(function(t){return r.r(t["community_size"])})).style("fill",(function(t){return r.color(t["category"])})).attr("stroke",(function(t){return r.color(t["category"])})).style("opacity",.8),console.log("Here"),a.transition().delay((function(t,n){return 3*n})).duration(2e3).attr("cx",(function(n){return r.x(n[t])})).attr("cy",(function(t){return r.y(t[n])})).attr("r",(function(t){return r.r(t["community_size"])})).style("fill",(function(t){return r.color(t["category"])})).attr("stroke",(function(t){return r.color(t["category"])})),console.log("Here"),a.exit().transition().delay((function(t,n){return 3*n})).duration(2e3).attr("cx",r.margin.left).attr("cy",r.height-r.margin.bottom).style("opacity",0).remove(),console.log("Here")}}},nl=tl,el=(e("2a46"),Object(l["a"])(nl,Zu,Qu,!1,null,"c34f0054",null)),rl=el.exports,il=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("b-form-group",{attrs:{id:"input-group-1",label:"Choose two factors:","label-for":"m-2"}},[e("b-form-select",{attrs:{options:t.factors},on:{change:t.selectFactors},model:{value:t.factor1,callback:function(n){t.factor1=n},expression:"factor1"}}),e("b-form-select",{attrs:{options:t.factors},on:{change:t.selectFactors},model:{value:t.factor2,callback:function(n){t.factor2=n},expression:"factor2"}})],1),e("b-form-group",{attrs:{id:"input-group-3",label:"Choose a category:","label-for":"m-2"}},[e("b-form-select",{attrs:{options:t.categories},on:{change:t.selectFactors},model:{value:t.category,callback:function(n){t.category=n},expression:"category"}})],1)],1)},al=[],ol={name:"Ranking",data(){return{factor1:"community_size",factor2:"semantic_change",category:"all",categories:["all","atlanta","society","entertainment","sports"],factors:["community_size","semantic_change","ideology_semantic_change","age","gender","is_org","closeness","betweenness","friends_count_mean","friends_count_median","follower_count_mean","follower_count_median","favorite_count_mean","favorite_count_median","tweet_count_mean","tweet_count_median","tweet_count_rank"]}},methods:{selectFactors:function(){zu["eventBus"].$emit("select-factors",this.factor1,this.factor2,this.category)}}},sl=ol,ul=(e("1859"),Object(l["a"])(sl,il,al,!1,null,"472a265c",null)),ll=ul.exports,cl=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"tooltip-3"}},[e("div",[t._v("Top words of "),e("b",[t._v(t._s(t.clusterName))]),t._v(" community")]),e("vue-word-cloud",{attrs:{id:"wordcloud",rotation:t.rotate,spacing:t.spacing,words:t.topicWords,color:"white","font-family":"Roboto"}})],1)},hl=[],fl=e("2d8a"),dl=e.n(fl),pl={name:"TooltipThree",props:["clusterName","topicWords"],components:{[dl.a.name]:dl.a},data(){return{words:[{text:"Vue",value:1e3},{text:"js",value:200},{text:"is",value:800},{text:"very cool",value:1e6},{text:"lunch",value:100}],margin:{top:0,right:0,bottom:0,left:0},rotate:null,spacing:1/4}},mounted(){this.rotate=function(){const t=[0,1/8,3/4,7/8],n=Math.floor(Math.random()*t.length);return t[n]}}},ml=pl,gl=(e("2125"),Object(l["a"])(ml,cl,hl,!1,null,"68748eab",null)),vl=gl.exports,yl={name:"BarChart",components:{ScatterGraph:rl,Factors:ll,TooltipThree:vl},data(){return{clusterName:"",topicWords:[],showingHint:!0}},created:function(){zu["eventBus"].$on("show-tooltip-3",this.showTooltip),zu["eventBus"].$on("hide-tooltip-3",this.hideTooltip)},beforeDestroy:function(){zu["eventBus"].$off("show-tooltip-3",this.showTooltip),zu["eventBus"].$off("hide-tooltip-3",this.hideTooltip)},methods:{showTooltip(t,n){console.log("show"),this.clusterName=t,this.topicWords=n.split(",").map(t=>({text:t,value:1})),this.showingHint=!1},hideTooltip(){this.showingHint=!0,console.log("hide")},scroll(){document.getElementById("thanks").scrollIntoView({behavior:"smooth"})}}},wl=yl,bl=(e("85e7"),Object(l["a"])(wl,Ju,Ku,!1,null,"375533c2",null)),_l=bl.exports,xl=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"thanks"}},[e("div",{attrs:{id:"thanks-title"}},[e("h1",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v(" "+t._s(t.title1)+" ")])]),e("div",{attrs:{id:"thanks-content"}},[e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],staticClass:"thanks-text-block"},[t._m(0),e("p",[t._v("Developed by Yuebin Dong, Diego Lestani, Amanda Horne, Hang Jiang (Equal Contributions)")]),e("b-link",{attrs:{href:"/final-project-atlanta-community/#/"}},[t._v("Project Page")]),e("b-link",{attrs:{href:"https://github.com/6859-sp21/final-project-atlanta-community"}},[t._v("Github")])],1),e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],attrs:{id:"thanks-image-block"}},[e("b-button",{staticClass:"button-share",attrs:{"label-for":"input-1",variant:"link"}},[e("ShareNetwork",{attrs:{network:"twitter",url:"https://6859-sp21.github.io/final-project-atlanta-community/",title:"Visualizing language variation in Atlanta on Twitter"}},[e("b-icon",{attrs:{icon:"twitter","font-scale":"3"}}),e("span",{staticStyle:{margin:"0.5em"}},[t._v("Share on twitter")])],1)],1)],1)]),e("div",{attrs:{id:"back-to-top"}},[e("span",{attrs:{id:"arrow"},on:{click:function(n){return t.scroll()}}},[t._v("TOP")]),e("span",{attrs:{id:"arrow"},on:{click:function(n){return t.scroll()}}},[t._v("╱╲")])])])},Ml=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("p",[t._v("This visualization is based on a research project in "),e("a",{attrs:{href:"https://www.ccc.mit.edu/"}},[t._v("MIT Center for Constructive Communication")]),t._v(", "),e("a",{attrs:{href:"https://www.media.mit.edu/"}},[t._v("MIT Media Lab")])])}],kl={name:"Thanks",data(){return{title1:"Thanks for exploring"}},methods:{scroll(){document.getElementById("cover").scrollIntoView({behavior:"smooth"})}}},Al=kl,Nl=(e("811e"),Object(l["a"])(Al,xl,Ml,!1,null,"7272c40b",null)),El=Nl.exports,Cl=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"page",attrs:{id:"page-circle"}},[e("div",{staticClass:"content"},[e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],staticClass:"title"},[e("h2",[t._v(" Community Grouping ")])]),e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],staticClass:"top"},[e("Ranking")],1),e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],ref:"bottom",staticClass:"bottom"},[e("CircleGraph")],1)]),e("span",{attrs:{id:"arrow"},on:{click:function(n){return t.scroll()}}},[t._v("╲╱")])])},Sl=[],Tl=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{ref:"chart2",attrs:{id:"chart-2"}},[e("b-breadcrumb",{attrs:{items:t.items}}),e("div",{attrs:{id:"svg-container-2"}})],1)},jl=[],Bl={name:"CircleGraph",data(){return{width:null,height:null,color:null,svg:null,root:null,focus:null,view:null,label:null,storedData:null,node:null,parents:null,followings:null,items:[{text:"All"}]}},created:function(){zu["eventBus"].$on("select-ranking",this.update)},beforeDestroy:function(){zu["eventBus"].$off("select-ranking",this.update)},mounted(){this.width=this.$refs.chart2.clientWidth,this.height=this.$refs.chart2.clientHeight-20,this.color=ju().domain([0,5]).range(["rgb(6,103,162)","#7bbbe3"]).interpolate(Cs);const t=this;this.svg=re("#chart-2").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox",`-${t.width/2} -${t.height/2} ${t.width} ${t.height}`).style("cursor","pointer").on("click",n=>t.zoom(n,t.root)),this.node=this.svg.append("g"),this.label=this.svg.append("g").attr("pointer-events","none").attr("text-anchor","middle"),oo("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(t=>{const n=new Map,e=new Map;this.parents=new Map,this.followings=new Map,t.forEach(t=>{const r=[];if(t.top_follows.split(",").forEach(n=>{r.push({name:n,community_size:parseFloat(t.community_size)/25,semantic_change:parseFloat(t.semantic_change)/25,ideology_semantic_change:parseFloat(t.ideology_semantic_change)/25,friends_count_median:parseFloat(t.friends_count_median)/25,follower_count_mean:parseFloat(t.follower_count_mean)/25,favorite_count_mean:parseFloat(t.favorite_count_mean)/25,is_org:parseFloat(t.is_org)/25,age:parseFloat(t.age)/25,gender:parseFloat(t.gender)/25,betweenness:parseFloat(t.betweenness)/25,closeness:parseFloat(t.closeness)/25,tweet_count_mean:parseFloat(t.tweet_count_mean)/25})}),n.get(t.cluster_group)?n.get(t.cluster_group).push({name:t.cluster_name,children:r}):n.set(t.cluster_group,[{name:t.cluster_name,children:r}]),e.get(t.category))e.get(t.category).add(t.cluster_group);else{const n=new Set;n.add(t.cluster_group),e.set(t.category,n)}this.parents.set(t.cluster_name,t.cluster_group),this.parents.set(t.cluster_group,t.category),this.parents.set(t.category,"All"),this.followings.set(t.cluster_name,t.top_follows.split(","))}),this.parents.set("All",null);const r=[];e.forEach((t,e)=>{const i=[];t.forEach(t=>{i.push({name:t,children:n.get(t)})}),r.push({name:e,children:i})}),this.storedData={name:"All",children:r},this.root=Mo(this.storedData).sum(t=>t["community_size"]).sort((t,n)=>n.value-t.value),this.node=this.svg.append("g"),this.label=this.svg.append("g"),this.update("community_size")})},methods:{pack(t){const n=Ko().size([Math.min(this.width,this.height),Math.min(this.width,this.height)]).padding(3);return n(this.root.sum(n=>n[t]).sort((t,n)=>n.value-t.value))},update(t){this.root=this.pack(t),this.focus=this.root;const n=this,e=this.node.selectAll("circle").data(n.root.descendants().slice(1)),r=[n.root.x,n.root.y,2*n.root.r],i=Math.min(this.width,this.height)/r[2];e.enter().append("circle").attr("fill",t=>t.children?n.color(t.depth):"none").attr("pointer-events",t=>t.children?null:"none").on("mouseover",(function(){re(this).attr("stroke","#ffffff")})).on("mouseout",(function(){re(this).attr("stroke",null)})).on("click",(t,e)=>{n.focus!==e&&(n.zoom(t,e),t.stopPropagation())}).transition().duration(2e3).attr("transform",t=>`translate(${(t.x-r[0])*i},${(t.y-r[1])*i})`).attr("r",t=>t.r*i),e.transition().duration(2e3).attr("transform",t=>`translate(${(t.x-r[0])*i},${(t.y-r[1])*i})`).attr("r",t=>t.r*i),e.exit().remove();const a=this.label.selectAll(".circle-label").data(n.root.descendants());a.enter().append("text").attr("class","circle-label").attr("text-anchor","middle").style("font",t=>t.children?"15px sans-serif":"10px sans-serif").style("fill-opacity",t=>t.parent===n.root?1:0).style("display",t=>t.parent===n.root?"inline":"none").text(t=>t.children?t.data.name:"@"+t.data.name).attr("pointer-events",t=>t.children?"none":null).on("click",(t,n)=>{window.open("https://twitter.com/"+n.data.name)}).transition().duration(2e3).attr("transform",t=>`translate(${(t.x-r[0])*i},${(t.y-r[1])*i})`),a.transition().duration(500).style("fill-opacity",t=>t.parent===n.root?1:0).style("display",t=>t.parent===n.root?"inline":"none").text(t=>t.children?t.data.name:"@"+t.data.name),a.exit().remove(),setTimeout(()=>{this.zoomTo([n.root.x,n.root.y,2*n.root.r])},2e3)},zoomTo(t){const n=Math.min(this.width,this.height)/t[2];this.view=t,this.label.selectAll(".circle-label").attr("transform",e=>`translate(${(e.x-t[0])*n},${(e.y-t[1])*n})`),this.node.selectAll("circle").attr("transform",e=>`translate(${(e.x-t[0])*n},${(e.y-t[1])*n})`),this.node.selectAll("circle").attr("r",t=>t.r*n)},zoom(t,n){this.focus=n;const e=this,r=this.svg.transition().duration(t.altKey?7500:750).tween("zoom",()=>{const t=as(e.view,[e.focus.x,e.focus.y,2*e.focus.r]);return n=>e.zoomTo(t(n))});this.label.selectAll(".circle-label").filter((function(t){return t.parent===e.focus||"inline"===this.style.display})).transition(r).style("fill-opacity",t=>t.parent===e.focus?1:0).on("start",(function(t){t.parent===e.focus&&(this.style.display="inline")})).on("end",(function(t){t.parent!==e.focus&&(this.style.display="none")})),this.findAncestors(n.data.name)},findAncestors(t){const n=[];while(t)n.unshift({text:t}),t=this.parents.get(t);this.items=n}}},$l=Bl,Il=(e("4e44"),Object(l["a"])($l,Tl,jl,!1,null,"a20ee47a",null)),zl=Il.exports,Ol={name:"CirclePacking",components:{CircleGraph:zl,Ranking:qu},data(){return{title:"Exploring patterns of language variation on social media",clusters:[],options:[],followingList:[],category:"",showingCheckbox:!1,showingTwitters:!1,showingHint2:!1}},created:function(){zu["eventBus"].$on("show-checkbox",this.showCheckbox),zu["eventBus"].$on("select-community",this.showTwitters)},beforeDestroy:function(){zu["eventBus"].$off("show-checkbox",this.showCheckbox),zu["eventBus"].$off("select-community",this.showTwitters)},mounted(){oo("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(t=>{const n=this;t.forEach((function(t){n.clusters.push({text:t.cluster_name,value:t.cluster_name,category:t.category})}))})},methods:{scroll(){document.getElementById("intro-bar").scrollIntoView({behavior:"smooth"})},showCheckbox(t){this.options=t.options,this.category=t.category,this.showingCheckbox=!0,this.showingHint2=!0,this.followingList=[]},showTwitters(t){oo("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(n=>{const e=n.find(n=>n.cluster_name==t);this.followingList=e.top_follows.split(",")}),console.log(this.followingList),this.showingTwitters=!0,this.showingHint2=!1}}},Fl=Ol,Pl=(e("e623"),Object(l["a"])(Fl,Cl,Sl,!1,null,"d08191a0",null)),Rl=Pl.exports,Dl=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"intro-bar"}},[e("h2",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v(" Ranking Communities ")]),e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],attrs:{id:"text-block"}},[e("hr"),e("p",[t._v(" Now that you are familiar with the different communities in Atlanta’s social media environment, do you want to understand which communities lead in different ways? We’ll provide you with a visual ranking tool so you can choose the metric of your preference to rank communities. You can choose this metric of interest in the drop-down menu and since there are too many communities, you’ll be able to scroll and zoom in or out on the barchart with the tool on the left. You just have to move or expand the rectangle and you will se how it helps you navigate the rankings. You’ll learn that while “follow”, “sex” and “Trump” are the largest communities in size, those with highest number of followers are: “Basketball”, “care” and “entrepreneur”. ")])]),e("span",{attrs:{id:"arrow"},on:{click:function(n){return t.scroll()}}},[t._v("╲╱")])])},Hl=[],Vl={name:"CircleIntro",data(){return{}},methods:{scroll(){document.getElementById("page-barchart").scrollIntoView({behavior:"smooth"})}}},Wl=Vl,Ll=(e("3619"),Object(l["a"])(Wl,Dl,Hl,!1,null,"f811c8f2",null)),ql=Ll.exports,Yl=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"intro-scatter"}},[e("h2",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v(" Language Variation & Social Factors ")]),e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],attrs:{id:"text-block"}},[e("hr"),e("p",[t._v(" Now you might be wondering how different characteristics of communities influence semantic change. The graph below will allow you two compare the relationship between two factors in a scatterplot. You’ll be able to choose the factors and also to filter by categories from the drop-down menus on the left. Communities are represented by bubbles in the graph, their color represents the category to which they belong and the size represents the community size. For example, you will notice that the larger the community size, the lower the lexical change, not only for all the categories but generally by each individual category. The best part is that you’ll be able to discover more about each individual community when you hover your mouse over each dot in the graph. Not only will you see the name of the community, but a word cloud will show up on the left displaying the main topic words used in that community. ")])]),e("span",{attrs:{id:"arrow"},on:{click:function(n){return t.scroll()}}},[t._v("╲╱")])])},Ul=[],Xl={name:"CircleIntro",data(){return{}},methods:{scroll(){document.getElementById("page-scatter").scrollIntoView({behavior:"smooth"})}}},Gl=Xl,Jl=(e("a018"),Object(l["a"])(Gl,Yl,Ul,!1,null,"3d82beac",null)),Kl=Jl.exports,Zl={components:{Cover:h,Intro:v,Tutorial:M,CircleIntro:S,BarChart:Gu,ScatterChart:_l,Thanks:El,CirclePacking:Rl,BarIntro:ql,ScatterIntro:Kl},name:"Viz",data(){return{text:"Welcome to Novid"}}},Ql=Zl,tc=(e("f161"),Object(l["a"])(Ql,r,i,!1,null,"c4451052",null));n["default"]=tc.exports},"6a84":function(t,n,e){"use strict";e("d5a4")},"746e":function(t,n,e){"use strict";e("df0b")},"811e":function(t,n,e){"use strict";e("5c1a")},"85e7":function(t,n,e){"use strict";e("2ca9")},"8c24":function(t,n,e){},9106:function(t,n,e){},9193:function(t,n,e){"use strict";e("9106")},9298:function(t,n,e){},"9f52":function(t,n,e){},a018:function(t,n,e){"use strict";e("8c24")},bdb2:function(t,n,e){"use strict";e("3583")},cae8:function(t,n,e){t.exports=e.p+"img/Image5.12c5cf75.png"},cd6b:function(t,n,e){},d5a4:function(t,n,e){},df0b:function(t,n,e){},e2f8:function(t,n,e){"use strict";e("2539")},e623:function(t,n,e){"use strict";e("cd6b")},e6bb:function(t,n,e){},e7a7:function(t,n,e){},f161:function(t,n,e){"use strict";e("1374")}}]);
//# sourceMappingURL=chunk-6d2c7fe0.f5263b84.js.map