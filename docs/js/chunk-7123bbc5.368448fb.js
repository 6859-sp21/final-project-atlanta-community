(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7123bbc5"],{"0931":function(t,n,e){},"0eaa":function(t,n,e){},"1d0b":function(t,n,e){},"23bc":function(t,n,e){},"2d8a":function(t,n,e){!function(n,e){t.exports=e()}(0,(function(){"use strict";function t(t){return"function"==typeof t}function n(){}var e=function(t){this.previousValue=t,this.interrupted=!1,this.interruptHandlers=new Set};function r(t){return function(){return t}}function i(){return[]}e.prototype.throwIfInterrupted=function(){if(this.interrupted)throw new Error},e.prototype.interrupt=function(){this.interrupted||(this.interrupted=!0,this.interruptHandlers.forEach((function(t){try{t()}catch(t){}})))},e.prototype.onInterrupt=function(t){if(this.interrupted&&!this.interruptHandlers.has(t))try{t()}catch(t){}this.interruptHandlers.add(t)};var a={animationDuration:{type:Number,default:1e3},animationEasing:{type:String,default:"ease"},animationOverlap:{type:Number,default:1},color:{type:[String,Function],default:"Black"},createCanvas:{type:Function,default:function(){return document.createElement("canvas")}},createWorker:{type:Function,default:function(t){return new Worker(URL.createObjectURL(new Blob([t])))}},enterAnimation:{type:[Object,String],default:r({opacity:0})},fontFamily:{type:[String,Function],default:"serif"},fontSizeRatio:{type:Number,default:0},fontStyle:{type:[String,Function],default:"normal"},fontVariant:{type:[String,Function],default:"normal"},fontWeight:{type:[String,Function],default:"normal"},leaveAnimation:{type:[Object,String],default:r({opacity:0})},loadFont:{type:Function,default:function(t,n,e,r){return document.fonts.load([n,e,"1px",t].join(" "),r)}},rotation:{type:[Number,Function],default:0},rotationUnit:{type:[String,Function],default:"turn"},spacing:{type:Number,default:0},text:{type:[String,Function],default:""},weight:{type:[Number,Function],default:1},words:{type:Array,default:i}},o=r(null);function s(t){if(t){var n=typeof t;return"object"===n||"function"===n}return!1}function u(t){return"string"==typeof t}var l={animationOptions:function(){var t,n,e,r=this.animationDuration,i=this.enterAnimation,a=this.leaveAnimation;if(s(i)&&s(a)){var l=(t=Object.assign({},i,a),n=o,e={},Object.entries(t).forEach((function(r){var i=r[0],a=r[1];e[i]=n(a,i,t)})),e),c=function(t){Object.assign(t.style,i)},h=function(t,n){setTimeout((function(){Object.assign(t.style,l),setTimeout(n,r)}),1)};return{props:{css:!1},on:{beforeAppear:c,appear:h,beforeEnter:c,enter:h,leave:function(t,n){Object.assign(t.style,a),setTimeout(n,r)}}}}return u(i)&&u(a)?{props:{duration:r,appear:!0,appearActiveClass:i,enterActiveClass:i,leaveActiveClass:a}}:{}},normalizedAnimationOverlap:function(){var t=this.animationOverlap;return(t=Math.abs(t))<1&&(t=1/t),t},separateAnimationDelay:function(){var t=this.cloudWords;return t.length>1?(this.animationDuration-this.separateAnimationDuration)/(t.length-1):0},separateAnimationDuration:function(){var t=this.cloudWords;if(t.length>0){var n=this.animationDuration,e=this.normalizedAnimationOverlap;return n/Math.min(e,t.length)}return 0}},c=Array.isArray;function h(n){return t(n)?n:r(n)}var f=2*Math.PI,d=f/360;function p(t){return void 0===t}function g(t,n){return t.postMessage(n),function(t){return new Promise((function(n,e){var r,i=function(t){var e=t.data;r(),n(e)},a=function(t){var n=t.error;r(),e(n)};r=function(){t.removeEventListener("message",i),t.removeEventListener("error",a)},t.addEventListener("message",i),t.addEventListener("error",a)}))}(t)}function m(t,n,e){return Math.ceil(t*Math.abs(Math.sin(e))+n*Math.abs(Math.cos(e)))}function v(t,n,e){return Math.ceil(t*Math.abs(Math.cos(e))+n*Math.abs(Math.sin(e)))}function y(t,n,e,r,i){return[t,n,e,r+"px",i].join(" ")}function w(t,n){return Math.ceil(t/n)*n}function _(t,n,e){var r=e().getContext("2d");return r.font=n,r.measureText(t).width}var b=function(t,n,e,r,i,a,o){this.t=t,this.i=n,this.o=e,this.u=r,this.s=i,this.h=a,this.l=o,this.v=1,this.m=0,this.p=0,this.g=0},x={M:{configurable:!0},S:{configurable:!0},j:{configurable:!0},F:{configurable:!0},O:{configurable:!0},W:{configurable:!0},A:{configurable:!0},B:{configurable:!0},C:{configurable:!0},L:{configurable:!0},_:{configurable:!0},P:{configurable:!0},T:{configurable:!0},k:{configurable:!0},N:{configurable:!0},D:{configurable:!0},H:{configurable:!0},R:{configurable:!0},U:{configurable:!0}};x.M.get=function(){return this.v},x.M.set=function(t){this.v!==t&&(this.v=t,this.V=void 0)},x.S.get=function(){return y(this.h,this.s,this.u,this.M,this.o)},x.j.get=function(){return void 0===this.q&&(this.q=_(this.t,y(this.h,this.s,this.u,1,this.o),this.l)),this.q},x.F.get=function(){return this.j*this.M},x.O.get=function(){return this.p*this.M},x.O.set=function(t){this.p=t/this.M},x.W.get=function(){return this.g*this.M},x.W.set=function(t){this.g=t/this.M},x.A.get=function(){return v(this.F,this.M,this.i)},x.B.get=function(){return m(this.F,this.M,this.i)},x.C.get=function(){return this.O-this.A/2},x.L.get=function(){return this.W-this.B/2},x._.get=function(){return this.m},x._.set=function(t){this.m!==t&&(this.m=t,this.V=void 0)},x.P.get=function(){return void 0===this.V&&(this.V=function(t,n,e,r,i,a,o,s,u){var l=y(n,e,r,i*=4,a),c=o*i*2,h=c+_(t,l,u),f=c+i,d=u(),p=d.getContext("2d"),g=w(v(h,f,s),4),b=w(m(h,f,s),4);d.width=g,d.height=b,p.translate(g/2,b/2),p.rotate(s),p.font=l,p.textAlign="center",p.textBaseline="middle",p.fillText(t,0,0),c>0&&(p.miterLimit=1,p.lineWidth=c,p.strokeText(t,0,0));for(var x=p.getImageData(0,0,g,b).data,M=[],k=1/0,A=0,E=1/0,N=0,S=g/4,C=b/4,T=0;T<S;++T)for(var j=0;j<C;++j)t:for(var $=0;$<4;++$)for(var B=0;B<4;++B)if(x[4*(g*(4*j+B)+(4*T+$))+3]){M.push([T,j]),k=Math.min(T,k),A=Math.max(T+1,A),E=Math.min(j,E),N=Math.max(j+1,N);break t}return M.length>0?[M.map((function(t){var n=t[0],e=t[1];return[n-k,e-E]})),A-k,N-E,Math.ceil(S/2)-k,Math.ceil(C/2)-E]:[M,0,0,0,0]}(this.t,this.h,this.s,this.u,this.M,this.o,this._,this.i,this.l)),this.V},x.T.get=function(){return this.P[0]},x.k.get=function(){return this.P[1]},x.N.get=function(){return this.P[2]},x.D.get=function(){return this.P[3]},x.H.get=function(){return this.P[4]},x.R.get=function(){return Math.ceil(this.O)-this.D},x.R.set=function(t){this.O=t+this.D},x.U.get=function(){return Math.ceil(this.W)-this.H},x.U.set=function(t){this.W=t+this.H},Object.defineProperties(b.prototype,x);var M={cloudWords:function(t){this.$emit("update:cloudWords",t)},progress:{handler:function(t){this.$emit("update:progress",t)},deep:!0,immediate:!0}},k={updateElementSize:function(){var t=this.$el;t&&(this.elementWidth=t.offsetWidth,this.elementHeight=t.offsetHeight)}},A={name:"VueWordCloud",mixins:[function(r){return{data:function(){var t={};return Object.keys(r).forEach((function(n){t["asyncComputed_trigger_"+n]={}})),t},computed:{},beforeCreate:function(){var i=this,a=new Set;Object.entries(r).forEach((function(r){var o=r[0],s=r[1],u=s.get,l=s.default,c=s.errorHandler;void 0===c&&(c=n);var h,f=!0;i.$options.computed[o]=function(){return this["asyncComputed_trigger_"+o],this["asyncComputed_promise_"+o],l},i.$options.computed["asyncComputed_promise_"+o]=function(){var n=this;h&&(h.interrupt(),a.delete(h)),f&&(f=!1,t(l)&&(l=l.call(this)));var r=new e(l);h=r,a.add(h),new Promise((function(t){t(u.call(n,r))})).then((function(t){r.throwIfInterrupted(),l=t,n["asyncComputed_trigger_"+o]={}})).catch(c)}}))}}}({cloudWords:{get:function(t){var e,r=this,i=this,a=i.elementWidth,o=i.elementHeight,l=i.words,m=i.text,v=i.weight,y=i.rotation,w=i.rotationUnit,_=i.fontFamily,x=i.fontWeight,M=i.fontVariant,k=i.fontStyle,A=i.color,E=i.spacing,N=i.fontSizeRatio,S=i.createCanvas,C=i.loadFont,T=i.createWorker;e=N,N=(e=Math.abs(e))>1?1/e:e;var j=function(t){var n=t[0],e=t[1];return n>e?[1,e/n]:e>n?[n/e,1]:[1,1]}([a,o]);if(a>0&&o>0){var $=h(m),B=h(v),O=h(y),z=h(w),F=h(_),P=h(x),H=h(M),R=h(k),D=h(A);return l=l.map((function(t,n){var e,r,i,a,o,h,g,m,v,y,w;t&&(u(t)?i=t:c(t)?(i=(e=t)[0],a=e[1]):s(t)&&(i=(r=t).text,a=r.weight,o=r.rotation,h=r.rotationUnit,g=r.fontFamily,m=r.fontWeight,v=r.fontVariant,y=r.fontStyle,w=r.color)),p(i)&&(i=$(t,n,l)),p(a)&&(a=B(t,n,l)),p(o)&&(o=O(t,n,l)),p(h)&&(h=z(t,n,l)),p(g)&&(g=F(t,n,l)),p(m)&&(m=P(t,n,l)),p(v)&&(v=H(t,n,l)),p(y)&&(y=R(t,n,l)),p(w)&&(w=D(t,n,l));var _=new b(i,function(){switch(h){case"turn":return o*f;case"deg":return function(t){return t*d}(o)}return o}(),g,m,v,y,S);return Object.assign(_,{J:t,Y:a,G:w}),_})),Promise.resolve().then((function(){return Promise.all(l.map((function(t){var n=t.o,e=t.h,r=t.u,i=t.t;return C(n,e,r,i)})))})).catch(n).then((function(){if((l=l.filter((function(t){return t.F>0})).sort((function(t,n){return n.Y-t.Y}))).length>0){var n=l[0],e=function(t){return t[(n=t,n.length-1)];var n}(l),i=n.Y,s=e.Y;if(s<i){var u=N>0?1/N:s>0?i/s:i<0?s/i:1+i-s;l.forEach((function(t){var n,e,r;t.M=(n=t.Y,(r=1)+(n-(e=s))*(u-r)/(i-e))}))}l.reduceRight((function(t,n){return n.M<2*t?n.M/=t:(t=n.M,n.M=1),n.I=t}),1),l.forEach((function(t){t.M*=4}));var c=T('!function(){"use strict";var r=function(t){self.removeEventListener("message",r);var n,e,a,f,i,u=t.data,o=function(){n={},e=0,a=0,f=0,i=0};o();var s=function(){return Math.ceil((e+a)/2)},v=function(){return Math.ceil((f+i)/2)},c=function(){return{left:s(),top:v(),width:a-e,height:i-f}},l=function(r,t,u){r.forEach((function(r){var o=r[0],s=r[1],v=t+o,c=u+s;n[v+"|"+c]=!0,e=Math.min(v,e),a=Math.max(v+1,a),f=Math.min(c,f),i=Math.max(c+1,i)}))},h=function(r,t,e){return function(r,t,n){var e,a,f=r[0],i=r[1],u=t[0],o=t[1];f>i?(e=1,a=i/f):i>f?(a=1,e=f/i):e=a=1;var s=[u,o];if(n(s))return s;for(var v=u,c=o,l=u,h=o,M=v,d=c;;){u-=e,o-=a,v+=e,c+=a;var m=Math.floor(u),g=Math.floor(o),p=Math.ceil(v),E=Math.ceil(c);if(p>M)for(var L=g;L<E;++L){var x=[p,L];if(n(x))return x}if(E>d)for(var y=p;y>m;--y){var w=[y,E];if(n(w))return w}if(m<l)for(var B=E;B>g;--B){var F=[m,B];if(n(F))return F}if(g<h)for(var b=m;b<p;++b){var j=[b,g];if(n(j))return j}l=m,h=g,M=p,d=E}}(u,[t+s(),e+v()],(function(t){var e=t[0],a=t[1];return function(r,t,e){return r.every((function(r){var a=r[0],f=r[1];return!n[t+a+"|"+(e+f)]}))}(r,e,a)}))};self.postMessage({}),self.addEventListener("message",(function(r){self.postMessage({getBounds:c,put:l,findFit:h,clear:o}[r.data.name].apply(null,r.data.args))}))};self.addEventListener("message",r)}();\n'),h={completedWords:0,totalWords:l.length};return Promise.resolve().then((function(){return t.throwIfInterrupted(),r.progress=h,g(c,j)})).then((function(){t.throwIfInterrupted(),h.completedWords++;var n=Promise.resolve();return l.reduce((function(e,r,i){return n=n.then((function(){return r.I<e.I?Promise.resolve().then((function(){return g(c,{name:"clear"})})).then((function(){var t=Promise.resolve(),n=e.I/r.I;return l.slice(0,i).forEach((function(e){t=t.then((function(){return e.M*=n,g(c,{name:"put",args:[e.T,e.R,e.U]})}))})),t})):g(c,{name:"put",args:[e.T,e.R,e.U]})})).then((function(){return r._=E,g(c,{name:"findFit",args:[r.T,r.R,r.U]})})).then((function(n){var e=n[0],i=n[1];t.throwIfInterrupted(),h.completedWords++,r.R=e,r.U=i,r._=0})),r})),n})).then((function(){return g(c,{name:"put",args:[e.T,e.R,e.U]})})).then((function(){return g(c,{name:"getBounds"})})).then((function(t){var n=t.left,e=t.top,r=t.width,i=t.height;if(r>0&&i>0){var s=Math.min(a/r,o/i);l.forEach((function(t){t.O-=n,t.W-=e,t.M*=s}))}var u=new Set;return l.map((function(t){for(var n=t.J,e=t.t,r=t.Y,i=t.i,a=t.o,o=t.u,s=t.s,l=t.h,c=t.S,h=t.O,f=t.W,d=t.G,p=JSON.stringify([e,a,o,s,l]);u.has(p);)p+="!";return u.add(p),{key:p,word:n,text:e,weight:r,rotation:i,font:c,color:d,left:h,top:f}}))})).finally((function(){c.terminate()})).finally((function(){t.throwIfInterrupted(),r.progress=null}))}return[]}))}return[]},default:i}})],props:a,data:function(){return{elementWidth:0,elementHeight:0,progress:null}},computed:l,watch:M,mounted:function(){var t,n,e=this;t=function(){if(e._isDestroyed)return!1;e.updateElementSize()},n=1e3,function(t){var n=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return t.call.apply(t,[this,n].concat(e))};return n}((function(e){requestAnimationFrame((function(){!1!==t()&&setTimeout(e,n)}))}))()},methods:k,render:function(t){var n=this.$scopedSlots,e=this.animationEasing,r=this.animationOptions,i=this.cloudWords,a=this.separateAnimationDelay,o=this.separateAnimationDuration;return n=Object.assign({},{default:function(t){return t.text}},n),t("div",{style:{height:"100%",position:"relative",width:"100%"}},[t("div",{style:{bottom:"50%",position:"absolute",right:"50%",transform:"translate(50%,50%)"}},i.map((function(i,s){var u=i.color,l=i.font,c=i.left,h=i.rotation,f=i.text,d=i.top,p=i.weight,g=i.word;return t("transition",Object.assign({},r),[t("div",{key:s,style:Object.assign({},{left:c+"px",position:"absolute",top:d+"px"},o>0?{animation:[o+"ms",e,a*s+"ms"].join(" "),transition:["all",o+"ms",e,a*s+"ms"].join(" ")}:{})},[t("div",{style:Object.assign({},{bottom:0,position:"absolute",right:0,transform:["translate(50%,50%)","rotate("+h+"rad)"].join(" ")},o>0?{transition:["all",o+"ms",e,a*s+"ms"].join(" ")}:{})},[t("span",{style:{color:u,display:"inline-block",font:l,lineHeight:1,transform:"translateY(-0.1em)",whiteSpace:"nowrap"}},[n.default({color:u,font:l,left:c,text:f,top:d,weight:p,word:g})])])])])})))])}},E=globalThis.window;if(E){var N=E.Vue;N&&N.component(A.name,A)}return A}))},"3c6b":function(t,n,e){},"3ef5":function(t,n,e){},"44df":function(t,n,e){"use strict";e("5edb")},"4b5e":function(t,n,e){"use strict";e("23bc")},"4d00":function(t,n,e){"use strict";e("d305")},"56d5":function(t,n,e){},"5cd9":function(t,n,e){"use strict";e("e1b9")},"5e50":function(t,n,e){"use strict";e("e3e3")},"5edb":function(t,n,e){},"60d2":function(t,n,e){"use strict";e("3ef5")},"680f":function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("Intro"),e("CirclePacking",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]}),e("Spacing"),e("BarChart",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]}),e("Spacing"),e("SizeChart",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]}),e("Spacing"),e("ScatterChart",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]}),e("Thanks")],1)},i=[],a=function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("div",{attrs:{id:"intro"}},[r("div",{attrs:{id:"title"}},[r("h1",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v(" "+t._s(t.title1)+" ")]),r("h2",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v(" "+t._s(t.title2)+" ")])]),r("div",{attrs:{id:"content"}},[r("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],attrs:{id:"text-block"}},[r("p",[t._v(" Our team will explore how different communities in Atlanta perceive language in different ways. To do this, we’ll be using a dataset of 149 local communities with information about their online behavior on Twitter. Information at the twitter account level allowed us to create summary statistics at the community level such as community size, average number of followers, friends and tweets and understand what are the top follows and topic words in each community. Following a specific methodology, deviations from the normal language can be measured and these deviations are called semantic change. Our main goal is that the user can understand the semantic change in social media across Atlanta’s communities and have a guide for current local trends online. Examples of potential users are journalists, politicians and society as a whole. ")]),r("p",[t._v(' What is Semantic Change? According to wikipedia, Semantic Change is a form of language change regarding the evolution of word usage. For example, if you take the word "Gay", that word\'s usage has drastically changed over the past century. Originally in the 1940s, "Gay" meant happy and joyful. But today, the word "Gay" is associated with the LGBTQIA+ community. Another example is the phrase "What\'s up?". The original meaning of that in English would\'ve meant "what is located above me?", but today it\'s used as a casual way of starting conversation. ')])]),r("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],attrs:{id:"image-block"}},[r("b-img",{attrs:{id:"logo",center:"",src:e("cf05"),alt:"Center image"}})],1)])])},o=[],s={name:"Intro",data(){return{title1:"Exploring patterns of language variation on social media",title2:"A case study in Atlanta online communities"}}},u=s,l=(e("8324"),e("2877")),c=Object(l["a"])(u,a,o,!1,null,"664c7856",null),h=c.exports,f=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"page"},[e("div",{attrs:{id:"left"}},[e("transition",{attrs:{name:"move"}},[t.showingTwitters?e("Twitters",{attrs:{followingList:t.followingList}}):t._e()],1),e("transition",{attrs:{name:"move"}},[t.showingHint2?e("div",{attrs:{id:"hint-2"}},[e("h4",[t._v(" Check a community to see the top follows 👉 ")])]):t._e()])],1),e("div",{ref:"right",attrs:{id:"right"}},[e("BarGraph",{attrs:{clusters:t.clusters}}),e("div",{attrs:{id:"right-bottom"}},[e("transition",{attrs:{name:"fade"}},[t.showingCheckbox?e("Checkbox",{attrs:{options:t.options,category:t.category}}):e("div",{attrs:{id:"hint-1"}},[e("h4",[t._v(" Click the bar to show communities under the category ☝️ ")])])],1)],1)],1)])},d=[],p=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{ref:"chart",attrs:{id:"chart"}},[e("TooltipOne",{attrs:{data:t.tipData,visible:t.tipVisible}}),e("div",{ref:"svg-container",attrs:{id:"svg-container"}})],1)},g=[];function m(t,n){let e;if(void 0===n)for(const r of t)null!=r&&(e<r||void 0===e&&r>=r)&&(e=r);else{let r=-1;for(let i of t)null!=(i=n(i,++r,t))&&(e<i||void 0===e&&i>=i)&&(e=i)}return e}function v(t,n){let e=0;if(void 0===n)for(let r of t)(r=+r)&&(e+=r);else{let r=-1;for(let i of t)(i=+n(i,++r,t))&&(e+=i)}return e}var y=Array.prototype.slice,w=function(t){return t},_=1,b=2,x=3,M=4,k=1e-6;function A(t){return"translate("+t+",0)"}function E(t){return"translate(0,"+t+")"}function N(t){return n=>+t(n)}function S(t,n){return n=Math.max(0,t.bandwidth()-2*n)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function C(){return!this.__axis}function T(t,n){var e=[],r=null,i=null,a=6,o=6,s=3,u="undefined"!==typeof window&&window.devicePixelRatio>1?0:.5,l=t===_||t===M?-1:1,c=t===M||t===b?"x":"y",h=t===_||t===x?A:E;function f(f){var d=null==r?n.ticks?n.ticks.apply(n,e):n.domain():r,p=null==i?n.tickFormat?n.tickFormat.apply(n,e):w:i,g=Math.max(a,0)+s,m=n.range(),v=+m[0]+u,y=+m[m.length-1]+u,A=(n.bandwidth?S:N)(n.copy(),u),E=f.selection?f.selection():f,T=E.selectAll(".domain").data([null]),j=E.selectAll(".tick").data(d,n).order(),$=j.exit(),B=j.enter().append("g").attr("class","tick"),O=j.select("line"),z=j.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),j=j.merge(B),O=O.merge(B.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),z=z.merge(B.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",t===_?"0em":t===x?"0.71em":"0.32em")),f!==E&&(T=T.transition(f),j=j.transition(f),O=O.transition(f),z=z.transition(f),$=$.transition(f).attr("opacity",k).attr("transform",(function(t){return isFinite(t=A(t))?h(t+u):this.getAttribute("transform")})),B.attr("opacity",k).attr("transform",(function(t){var n=this.parentNode.__axis;return h((n&&isFinite(n=n(t))?n:A(t))+u)}))),$.remove(),T.attr("d",t===M||t===b?o?"M"+l*o+","+v+"H"+u+"V"+y+"H"+l*o:"M"+u+","+v+"V"+y:o?"M"+v+","+l*o+"V"+u+"H"+y+"V"+l*o:"M"+v+","+u+"H"+y),j.attr("opacity",1).attr("transform",(function(t){return h(A(t)+u)})),O.attr(c+"2",l*a),z.attr(c,l*g).text(p),E.filter(C).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===b?"start":t===M?"end":"middle"),E.each((function(){this.__axis=A}))}return f.scale=function(t){return arguments.length?(n=t,f):n},f.ticks=function(){return e=y.call(arguments),f},f.tickArguments=function(t){return arguments.length?(e=null==t?[]:y.call(t),f):e.slice()},f.tickValues=function(t){return arguments.length?(r=null==t?null:y.call(t),f):r&&r.slice()},f.tickFormat=function(t){return arguments.length?(i=t,f):i},f.tickSize=function(t){return arguments.length?(a=o=+t,f):a},f.tickSizeInner=function(t){return arguments.length?(a=+t,f):a},f.tickSizeOuter=function(t){return arguments.length?(o=+t,f):o},f.tickPadding=function(t){return arguments.length?(s=+t,f):s},f.offset=function(t){return arguments.length?(u=+t,f):u},f}function j(t){return T(x,t)}function $(t){return T(M,t)}var B={value:()=>{}};function O(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new z(r)}function z(t){this._=t}function F(t,n){return t.trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))}function P(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function H(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=B,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}z.prototype=O.prototype={constructor:z,on:function(t,n){var e,r=this._,i=F(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=n&&"function"!==typeof n)throw new Error("invalid callback: "+n);while(++a<o)if(e=(t=i[a]).type)r[e]=H(r[e],t.name,n);else if(null==n)for(e in r)r[e]=H(r[e],t.name,null);return this}while(++a<o)if((e=(t=i[a]).type)&&(e=P(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new z(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),a=0;a<e;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],a=0,e=r.length;a<e;++a)r[a].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(n,e)}};var R=O;function D(){}var L=function(t){return null==t?D:function(){return this.querySelector(t)}},I=function(t){"function"!==typeof t&&(t=L(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a,o,s=n[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(a=s[c])&&(o=t.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),l[c]=o);return new Fn(r,this._parents)},W=function(t){return"object"===typeof t&&"length"in t?t:Array.from(t)};function q(){return[]}var V=function(t){return null==t?q:function(){return this.querySelectorAll(t)}};function U(t){return function(){var n=t.apply(this,arguments);return null==n?[]:W(n)}}var Y=function(t){t="function"===typeof t?U(t):V(t);for(var n=this._groups,e=n.length,r=[],i=[],a=0;a<e;++a)for(var o,s=n[a],u=s.length,l=0;l<u;++l)(o=s[l])&&(r.push(t.call(o,o.__data__,l,s)),i.push(o));return new Fn(r,i)},G=function(t){return function(){return this.matches(t)}};function X(t){return function(n){return n.matches(t)}}var K=Array.prototype.find;function Z(t){return function(){return K.call(this.children,t)}}function J(){return this.firstElementChild}var Q=function(t){return this.select(null==t?J:Z("function"===typeof t?t:X(t)))},tt=Array.prototype.filter;function nt(){return this.children}function et(t){return function(){return tt.call(this.children,t)}}var rt=function(t){return this.selectAll(null==t?nt:et("function"===typeof t?t:X(t)))},it=function(t){"function"!==typeof t&&(t=G(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a,o=n[i],s=o.length,u=r[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&u.push(a);return new Fn(r,this._parents)},at=function(t){return new Array(t.length)},ot=function(){return new Fn(this._enter||this._groups.map(at),this._parents)};function st(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}st.prototype={constructor:st,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var ut=function(t){return function(){return t}};function lt(t,n,e,r,i,a){for(var o,s=0,u=n.length,l=a.length;s<l;++s)(o=n[s])?(o.__data__=a[s],r[s]=o):e[s]=new st(t,a[s]);for(;s<u;++s)(o=n[s])&&(i[s]=o)}function ct(t,n,e,r,i,a,o){var s,u,l,c=new Map,h=n.length,f=a.length,d=new Array(h);for(s=0;s<h;++s)(u=n[s])&&(d[s]=l=o.call(u,u.__data__,s,n)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<f;++s)l=o.call(t,a[s],s,a)+"",(u=c.get(l))?(r[s]=u,u.__data__=a[s],c.delete(l)):e[s]=new st(t,a[s]);for(s=0;s<h;++s)(u=n[s])&&c.get(d[s])===u&&(i[s]=u)}function ht(t){return t.__data__}var ft=function(t,n){if(!arguments.length)return Array.from(this,ht);var e=n?ct:lt,r=this._parents,i=this._groups;"function"!==typeof t&&(t=ut(t));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var c=r[l],h=i[l],f=h.length,d=W(t.call(c,c&&c.__data__,l,r)),p=d.length,g=s[l]=new Array(p),m=o[l]=new Array(p),v=u[l]=new Array(f);e(c,h,g,m,v,d,n);for(var y,w,_=0,b=0;_<p;++_)if(y=g[_]){_>=b&&(b=_+1);while(!(w=m[b])&&++b<p);y._next=w||null}}return o=new Fn(o,r),o._enter=s,o._exit=u,o},dt=function(){return new Fn(this._exit||this._groups.map(at),this._parents)},pt=function(t,n,e){var r=this.enter(),i=this,a=this.exit();return r="function"===typeof t?t(r):r.append(t+""),null!=n&&(i=n(i)),null==e?a.remove():e(a),r&&i?r.merge(i).order():i},gt=function(t){if(!(t instanceof Fn))throw new Error("invalid merge");for(var n=this._groups,e=t._groups,r=n.length,i=e.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u,l=n[s],c=e[s],h=l.length,f=o[s]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;s<r;++s)o[s]=n[s];return new Fn(o,this._parents)},mt=function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},vt=function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=yt);for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a){for(var o,s=e[a],u=s.length,l=i[a]=new Array(u),c=0;c<u;++c)(o=s[c])&&(l[c]=o);l.sort(n)}return new Fn(i,this._parents).order()};function yt(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}var wt=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},_t=function(){return Array.from(this)},bt=function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},xt=function(){let t=0;for(const n of this)++t;return t},Mt=function(){return!this.node()},kt=function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,a=n[e],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},At="http://www.w3.org/1999/xhtml",Et={svg:"http://www.w3.org/2000/svg",xhtml:At,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Nt=function(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Et.hasOwnProperty(n)?{space:Et[n],local:t}:t};function St(t){return function(){this.removeAttribute(t)}}function Ct(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Tt(t,n){return function(){this.setAttribute(t,n)}}function jt(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function $t(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function Bt(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}var Ot=function(t,n){var e=Nt(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?Ct:St:"function"===typeof n?e.local?Bt:$t:e.local?jt:Tt)(e,n))},zt=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function Ft(t){return function(){this.style.removeProperty(t)}}function Pt(t,n,e){return function(){this.style.setProperty(t,n,e)}}function Ht(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}var Rt=function(t,n,e){return arguments.length>1?this.each((null==n?Ft:"function"===typeof n?Ht:Pt)(t,n,null==e?"":e)):Dt(this.node(),t)};function Dt(t,n){return t.style.getPropertyValue(n)||zt(t).getComputedStyle(t,null).getPropertyValue(n)}function Lt(t){return function(){delete this[t]}}function It(t,n){return function(){this[t]=n}}function Wt(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}var qt=function(t,n){return arguments.length>1?this.each((null==n?Lt:"function"===typeof n?Wt:It)(t,n)):this.node()[t]};function Vt(t){return t.trim().split(/^|\s+/)}function Ut(t){return t.classList||new Yt(t)}function Yt(t){this._node=t,this._names=Vt(t.getAttribute("class")||"")}function Gt(t,n){var e=Ut(t),r=-1,i=n.length;while(++r<i)e.add(n[r])}function Xt(t,n){var e=Ut(t),r=-1,i=n.length;while(++r<i)e.remove(n[r])}function Kt(t){return function(){Gt(this,t)}}function Zt(t){return function(){Xt(this,t)}}function Jt(t,n){return function(){(n.apply(this,arguments)?Gt:Xt)(this,t)}}Yt.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Qt=function(t,n){var e=Vt(t+"");if(arguments.length<2){var r=Ut(this.node()),i=-1,a=e.length;while(++i<a)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"===typeof n?Jt:n?Kt:Zt)(e,n))};function tn(){this.textContent=""}function nn(t){return function(){this.textContent=t}}function en(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}var rn=function(t){return arguments.length?this.each(null==t?tn:("function"===typeof t?en:nn)(t)):this.node().textContent};function an(){this.innerHTML=""}function on(t){return function(){this.innerHTML=t}}function sn(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}var un=function(t){return arguments.length?this.each(null==t?an:("function"===typeof t?sn:on)(t)):this.node().innerHTML};function ln(){this.nextSibling&&this.parentNode.appendChild(this)}var cn=function(){return this.each(ln)};function hn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}var fn=function(){return this.each(hn)};function dn(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===At&&n.documentElement.namespaceURI===At?n.createElement(t):n.createElementNS(e,t)}}function pn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var gn=function(t){var n=Nt(t);return(n.local?pn:dn)(n)},mn=function(t){var n="function"===typeof t?t:gn(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))};function vn(){return null}var yn=function(t,n){var e="function"===typeof t?t:gn(t),r=null==n?vn:"function"===typeof n?n:L(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))};function wn(){var t=this.parentNode;t&&t.removeChild(this)}var _n=function(){return this.each(wn)};function bn(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function xn(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}var Mn=function(t){return this.select(t?xn:bn)},kn=function(t){return arguments.length?this.property("__data__",t):this.node().__data__};function An(t){return function(n){t.call(this,n,this.__data__)}}function En(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}function Nn(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,a=n.length;r<a;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?n.length=i:delete this.__on}}}function Sn(t,n,e){return function(){var r,i=this.__on,a=An(n);if(i)for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=e),void(r.value=n);this.addEventListener(t.type,a,e),r={type:t.type,name:t.name,value:n,listener:a,options:e},i?i.push(r):this.__on=[r]}}var Cn=function(t,n,e){var r,i,a=En(t+""),o=a.length;if(!(arguments.length<2)){for(s=n?Sn:Nn,r=0;r<o;++r)this.each(s(a[r],n,e));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<o;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value};function Tn(t,n,e){var r=zt(t),i=r.CustomEvent;"function"===typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function jn(t,n){return function(){return Tn(this,t,n)}}function $n(t,n){return function(){return Tn(this,t,n.apply(this,arguments))}}var Bn=function(t,n){return this.each(("function"===typeof n?$n:jn)(t,n))},On=function*(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,i=t[n],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)},zn=[null];function Fn(t,n){this._groups=t,this._parents=n}function Pn(){return new Fn([[document.documentElement]],zn)}function Hn(){return this}Fn.prototype=Pn.prototype={constructor:Fn,select:I,selectAll:Y,selectChild:Q,selectChildren:rt,filter:it,data:ft,enter:ot,exit:dt,join:pt,merge:gt,selection:Hn,order:mt,sort:vt,call:wt,nodes:_t,node:bt,size:xt,empty:Mt,each:kt,attr:Ot,style:Rt,property:qt,classed:Qt,text:rn,html:un,raise:cn,lower:fn,append:mn,insert:yn,remove:_n,clone:Mn,datum:kn,on:Cn,dispatch:Bn,[Symbol.iterator]:On};var Rn=Pn,Dn=function(t){return"string"===typeof t?new Fn([[document.querySelector(t)]],[document.documentElement]):new Fn([[t]],zn)};var Ln=function(t){t.preventDefault(),t.stopImmediatePropagation()},In=function(t){var n=t.document.documentElement,e=Dn(t).on("dragstart.drag",Ln,!0);"onselectstart"in n?e.on("selectstart.drag",Ln,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")};function Wn(t,n){var e=t.document.documentElement,r=Dn(t).on("dragstart.drag",null);n&&(r.on("click.drag",Ln,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}var qn=function(t,n,e){t.prototype=n.prototype=e,e.constructor=t};function Vn(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Un(){}var Yn=.7,Gn=1/Yn,Xn="\\s*([+-]?\\d+)\\s*",Kn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jn=/^#([0-9a-f]{3,8})$/,Qn=new RegExp("^rgb\\("+[Xn,Xn,Xn]+"\\)$"),te=new RegExp("^rgb\\("+[Zn,Zn,Zn]+"\\)$"),ne=new RegExp("^rgba\\("+[Xn,Xn,Xn,Kn]+"\\)$"),ee=new RegExp("^rgba\\("+[Zn,Zn,Zn,Kn]+"\\)$"),re=new RegExp("^hsl\\("+[Kn,Zn,Zn]+"\\)$"),ie=new RegExp("^hsla\\("+[Kn,Zn,Zn,Kn]+"\\)$"),ae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function oe(){return this.rgb().formatHex()}function se(){return we(this).formatHsl()}function ue(){return this.rgb().formatRgb()}function le(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=Jn.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?ce(n):3===e?new pe(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?he(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?he(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=Qn.exec(t))?new pe(n[1],n[2],n[3],1):(n=te.exec(t))?new pe(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=ne.exec(t))?he(n[1],n[2],n[3],n[4]):(n=ee.exec(t))?he(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=re.exec(t))?ye(n[1],n[2]/100,n[3]/100,1):(n=ie.exec(t))?ye(n[1],n[2]/100,n[3]/100,n[4]):ae.hasOwnProperty(t)?ce(ae[t]):"transparent"===t?new pe(NaN,NaN,NaN,0):null}function ce(t){return new pe(t>>16&255,t>>8&255,255&t,1)}function he(t,n,e,r){return r<=0&&(t=n=e=NaN),new pe(t,n,e,r)}function fe(t){return t instanceof Un||(t=le(t)),t?(t=t.rgb(),new pe(t.r,t.g,t.b,t.opacity)):new pe}function de(t,n,e,r){return 1===arguments.length?fe(t):new pe(t,n,e,null==r?1:r)}function pe(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function ge(){return"#"+ve(this.r)+ve(this.g)+ve(this.b)}function me(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ve(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function ye(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new be(t,n,e,r)}function we(t){if(t instanceof be)return new be(t.h,t.s,t.l,t.opacity);if(t instanceof Un||(t=le(t)),!t)return new be;if(t instanceof be)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),a=Math.max(n,e,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=n===a?(e-r)/s+6*(e<r):e===a?(r-n)/s+2:(n-e)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new be(o,s,u,t.opacity)}function _e(t,n,e,r){return 1===arguments.length?we(t):new be(t,n,e,null==r?1:r)}function be(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function xe(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}function Me(t,n,e,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*n+(4-6*a+3*o)*e+(1+3*t+3*a-3*o)*r+o*i)/6}qn(Un,le,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:oe,formatHex:oe,formatHsl:se,formatRgb:ue,toString:ue}),qn(pe,de,Vn(Un,{brighter:function(t){return t=null==t?Gn:Math.pow(Gn,t),new pe(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Yn:Math.pow(Yn,t),new pe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ge,formatHex:ge,formatRgb:me,toString:me})),qn(be,_e,Vn(Un,{brighter:function(t){return t=null==t?Gn:Math.pow(Gn,t),new be(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Yn:Math.pow(Yn,t),new be(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new pe(xe(t>=240?t-240:t+120,i,r),xe(t,i,r),xe(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var ke=function(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<n-1?t[r+2]:2*a-i;return Me((e-r/n)*n,o,i,a,s)}},Ae=function(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],a=t[r%n],o=t[(r+1)%n],s=t[(r+2)%n];return Me((e-r/n)*n,i,a,o,s)}},Ee=t=>()=>t;function Ne(t,n){return function(e){return t+e*n}}function Se(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function Ce(t,n){var e=n-t;return e?Ne(t,e>180||e<-180?e-360*Math.round(e/360):e):Ee(isNaN(t)?n:t)}function Te(t){return 1===(t=+t)?je:function(n,e){return e-n?Se(n,e,t):Ee(isNaN(n)?e:n)}}function je(t,n){var e=n-t;return e?Ne(t,e):Ee(isNaN(t)?n:t)}var $e=function t(n){var e=Te(n);function r(t,n){var r=e((t=de(t)).r,(n=de(n)).r),i=e(t.g,n.g),a=e(t.b,n.b),o=je(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=a(n),t.opacity=o(n),t+""}}return r.gamma=t,r}(1);function Be(t){return function(n){var e,r,i=n.length,a=new Array(i),o=new Array(i),s=new Array(i);for(e=0;e<i;++e)r=de(n[e]),a[e]=r.r||0,o[e]=r.g||0,s[e]=r.b||0;return a=t(a),o=t(o),s=t(s),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=s(t),r+""}}}Be(ke),Be(Ae);var Oe=function(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(a){for(e=0;e<r;++e)i[e]=t[e]*(1-a)+n[e]*a;return i}};function ze(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Fe(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(e=0;e<i;++e)a[e]=Ye(t[e],n[e]);for(;e<r;++e)o[e]=n[e];return function(t){for(e=0;e<i;++e)o[e]=a[e](t);return o}}var Pe=function(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}},He=function(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}},Re=function(t,n){var e,r={},i={};for(e in null!==t&&"object"===typeof t||(t={}),null!==n&&"object"===typeof n||(n={}),n)e in t?r[e]=Ye(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}},De=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Le=new RegExp(De.source,"g");function Ie(t){return function(){return t}}function We(t){return function(n){return t(n)+""}}var qe,Ve,Ue=function(t,n){var e,r,i,a=De.lastIndex=Le.lastIndex=0,o=-1,s=[],u=[];t+="",n+="";while((e=De.exec(t))&&(r=Le.exec(n)))(i=r.index)>a&&(i=n.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(e=e[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:He(e,r)})),a=Le.lastIndex;return a<n.length&&(i=n.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?We(u[0].x):Ie(n):(n=u.length,function(t){for(var e,r=0;r<n;++r)s[(e=u[r]).i]=e.x(t);return s.join("")})},Ye=function(t,n){var e,r=typeof n;return null==n||"boolean"===r?Ee(n):("number"===r?He:"string"===r?(e=le(n))?(n=e,$e):Ue:n instanceof le?$e:n instanceof Date?Pe:ze(n)?Oe:Array.isArray(n)?Fe:"function"!==typeof n.valueOf&&"function"!==typeof n.toString||isNaN(n)?Re:He)(t,n)},Ge=function(t){let n;while(n=t.sourceEvent)t=n;return t},Xe=function(t,n){if(t=Ge(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]},Ke=0,Ze=0,Je=0,Qe=1e3,tr=0,nr=0,er=0,rr="object"===typeof performance&&performance.now?performance:Date,ir="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ar(){return nr||(ir(or),nr=rr.now()+er)}function or(){nr=0}function sr(){this._call=this._time=this._next=null}function ur(t,n,e){var r=new sr;return r.restart(t,n,e),r}function lr(){ar(),++Ke;var t,n=qe;while(n)(t=nr-n._time)>=0&&n._call.call(null,t),n=n._next;--Ke}function cr(){nr=(tr=rr.now())+er,Ke=Ze=0;try{lr()}finally{Ke=0,fr(),nr=0}}function hr(){var t=rr.now(),n=t-tr;n>Qe&&(er-=n,tr=t)}function fr(){var t,n,e=qe,r=1/0;while(e)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:qe=n);Ve=t,dr(r)}function dr(t){if(!Ke){Ze&&(Ze=clearTimeout(Ze));var n=t-nr;n>24?(t<1/0&&(Ze=setTimeout(cr,t-rr.now()-er)),Je&&(Je=clearInterval(Je))):(Je||(tr=rr.now(),Je=setInterval(hr,Qe)),Ke=1,ir(cr))}}sr.prototype=ur.prototype={constructor:sr,restart:function(t,n,e){if("function"!==typeof t)throw new TypeError("callback is not a function");e=(null==e?ar():+e)+(null==n?0:+n),this._next||Ve===this||(Ve?Ve._next=this:qe=this,Ve=this),this._call=t,this._time=e,dr()},stop:function(){this._call&&(this._call=null,this._time=1/0,dr())}};var pr=function(t,n,e){var r=new sr;return n=null==n?0:+n,r.restart(e=>{r.stop(),t(e+n)},n,e),r},gr=R("start","end","cancel","interrupt"),mr=[],vr=0,yr=1,wr=2,_r=3,br=4,xr=5,Mr=6,kr=function(t,n,e,r,i,a){var o=t.__transition;if(o){if(e in o)return}else t.__transition={};Sr(t,e,{name:n,index:r,group:i,on:gr,tween:mr,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:vr})};function Ar(t,n){var e=Nr(t,n);if(e.state>vr)throw new Error("too late; already scheduled");return e}function Er(t,n){var e=Nr(t,n);if(e.state>_r)throw new Error("too late; already running");return e}function Nr(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Sr(t,n,e){var r,i=t.__transition;function a(t){e.state=yr,e.timer.restart(o,e.delay,e.time),e.delay<=t&&o(t-e.delay)}function o(a){var l,c,h,f;if(e.state!==yr)return u();for(l in i)if(f=i[l],f.name===e.name){if(f.state===_r)return pr(o);f.state===br?(f.state=Mr,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[l]):+l<n&&(f.state=Mr,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[l])}if(pr((function(){e.state===_r&&(e.state=br,e.timer.restart(s,e.delay,e.time),s(a))})),e.state=wr,e.on.call("start",t,t.__data__,e.index,e.group),e.state===wr){for(e.state=_r,r=new Array(h=e.tween.length),l=0,c=-1;l<h;++l)(f=e.tween[l].value.call(t,t.__data__,e.index,e.group))&&(r[++c]=f);r.length=c+1}}function s(n){var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(u),e.state=xr,1),a=-1,o=r.length;while(++a<o)r[a].call(t,i);e.state===xr&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){for(var r in e.state=Mr,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=ur(a,0,e.time)}var Cr,Tr=function(t,n){var e,r,i,a=t.__transition,o=!0;if(a){for(i in n=null==n?null:n+"",a)(e=a[i]).name===n?(r=e.state>wr&&e.state<xr,e.state=Mr,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete a[i]):o=!1;o&&delete t.__transition}},jr=function(t){return this.each((function(){Tr(this,t)}))},$r=180/Math.PI,Br={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Or=function(t,n,e,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+n*n))&&(t/=o,n/=o),(u=t*e+n*r)&&(e-=t*u,r-=n*u),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,u/=s),t*r<n*e&&(t=-t,n=-n,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(n,t)*$r,skewX:Math.atan(u)*$r,scaleX:o,scaleY:s}};function zr(t){const n=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Br:Or(n.a,n.b,n.c,n.d,n.e,n.f)}function Fr(t){return null==t?Br:(Cr||(Cr=document.createElementNS("http://www.w3.org/2000/svg","g")),Cr.setAttribute("transform",t),(t=Cr.transform.baseVal.consolidate())?(t=t.matrix,Or(t.a,t.b,t.c,t.d,t.e,t.f)):Br)}function Pr(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}function a(t,r,i,a,o,s){if(t!==i||r!==a){var u=o.push("translate(",null,n,null,e);s.push({i:u-4,x:He(t,i)},{i:u-2,x:He(r,a)})}else(i||a)&&o.push("translate("+i+n+a+e)}function o(t,n,e,a){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),a.push({i:e.push(i(e)+"rotate(",null,r)-2,x:He(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}function s(t,n,e,a){t!==n?a.push({i:e.push(i(e)+"skewX(",null,r)-2,x:He(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}function u(t,n,e,r,a,o){if(t!==e||n!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:He(t,e)},{i:s-2,x:He(n,r)})}else 1===e&&1===r||a.push(i(a)+"scale("+e+","+r+")")}return function(n,e){var r=[],i=[];return n=t(n),e=t(e),a(n.translateX,n.translateY,e.translateX,e.translateY,r,i),o(n.rotate,e.rotate,r,i),s(n.skewX,e.skewX,r,i),u(n.scaleX,n.scaleY,e.scaleX,e.scaleY,r,i),n=e=null,function(t){var n,e=-1,a=i.length;while(++e<a)r[(n=i[e]).i]=n.x(t);return r.join("")}}}var Hr=Pr(zr,"px, ","px)","deg)"),Rr=Pr(Fr,", ",")",")");function Dr(t,n){var e,r;return function(){var i=Er(this,t),a=i.tween;if(a!==e){r=e=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===n){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Lr(t,n,e){var r,i;if("function"!==typeof e)throw new Error;return function(){var a=Er(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:n,value:e},u=0,l=i.length;u<l;++u)if(i[u].name===n){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}var Ir=function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=Nr(this.node(),e).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==n?Dr:Lr)(e,t,n))};function Wr(t,n,e){var r=t._id;return t.each((function(){var t=Er(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)})),function(t){return Nr(t,r).value[n]}}var qr=function(t,n){var e;return("number"===typeof n?He:n instanceof le?$e:(e=le(n))?(n=e,$e):Ue)(t,n)};function Vr(t){return function(){this.removeAttribute(t)}}function Ur(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Yr(t,n,e){var r,i,a=e+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=n(r=o,e)}}function Gr(t,n,e){var r,i,a=e+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=n(r=o,e)}}function Xr(t,n,e){var r,i,a;return function(){var o,s,u=e(this);if(null!=u)return o=this.getAttribute(t),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=n(r=o,u));this.removeAttribute(t)}}function Kr(t,n,e){var r,i,a;return function(){var o,s,u=e(this);if(null!=u)return o=this.getAttributeNS(t.space,t.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=n(r=o,u));this.removeAttributeNS(t.space,t.local)}}var Zr=function(t,n){var e=Nt(t),r="transform"===e?Rr:qr;return this.attrTween(t,"function"===typeof n?(e.local?Kr:Xr)(e,r,Wr(this,"attr."+t,n)):null==n?(e.local?Ur:Vr)(e):(e.local?Gr:Yr)(e,r,n))};function Jr(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function Qr(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function ti(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&Qr(t,i)),e}return i._value=n,i}function ni(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&Jr(t,i)),e}return i._value=n,i}var ei=function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!==typeof n)throw new Error;var r=Nt(t);return this.tween(e,(r.local?ti:ni)(r,n))};function ri(t,n){return function(){Ar(this,t).delay=+n.apply(this,arguments)}}function ii(t,n){return n=+n,function(){Ar(this,t).delay=n}}var ai=function(t){var n=this._id;return arguments.length?this.each(("function"===typeof t?ri:ii)(n,t)):Nr(this.node(),n).delay};function oi(t,n){return function(){Er(this,t).duration=+n.apply(this,arguments)}}function si(t,n){return n=+n,function(){Er(this,t).duration=n}}var ui=function(t){var n=this._id;return arguments.length?this.each(("function"===typeof t?oi:si)(n,t)):Nr(this.node(),n).duration};function li(t,n){if("function"!==typeof n)throw new Error;return function(){Er(this,t).ease=n}}var ci=function(t){var n=this._id;return arguments.length?this.each(li(n,t)):Nr(this.node(),n).ease};function hi(t,n){return function(){var e=n.apply(this,arguments);if("function"!==typeof e)throw new Error;Er(this,t).ease=e}}var fi=function(t){if("function"!==typeof t)throw new Error;return this.each(hi(this._id,t))},di=function(t){"function"!==typeof t&&(t=G(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a,o=n[i],s=o.length,u=r[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&u.push(a);return new Ii(r,this._parents,this._name,this._id)},pi=function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u,l=n[s],c=e[s],h=l.length,f=o[s]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;s<r;++s)o[s]=n[s];return new Ii(o,this._parents,this._name,this._id)};function gi(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t}))}function mi(t,n,e){var r,i,a=gi(n)?Ar:Er;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(n,e),o.on=i}}var vi=function(t,n){var e=this._id;return arguments.length<2?Nr(this.node(),e).on.on(t):this.each(mi(e,t,n))};function yi(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}var wi=function(){return this.on("end.remove",yi(this._id))},_i=function(t){var n=this._name,e=this._id;"function"!==typeof t&&(t=L(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,u,l=r[o],c=l.length,h=a[o]=new Array(c),f=0;f<c;++f)(s=l[f])&&(u=t.call(s,s.__data__,f,l))&&("__data__"in s&&(u.__data__=s.__data__),h[f]=u,kr(h[f],n,e,f,h,Nr(s,e)));return new Ii(a,this._parents,n,e)},bi=function(t){var n=this._name,e=this._id;"function"!==typeof t&&(t=V(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,h=0;h<c;++h)if(u=l[h]){for(var f,d=t.call(u,u.__data__,h,l),p=Nr(u,e),g=0,m=d.length;g<m;++g)(f=d[g])&&kr(f,n,e,g,d,p);a.push(d),o.push(u)}return new Ii(a,o,n,e)},xi=Rn.prototype.constructor,Mi=function(){return new xi(this._groups,this._parents)};function ki(t,n){var e,r,i;return function(){var a=Dt(this,t),o=(this.style.removeProperty(t),Dt(this,t));return a===o?null:a===e&&o===r?i:i=n(e=a,r=o)}}function Ai(t){return function(){this.style.removeProperty(t)}}function Ei(t,n,e){var r,i,a=e+"";return function(){var o=Dt(this,t);return o===a?null:o===r?i:i=n(r=o,e)}}function Ni(t,n,e){var r,i,a;return function(){var o=Dt(this,t),s=e(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=Dt(this,t)),o===u?null:o===r&&u===i?a:(i=u,a=n(r=o,s))}}function Si(t,n){var e,r,i,a,o="style."+n,s="end."+o;return function(){var u=Er(this,t),l=u.on,c=null==u.value[o]?a||(a=Ai(n)):void 0;l===e&&i===c||(r=(e=l).copy()).on(s,i=c),u.on=r}}var Ci=function(t,n,e){var r="transform"===(t+="")?Hr:qr;return null==n?this.styleTween(t,ki(t,r)).on("end.style."+t,Ai(t)):"function"===typeof n?this.styleTween(t,Ni(t,r,Wr(this,"style."+t,n))).each(Si(this._id,t)):this.styleTween(t,Ei(t,r,n),e).on("end.style."+t,null)};function Ti(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function ji(t,n,e){var r,i;function a(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&Ti(t,a,e)),r}return a._value=n,a}var $i=function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!==typeof n)throw new Error;return this.tween(r,ji(t,n,null==e?"":e))};function Bi(t){return function(){this.textContent=t}}function Oi(t){return function(){var n=t(this);this.textContent=null==n?"":n}}var zi=function(t){return this.tween("text","function"===typeof t?Oi(Wr(this,"text",t)):Bi(null==t?"":t+""))};function Fi(t){return function(n){this.textContent=t.call(this,n)}}function Pi(t){var n,e;function r(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&Fi(r)),n}return r._value=t,r}var Hi=function(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;return this.tween(n,Pi(t))},Ri=function(){for(var t=this._name,n=this._id,e=qi(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],u=s.length,l=0;l<u;++l)if(o=s[l]){var c=Nr(o,n);kr(o,t,e,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ii(r,this._parents,t,e)},Di=function(){var t,n,e=this,r=e._id,i=e.size();return new Promise((function(a,o){var s={value:o},u={value:function(){0===--i&&a()}};e.each((function(){var e=Er(this,r),i=e.on;i!==t&&(n=(t=i).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(u)),e.on=n})),0===i&&a()}))},Li=0;function Ii(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Wi(t){return Rn().transition(t)}function qi(){return++Li}var Vi=Rn.prototype;function Ui(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Ii.prototype=Wi.prototype={constructor:Ii,select:_i,selectAll:bi,filter:di,merge:pi,selection:Mi,transition:Ri,call:Vi.call,nodes:Vi.nodes,node:Vi.node,size:Vi.size,empty:Vi.empty,each:Vi.each,on:vi,attr:Zr,attrTween:ei,style:Ci,styleTween:$i,text:zi,textTween:Hi,remove:wi,tween:Ir,delay:ai,duration:ui,ease:ci,easeVarying:fi,end:Di,[Symbol.iterator]:Vi[Symbol.iterator]};var Yi={time:null,delay:0,duration:250,ease:Ui};function Gi(t,n){var e;while(!(e=t.__transition)||!(e=e[n]))if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}var Xi=function(t){var n,e;t instanceof Ii?(n=t._id,t=t._name):(n=qi(),(e=Yi).time=ar(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],u=s.length,l=0;l<u;++l)(o=s[l])&&kr(o,t,n,l,s,e||Gi(o,n));return new Ii(r,this._parents,t,n)};Rn.prototype.interrupt=jr,Rn.prototype.transition=Xi;var Ki=t=>()=>t;function Zi(t,{sourceEvent:n,target:e,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Ji(t){t.stopImmediatePropagation()}var Qi=function(t){t.preventDefault(),t.stopImmediatePropagation()},ta={name:"drag"},na={name:"space"},ea={name:"handle"},ra={name:"center"};const{abs:ia,max:aa,min:oa}=Math;function sa(t){return[+t[0],+t[1]]}function ua(t){return[sa(t[0]),sa(t[1])]}var la={name:"x",handles:["w","e"].map(ma),input:function(t,n){return null==t?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ca={name:"y",handles:["n","s"].map(ma),input:function(t,n){return null==t?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},ha=(["n","w","e","s","nw","ne","sw","se"].map(ma),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),fa={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},da={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},pa={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ga={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ma(t){return{type:t}}function va(t){return!t.ctrlKey&&!t.button}function ya(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function wa(){return navigator.maxTouchPoints||"ontouchstart"in this}function _a(t){while(!t.__brush)if(!(t=t.parentNode))return;return t.__brush}function ba(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function xa(){return Ma(ca)}function Ma(t){var n,e=ya,r=va,i=wa,a=!0,o=R("start","brush","end"),s=6;function u(n){var e=n.property("__brush",g).selectAll(".overlay").data([ma("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ha.overlay).merge(e).each((function(){var t=_a(this).extent;Dn(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),n.selectAll(".selection").data([ma("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ha.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=n.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return ha[t.type]})),n.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(i).on("touchstart.brush",f).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){var t=Dn(this),n=_a(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?n[1][0]-s/2:n[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?n[1][1]-s/2:n[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(t,n,e){var r=t.__brush.emitter;return!r||e&&r.clean?new h(t,n,e):r}function h(t,n,e){this.that=t,this.args=n,this.state=t.__brush,this.active=0,this.clean=e}function f(e){if((!n||e.touches)&&r.apply(this,arguments)){var i,o,s,u,h,f,d,p,g,m,v,y=this,w=e.target.__data__.type,_="selection"===(a&&e.metaKey?w="overlay":w)?ta:a&&e.altKey?ra:ea,b=t===ca?null:pa[w],x=t===la?null:ga[w],M=_a(y),k=M.extent,A=M.selection,E=k[0][0],N=k[0][1],S=k[1][0],C=k[1][1],T=0,j=0,$=b&&x&&a&&e.shiftKey,B=Array.from(e.touches||[e],t=>{const n=t.identifier;return t=Xe(t,y),t.point0=t.slice(),t.identifier=n,t});if("overlay"===w){A&&(g=!0);const n=[B[0],B[1]||B[0]];M.selection=A=[[i=t===ca?E:oa(n[0][0],n[1][0]),s=t===la?N:oa(n[0][1],n[1][1])],[h=t===ca?S:aa(n[0][0],n[1][0]),d=t===la?C:aa(n[0][1],n[1][1])]],B.length>1&&R()}else i=A[0][0],s=A[0][1],h=A[1][0],d=A[1][1];o=i,u=s,f=h,p=d;var O=Dn(y).attr("pointer-events","none"),z=O.selectAll(".overlay").attr("cursor",ha[w]);Tr(y);var F=c(y,arguments,!0).beforestart();if(e.touches)F.moved=H,F.ended=D;else{var P=Dn(e.view).on("mousemove.brush",H,!0).on("mouseup.brush",D,!0);a&&P.on("keydown.brush",L,!0).on("keyup.brush",I,!0),In(e.view)}l.call(y),F.start(e,_.name)}function H(t){for(const n of t.changedTouches||[t])for(const t of B)t.identifier===n.identifier&&(t.cur=Xe(n,y));if($&&!m&&!v&&1===B.length){const t=B[0];ia(t.cur[0]-t[0])>ia(t.cur[1]-t[1])?v=!0:m=!0}for(const n of B)n.cur&&(n[0]=n.cur[0],n[1]=n.cur[1]);g=!0,Qi(t),R(t)}function R(t){const n=B[0],e=n.point0;var r;switch(T=n[0]-e[0],j=n[1]-e[1],_){case na:case ta:b&&(T=aa(E-i,oa(S-h,T)),o=i+T,f=h+T),x&&(j=aa(N-s,oa(C-d,j)),u=s+j,p=d+j);break;case ea:B[1]?(b&&(o=aa(E,oa(S,B[0][0])),f=aa(E,oa(S,B[1][0])),b=1),x&&(u=aa(N,oa(C,B[0][1])),p=aa(N,oa(C,B[1][1])),x=1)):(b<0?(T=aa(E-i,oa(S-i,T)),o=i+T,f=h):b>0&&(T=aa(E-h,oa(S-h,T)),o=i,f=h+T),x<0?(j=aa(N-s,oa(C-s,j)),u=s+j,p=d):x>0&&(j=aa(N-d,oa(C-d,j)),u=s,p=d+j));break;case ra:b&&(o=aa(E,oa(S,i-T*b)),f=aa(E,oa(S,h+T*b))),x&&(u=aa(N,oa(C,s-j*x)),p=aa(N,oa(C,d+j*x)));break}f<o&&(b*=-1,r=i,i=h,h=r,r=o,o=f,f=r,w in fa&&z.attr("cursor",ha[w=fa[w]])),p<u&&(x*=-1,r=s,s=d,d=r,r=u,u=p,p=r,w in da&&z.attr("cursor",ha[w=da[w]])),M.selection&&(A=M.selection),m&&(o=A[0][0],f=A[1][0]),v&&(u=A[0][1],p=A[1][1]),A[0][0]===o&&A[0][1]===u&&A[1][0]===f&&A[1][1]===p||(M.selection=[[o,u],[f,p]],l.call(y),F.brush(t,_.name))}function D(t){if(Ji(t),t.touches){if(t.touches.length)return;n&&clearTimeout(n),n=setTimeout((function(){n=null}),500)}else Wn(t.view,g),P.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);O.attr("pointer-events","all"),z.attr("cursor",ha.overlay),M.selection&&(A=M.selection),ba(A)&&(M.selection=null,l.call(y)),F.end(t,_.name)}function L(t){switch(t.keyCode){case 16:$=b&&x;break;case 18:_===ea&&(b&&(h=f-T*b,i=o+T*b),x&&(d=p-j*x,s=u+j*x),_=ra,R());break;case 32:_!==ea&&_!==ra||(b<0?h=f-T:b>0&&(i=o-T),x<0?d=p-j:x>0&&(s=u-j),_=na,z.attr("cursor",ha.selection),R());break;default:return}Qi(t)}function I(t){switch(t.keyCode){case 16:$&&(m=v=$=!1,R());break;case 18:_===ra&&(b<0?h=f:b>0&&(i=o),x<0?d=p:x>0&&(s=u),_=ea,R());break;case 32:_===na&&(t.altKey?(b&&(h=f-T*b,i=o+T*b),x&&(d=p-j*x,s=u+j*x),_=ra):(b<0?h=f:b>0&&(i=o),x<0?d=p:x>0&&(s=u),_=ea),z.attr("cursor",ha[w]),R());break;default:return}Qi(t)}}function d(t){c(this,arguments).moved(t)}function p(t){c(this,arguments).ended(t)}function g(){var n=this.__brush||{selection:null};return n.extent=ua(e.apply(this,arguments)),n.dim=t,n}return u.move=function(n,e){n.tween?n.on("start.brush",(function(t){c(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){c(this,arguments).end(t)})).tween("brush",(function(){var n=this,r=n.__brush,i=c(n,arguments),a=r.selection,o=t.input("function"===typeof e?e.apply(this,arguments):e,r.extent),s=Ye(a,o);function u(t){r.selection=1===t&&null===o?null:s(t),l.call(n),i.brush()}return null!==a&&null!==o?u:u(1)})):n.each((function(){var n=this,r=arguments,i=n.__brush,a=t.input("function"===typeof e?e.apply(n,r):e,i.extent),o=c(n,r).beforestart();Tr(n),i.selection=null===a?null:a,l.call(n),o.start().brush().end()}))},u.clear=function(t){u.move(t,null)},h.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,n){return this.starting?(this.starting=!1,this.emit("start",t,n)):this.emit("brush",t),this},brush:function(t,n){return this.emit("brush",t,n),this},end:function(t,n){return 0===--this.active&&(delete this.state.emitter,this.emit("end",t,n)),this},emit:function(n,e,r){var i=Dn(this.that).datum();o.call(n,this.that,new Zi(n,{sourceEvent:e,target:u,selection:t.output(this.state.selection),mode:r,dispatch:o}),i)}},u.extent=function(t){return arguments.length?(e="function"===typeof t?t:Ki(ua(t)),u):e},u.filter=function(t){return arguments.length?(r="function"===typeof t?t:Ki(!!t),u):r},u.touchable=function(t){return arguments.length?(i="function"===typeof t?t:Ki(!!t),u):i},u.handleSize=function(t){return arguments.length?(s=+t,u):s},u.keyModifiers=function(t){return arguments.length?(a=!!t,u):a},u.on=function(){var t=o.on.apply(o,arguments);return t===o?u:t},u}var ka={},Aa={},Ea=34,Na=10,Sa=13;function Ca(t){return new Function("d","return {"+t.map((function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'})).join(",")+"}")}function Ta(t,n){var e=Ca(t);return function(r,i){return n(e(r),i,t)}}function ja(t){var n=Object.create(null),e=[];return t.forEach((function(t){for(var r in t)r in n||e.push(n[r]=r)})),e}function $a(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function Ba(t){return t<0?"-"+$a(-t,6):t>9999?"+"+$a(t,6):$a(t,4)}function Oa(t){var n=t.getUTCHours(),e=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Ba(t.getUTCFullYear(),4)+"-"+$a(t.getUTCMonth()+1,2)+"-"+$a(t.getUTCDate(),2)+(i?"T"+$a(n,2)+":"+$a(e,2)+":"+$a(r,2)+"."+$a(i,3)+"Z":r?"T"+$a(n,2)+":"+$a(e,2)+":"+$a(r,2)+"Z":e||n?"T"+$a(n,2)+":"+$a(e,2)+"Z":"")}var za=function(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var e,r,a=i(t,(function(t,i){if(e)return e(t,i-1);r=t,e=n?Ta(t,n):Ca(t)}));return a.columns=r||[],a}function i(t,n){var r,i=[],a=t.length,o=0,s=0,u=a<=0,l=!1;function c(){if(u)return Aa;if(l)return l=!1,ka;var n,r,i=o;if(t.charCodeAt(i)===Ea){while(o++<a&&t.charCodeAt(o)!==Ea||t.charCodeAt(++o)===Ea);return(n=o)>=a?u=!0:(r=t.charCodeAt(o++))===Na?l=!0:r===Sa&&(l=!0,t.charCodeAt(o)===Na&&++o),t.slice(i+1,n-1).replace(/""/g,'"')}while(o<a){if((r=t.charCodeAt(n=o++))===Na)l=!0;else if(r===Sa)l=!0,t.charCodeAt(o)===Na&&++o;else if(r!==e)continue;return t.slice(i,n)}return u=!0,t.slice(i,a)}t.charCodeAt(a-1)===Na&&--a,t.charCodeAt(a-1)===Sa&&--a;while((r=c())!==Aa){var h=[];while(r!==ka&&r!==Aa)h.push(r),r=c();n&&null==(h=n(h,s++))||i.push(h)}return i}function a(n,e){return n.map((function(n){return e.map((function(t){return c(n[t])})).join(t)}))}function o(n,e){return null==e&&(e=ja(n)),[e.map(c).join(t)].concat(a(n,e)).join("\n")}function s(t,n){return null==n&&(n=ja(t)),a(t,n).join("\n")}function u(t){return t.map(l).join("\n")}function l(n){return n.map(c).join(t)}function c(t){return null==t?"":t instanceof Date?Oa(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:u,formatRow:l,formatValue:c}},Fa=za(","),Pa=Fa.parse,Ha=(Fa.parseRows,Fa.format,Fa.formatBody,Fa.formatRows,Fa.formatRow,Fa.formatValue,za("\t")),Ra=Ha.parse;Ha.parseRows,Ha.format,Ha.formatBody,Ha.formatRows,Ha.formatRow,Ha.formatValue;function Da(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var La=function(t,n){return fetch(t,n).then(Da)};function Ia(t){return function(n,e,r){return 2===arguments.length&&"function"===typeof e&&(r=e,e=void 0),La(n,e).then((function(n){return t(n,r)}))}}var Wa=Ia(Pa);Ia(Ra);function qa(t){var n=0,e=t.children,r=e&&e.length;if(r)while(--r>=0)n+=e[r].value;else n=1;t.value=n}var Va=function(){return this.eachAfter(qa)},Ua=function(t,n){let e=-1;for(const r of this)t.call(n,r,++e,this);return this},Ya=function(t,n){var e,r,i=this,a=[i],o=-1;while(i=a.pop())if(t.call(n,i,++o,this),e=i.children)for(r=e.length-1;r>=0;--r)a.push(e[r]);return this},Ga=function(t,n){var e,r,i,a=this,o=[a],s=[],u=-1;while(a=o.pop())if(s.push(a),e=a.children)for(r=0,i=e.length;r<i;++r)o.push(e[r]);while(a=s.pop())t.call(n,a,++u,this);return this},Xa=function(t,n){let e=-1;for(const r of this)if(t.call(n,r,++e,this))return r},Ka=function(t){return this.eachAfter((function(n){var e=+t(n.data)||0,r=n.children,i=r&&r.length;while(--i>=0)e+=r[i].value;n.value=e}))},Za=function(t){return this.eachBefore((function(n){n.children&&n.children.sort(t)}))},Ja=function(t){var n=this,e=Qa(n,t),r=[n];while(n!==e)n=n.parent,r.push(n);var i=r.length;while(t!==e)r.splice(i,0,t),t=t.parent;return r};function Qa(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;t=e.pop(),n=r.pop();while(t===n)i=t,t=e.pop(),n=r.pop();return i}var to=function(){var t=this,n=[t];while(t=t.parent)n.push(t);return n},no=function(){return Array.from(this)},eo=function(){var t=[];return this.eachBefore((function(n){n.children||t.push(n)})),t},ro=function(){var t=this,n=[];return t.each((function(e){e!==t&&n.push({source:e.parent,target:e})})),n},io=function*(){var t,n,e,r,i=this,a=[i];do{t=a.reverse(),a=[];while(i=t.pop())if(yield i,n=i.children)for(e=0,r=n.length;e<r;++e)a.push(n[e])}while(a.length)};function ao(t,n){t instanceof Map?(t=[void 0,t],void 0===n&&(n=uo)):void 0===n&&(n=so);var e,r,i,a,o,s=new ho(t),u=[s];while(e=u.pop())if((i=n(e.data))&&(o=(i=Array.from(i)).length))for(e.children=i,a=o-1;a>=0;--a)u.push(r=i[a]=new ho(i[a])),r.parent=e,r.depth=e.depth+1;return s.eachBefore(co)}function oo(){return ao(this).eachBefore(lo)}function so(t){return t.children}function uo(t){return Array.isArray(t)?t[1]:null}function lo(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function co(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function ho(t){this.data=t,this.depth=this.height=0,this.parent=null}ho.prototype=ao.prototype={constructor:ho,count:Va,each:Ua,eachAfter:Ga,eachBefore:Ya,find:Xa,sum:Ka,sort:Za,path:Ja,ancestors:to,descendants:no,leaves:eo,links:ro,copy:oo,[Symbol.iterator]:io};var fo=function(t){return"object"===typeof t&&"length"in t?t:Array.from(t)};function po(t){var n,e,r=t.length;while(r)e=Math.random()*r--|0,n=t[r],t[r]=t[e],t[e]=n;return t}var go=function(t){var n,e,r=0,i=(t=po(Array.from(t))).length,a=[];while(r<i)n=t[r],e&&yo(e,n)?++r:(e=_o(a=mo(a,n)),r=0);return e};function mo(t,n){var e,r;if(wo(n,t))return[n];for(e=0;e<t.length;++e)if(vo(n,t[e])&&wo(xo(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(vo(xo(t[e],t[r]),n)&&vo(xo(t[e],n),t[r])&&vo(xo(t[r],n),t[e])&&wo(Mo(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function vo(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function yo(t,n){var e=t.r-n.r+1e-9*Math.max(t.r,n.r,1),r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function wo(t,n){for(var e=0;e<n.length;++e)if(!yo(t,n[e]))return!1;return!0}function _o(t){switch(t.length){case 1:return bo(t[0]);case 2:return xo(t[0],t[1]);case 3:return Mo(t[0],t[1],t[2])}}function bo(t){return{x:t.x,y:t.y,r:t.r}}function xo(t,n){var e=t.x,r=t.y,i=t.r,a=n.x,o=n.y,s=n.r,u=a-e,l=o-r,c=s-i,h=Math.sqrt(u*u+l*l);return{x:(e+a+u/h*c)/2,y:(r+o+l/h*c)/2,r:(h+i+s)/2}}function Mo(t,n,e){var r=t.x,i=t.y,a=t.r,o=n.x,s=n.y,u=n.r,l=e.x,c=e.y,h=e.r,f=r-o,d=r-l,p=i-s,g=i-c,m=u-a,v=h-a,y=r*r+i*i-a*a,w=y-o*o-s*s+u*u,_=y-l*l-c*c+h*h,b=d*p-f*g,x=(p*_-g*w)/(2*b)-r,M=(g*m-p*v)/b,k=(d*w-f*_)/(2*b)-i,A=(f*v-d*m)/b,E=M*M+A*A-1,N=2*(a+x*M+k*A),S=x*x+k*k-a*a,C=-(E?(N+Math.sqrt(N*N-4*E*S))/(2*E):S/N);return{x:r+x+M*C,y:i+k+A*C,r:C}}function ko(t,n,e){var r,i,a,o,s=t.x-n.x,u=t.y-n.y,l=s*s+u*u;l?(i=n.r+e.r,i*=i,o=t.r+e.r,o*=o,i>o?(r=(l+o-i)/(2*l),a=Math.sqrt(Math.max(0,o/l-r*r)),e.x=t.x-r*s-a*u,e.y=t.y-r*u+a*s):(r=(l+i-o)/(2*l),a=Math.sqrt(Math.max(0,i/l-r*r)),e.x=n.x+r*s-a*u,e.y=n.y+r*u+a*s)):(e.x=n.x+e.r,e.y=n.y)}function Ao(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function Eo(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,a=(n.y*e.r+e.y*n.r)/r;return i*i+a*a}function No(t){this._=t,this.next=null,this.previous=null}function So(t){if(!(i=(t=fo(t)).length))return 0;var n,e,r,i,a,o,s,u,l,c,h;if(n=t[0],n.x=0,n.y=0,!(i>1))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(i>2))return n.r+e.r;ko(e,n,r=t[2]),n=new No(n),e=new No(e),r=new No(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(s=3;s<i;++s){ko(n._,e._,r=t[s]),r=new No(r),u=e.next,l=n.previous,c=e._.r,h=n._.r;do{if(c<=h){if(Ao(u._,r._)){e=u,n.next=e,e.previous=n,--s;continue t}c+=u._.r,u=u.next}else{if(Ao(l._,r._)){n=l,n.next=e,e.previous=n,--s;continue t}h+=l._.r,l=l.previous}}while(u!==l.next);r.previous=n,r.next=e,n.next=e.previous=e=r,a=Eo(n);while((r=r.next)!==e)(o=Eo(r))<a&&(n=r,a=o);e=n.next}n=[e._],r=e;while((r=r.next)!==e)n.push(r._);for(r=go(n),s=0;s<i;++s)n=t[s],n.x-=r.x,n.y-=r.y;return r.r}function Co(t){return null==t?null:To(t)}function To(t){if("function"!==typeof t)throw new Error;return t}function jo(){return 0}var $o=function(t){return function(){return t}};function Bo(t){return Math.sqrt(t.value)}var Oo=function(){var t=null,n=1,e=1,r=jo;function i(i){return i.x=n/2,i.y=e/2,t?i.eachBefore(zo(t)).eachAfter(Fo(r,.5)).eachBefore(Po(1)):i.eachBefore(zo(Bo)).eachAfter(Fo(jo,1)).eachAfter(Fo(r,i.r/Math.min(n,e))).eachBefore(Po(Math.min(n,e)/(2*i.r))),i}return i.radius=function(n){return arguments.length?(t=Co(n),i):t},i.size=function(t){return arguments.length?(n=+t[0],e=+t[1],i):[n,e]},i.padding=function(t){return arguments.length?(r="function"===typeof t?t:$o(+t),i):r},i};function zo(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Fo(t,n){return function(e){if(r=e.children){var r,i,a,o=r.length,s=t(e)*n||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=So(r),s)for(i=0;i<o;++i)r[i].r-=s;e.r=a+s}}}function Po(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}var Ho=1e-12;function Ro(t){return((t=Math.exp(t))+1/t)/2}function Do(t){return((t=Math.exp(t))-1/t)/2}function Lo(t){return((t=Math.exp(2*t))-1)/(t+1)}var Io=function t(n,e,r){function i(t,i){var a,o,s=t[0],u=t[1],l=t[2],c=i[0],h=i[1],f=i[2],d=c-s,p=h-u,g=d*d+p*p;if(g<Ho)o=Math.log(f/l)/n,a=function(t){return[s+t*d,u+t*p,l*Math.exp(n*t*o)]};else{var m=Math.sqrt(g),v=(f*f-l*l+r*g)/(2*l*e*m),y=(f*f-l*l-r*g)/(2*f*e*m),w=Math.log(Math.sqrt(v*v+1)-v),_=Math.log(Math.sqrt(y*y+1)-y);o=(_-w)/n,a=function(t){var r=t*o,i=Ro(w),a=l/(e*m)*(i*Lo(n*r+w)-Do(w));return[s+a*d,u+a*p,l*i/Ro(n*r+w)]}}return a.duration=1e3*o*n/Math.SQRT2,a}return i.rho=function(n){var e=Math.max(.001,+n),r=e*e,i=r*r;return t(e,r,i)},i}(Math.SQRT2,2,4);const Wo=Math.PI/180,qo=180/Math.PI,Vo=18,Uo=.96422,Yo=1,Go=.82521,Xo=4/29,Ko=6/29,Zo=3*Ko*Ko,Jo=Ko*Ko*Ko;function Qo(t){if(t instanceof ns)return new ns(t.l,t.a,t.b,t.opacity);if(t instanceof us)return ls(t);t instanceof pe||(t=fe(t));var n,e,r=as(t.r),i=as(t.g),a=as(t.b),o=es((.2225045*r+.7168786*i+.0606169*a)/Yo);return r===i&&i===a?n=e=o:(n=es((.4360747*r+.3850649*i+.1430804*a)/Uo),e=es((.0139322*r+.0971045*i+.7141733*a)/Go)),new ns(116*o-16,500*(n-o),200*(o-e),t.opacity)}function ts(t,n,e,r){return 1===arguments.length?Qo(t):new ns(t,n,e,null==r?1:r)}function ns(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function es(t){return t>Jo?Math.pow(t,1/3):t/Zo+Xo}function rs(t){return t>Ko?t*t*t:Zo*(t-Xo)}function is(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function as(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function os(t){if(t instanceof us)return new us(t.h,t.c,t.l,t.opacity);if(t instanceof ns||(t=Qo(t)),0===t.a&&0===t.b)return new us(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*qo;return new us(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function ss(t,n,e,r){return 1===arguments.length?os(t):new us(t,n,e,null==r?1:r)}function us(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function ls(t){if(isNaN(t.h))return new ns(t.l,0,0,t.opacity);var n=t.h*Wo;return new ns(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}function cs(t){return function(n,e){var r=t((n=ss(n)).h,(e=ss(e)).h),i=je(n.c,e.c),a=je(n.l,e.l),o=je(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=a(t),n.opacity=o(t),n+""}}}qn(ns,ts,Vn(Un,{brighter:function(t){return new ns(this.l+Vo*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new ns(this.l-Vo*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return n=Uo*rs(n),t=Yo*rs(t),e=Go*rs(e),new pe(is(3.1338561*n-1.6168667*t-.4906146*e),is(-.9787684*n+1.9161415*t+.033454*e),is(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),qn(us,ss,Vn(Un,{brighter:function(t){return new us(this.h,this.c,this.l+Vo*(null==t?1:t),this.opacity)},darker:function(t){return new us(this.h,this.c,this.l-Vo*(null==t?1:t),this.opacity)},rgb:function(){return ls(this).rgb()}}));var hs=cs(Ce),fs=(cs(je),function(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),a=new Array(i);while(++r<i)a[r]=t+r*e;return a});function ds(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}const ps=Symbol("implicit");function gs(){var t=new Map,n=[],e=[],r=ps;function i(i){var a=i+"",o=t.get(a);if(!o){if(r!==ps)return r;t.set(a,o=n.push(i))}return e[(o-1)%e.length]}return i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=new Map;for(const r of e){const e=r+"";t.has(e)||t.set(e,n.push(r))}return i},i.range=function(t){return arguments.length?(e=Array.from(t),i):e.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return gs(n,e).unknown(r)},ds.apply(i,arguments),i}function ms(){var t,n,e=gs().unknown(void 0),r=e.domain,i=e.range,a=0,o=1,s=!1,u=0,l=0,c=.5;function h(){var e=r().length,h=o<a,f=h?o:a,d=h?a:o;t=(d-f)/Math.max(1,e-u+2*l),s&&(t=Math.floor(t)),f+=(d-f-t*(e-u))*c,n=t*(1-u),s&&(f=Math.round(f),n=Math.round(n));var p=fs(e).map((function(n){return f+t*n}));return i(h?p.reverse():p)}return delete e.unknown,e.domain=function(t){return arguments.length?(r(t),h()):r()},e.range=function(t){return arguments.length?([a,o]=t,a=+a,o=+o,h()):[a,o]},e.rangeRound=function(t){return[a,o]=t,a=+a,o=+o,s=!0,h()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(s=!!t,h()):s},e.padding=function(t){return arguments.length?(u=Math.min(1,l=+t),h()):u},e.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),h()):u},e.paddingOuter=function(t){return arguments.length?(l=+t,h()):l},e.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),h()):c},e.copy=function(){return ms(r(),[a,o]).round(s).paddingInner(u).paddingOuter(l).align(c)},ds.apply(h(),arguments)}var vs=Math.sqrt(50),ys=Math.sqrt(10),ws=Math.sqrt(2),_s=function(t,n,e){var r,i,a,o,s=-1;if(n=+n,t=+t,e=+e,t===n&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(o=bs(t,n,e))||!isFinite(o))return[];if(o>0){let e=Math.round(t/o),r=Math.round(n/o);e*o<t&&++e,r*o>n&&--r,a=new Array(i=r-e+1);while(++s<i)a[s]=(e+s)*o}else{o=-o;let e=Math.round(t*o),r=Math.round(n*o);e/o<t&&++e,r/o>n&&--r,a=new Array(i=r-e+1);while(++s<i)a[s]=(e+s)/o}return r&&a.reverse(),a};function bs(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=vs?10:a>=ys?5:a>=ws?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=vs?10:a>=ys?5:a>=ws?2:1)}function xs(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=vs?i*=10:a>=ys?i*=5:a>=ws&&(i*=2),n<t?-i:i}var Ms=function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN},ks=function(t){let n=t,e=t;function r(t,n,r,i){null==r&&(r=0),null==i&&(i=t.length);while(r<i){const a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r}function i(t,n,r,i){null==r&&(r=0),null==i&&(i=t.length);while(r<i){const a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}function a(t,e,i,a){null==i&&(i=0),null==a&&(a=t.length);const o=r(t,e,i,a-1);return o>i&&n(t[o-1],e)>-n(t[o],e)?o-1:o}return 1===t.length&&(n=(n,e)=>t(n)-e,e=As(t)),{left:r,center:a,right:i}};function As(t){return(n,e)=>Ms(t(n),e)}var Es=function(t){return null===t?NaN:+t};const Ns=ks(Ms),Ss=Ns.right;Ns.left,ks(Es).center;var Cs=Ss,Ts=function(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}};function js(t){return function(){return t}}function $s(t){return+t}var Bs=[0,1];function Os(t){return t}function zs(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:js(isNaN(n)?NaN:.5)}function Fs(t,n){var e;return t>n&&(e=t,t=n,n=e),function(e){return Math.max(t,Math.min(n,e))}}function Ps(t,n,e){var r=t[0],i=t[1],a=n[0],o=n[1];return i<r?(r=zs(i,r),a=e(o,a)):(r=zs(r,i),a=e(a,o)),function(t){return a(r(t))}}function Hs(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),a=new Array(r),o=-1;t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());while(++o<r)i[o]=zs(t[o],t[o+1]),a[o]=e(n[o],n[o+1]);return function(n){var e=Cs(t,n,1,r)-1;return a[e](i[e](n))}}function Rs(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ds(){var t,n,e,r,i,a,o=Bs,s=Bs,u=Ye,l=Os;function c(){var t=Math.min(o.length,s.length);return l!==Os&&(l=Fs(o[0],o[t-1])),r=t>2?Hs:Ps,i=a=null,h}function h(n){return null==n||isNaN(n=+n)?e:(i||(i=r(o.map(t),s,u)))(t(l(n)))}return h.invert=function(e){return l(n((a||(a=r(s,o.map(t),He)))(e)))},h.domain=function(t){return arguments.length?(o=Array.from(t,$s),c()):o.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),u=Ts,c()},h.clamp=function(t){return arguments.length?(l=!!t||Os,c()):l!==Os},h.interpolate=function(t){return arguments.length?(u=t,c()):u},h.unknown=function(t){return arguments.length?(e=t,h):e},function(e,r){return t=e,n=r,c()}}function Ls(){return Ds()(Os,Os)}var Is=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ws(t){if(!(n=Is.exec(t)))throw new Error("invalid format: "+t);var n;return new qs({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function qs(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Ws.prototype=qs.prototype,qs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Vs=function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)};function Us(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}var Ys,Gs,Xs,Ks,Zs=function(t){return t=Us(Math.abs(t)),t?t[1]:NaN},Js=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Zs(n)/3)))-Zs(Math.abs(t)))},Qs=function(t,n){return function(e,r){var i=e.length,a=[],o=0,s=t[0],u=0;while(i>0&&s>0){if(u+s+1>r&&(s=Math.max(1,r-u)),a.push(e.substring(i-=s,i+s)),(u+=s+1)>r)break;s=t[o=(o+1)%t.length]}return a.reverse().join(n)}},tu=function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}},nu=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(!+t[r])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(n+1):t},eu=function(t,n){var e=Us(t,n);if(!e)return t+"";var r=e[0],i=e[1],a=i-(Ys=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Us(t,Math.max(0,n+a-1))[0]},ru=function(t,n){var e=Us(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},iu={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Vs,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>ru(100*t,n),r:ru,s:eu,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)},au=function(t){return t},ou=Array.prototype.map,su=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],uu=function(t){var n=void 0===t.grouping||void 0===t.thousands?au:Qs(ou.call(t.grouping,Number),t.thousands+""),e=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?au:tu(ou.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function l(t){t=Ws(t);var l=t.fill,c=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,g=t.comma,m=t.precision,v=t.trim,y=t.type;"n"===y?(g=!0,y="g"):iu[y]||(void 0===m&&(m=12),v=!0,y="g"),(d||"0"===l&&"="===c)&&(d=!0,l="0",c="=");var w="$"===f?e:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===f?r:/[%p]/.test(y)?o:"",b=iu[y],x=/[defgprs%]/.test(y);function M(t){var e,r,o,f=w,M=_;if("c"===y)M=b(t)+M,t="";else{t=+t;var k=t<0||1/t<0;if(t=isNaN(t)?u:b(Math.abs(t),m),v&&(t=nu(t)),k&&0===+t&&"+"!==h&&(k=!1),f=(k?"("===h?h:s:"-"===h||"("===h?"":h)+f,M=("s"===y?su[8+Ys/3]:"")+M+(k&&"("===h?")":""),x){e=-1,r=t.length;while(++e<r)if(o=t.charCodeAt(e),48>o||o>57){M=(46===o?i+t.slice(e+1):t.slice(e))+M,t=t.slice(0,e);break}}}g&&!d&&(t=n(t,1/0));var A=f.length+t.length+M.length,E=A<p?new Array(p-A+1).join(l):"";switch(g&&d&&(t=n(E+t,E.length?p-M.length:1/0),E=""),c){case"<":t=f+t+M+E;break;case"=":t=f+E+t+M;break;case"^":t=E.slice(0,A=E.length>>1)+f+t+M+E.slice(A);break;default:t=E+f+t+M;break}return a(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),M.toString=function(){return t+""},M}function c(t,n){var e=l((t=Ws(t),t.type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Zs(n)/3))),i=Math.pow(10,-r),a=su[8+r/3];return function(t){return e(i*t)+a}}return{format:l,formatPrefix:c}};function lu(t){return Gs=uu(t),Xs=Gs.format,Ks=Gs.formatPrefix,Gs}lu({thousands:",",grouping:[3],currency:["$",""]});var cu=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Zs(n)-Zs(t))+1},hu=function(t){return Math.max(0,-Zs(Math.abs(t)))};function fu(t,n,e,r){var i,a=xs(t,n,e);switch(r=Ws(null==r?",f":r),r.type){case"s":var o=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(i=Js(a,o))||(r.precision=i),Ks(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=cu(a,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=hu(a))||(r.precision=i-2*("%"===r.type));break}return Xs(r)}function du(t){var n=t.domain;return t.ticks=function(t){var e=n();return _s(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return fu(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i,a=n(),o=0,s=a.length-1,u=a[o],l=a[s],c=10;l<u&&(i=u,u=l,l=i,i=o,o=s,s=i);while(c-- >0){if(i=bs(u,l,e),i===r)return a[o]=u,a[s]=l,n(a);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return t},t}function pu(){var t=Ls();return t.copy=function(){return Rs(t,pu())},ds.apply(t,arguments),du(t)}var gu=function(t){var n=t.length/6|0,e=new Array(n),r=0;while(r<n)e[r]="#"+t.slice(6*r,6*++r);return e},mu=gu("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),vu=function(t){return"string"===typeof t?new Fn([document.querySelectorAll(t)],[document.documentElement]):new Fn([null==t?[]:W(t)],zn)};const yu=Math.PI,wu=2*yu,_u=1e-6,bu=wu-_u;function xu(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Mu(){return new xu}xu.prototype=Mu.prototype={constructor:xu,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,a){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var a=this._x1,o=this._y1,s=e-t,u=r-n,l=a-t,c=o-n,h=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(h>_u)if(Math.abs(c*s-u*l)>_u&&i){var f=e-a,d=r-o,p=s*s+u*u,g=f*f+d*d,m=Math.sqrt(p),v=Math.sqrt(h),y=i*Math.tan((yu-Math.acos((p+h-g)/(2*m*v)))/2),w=y/v,_=y/m;Math.abs(w-1)>_u&&(this._+="L"+(t+w*l)+","+(n+w*c)),this._+="A"+i+","+i+",0,0,"+ +(c*f>l*d)+","+(this._x1=t+_*s)+","+(this._y1=n+_*u)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,r,i,a){t=+t,n=+n,e=+e,a=!!a;var o=e*Math.cos(r),s=e*Math.sin(r),u=t+o,l=n+s,c=1^a,h=a?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>_u||Math.abs(this._y1-l)>_u)&&(this._+="L"+u+","+l),e&&(h<0&&(h=h%wu+wu),h>bu?this._+="A"+e+","+e+",0,1,"+c+","+(t-o)+","+(n-s)+"A"+e+","+e+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):h>_u&&(this._+="A"+e+","+e+",0,"+ +(h>=yu)+","+c+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};var ku=Mu,Au=(Array.prototype.slice,function(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}),Eu=function(t){return function(){return t}};function Nu(t){this._context=t}Nu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};var Su=function(t){return new Nu(t)};function Cu(t){return t[0]}function Tu(t){return t[1]}var ju=function(t,n){var e=Eu(!0),r=null,i=Su,a=null;function o(o){var s,u,l,c=(o=Au(o)).length,h=!1;for(null==r&&(a=i(l=ku())),s=0;s<=c;++s)!(s<c&&e(u=o[s],s,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(u,s,o),+n(u,s,o));if(l)return a=null,l+""||null}return t="function"===typeof t?t:void 0===t?Cu:Eu(t),n="function"===typeof n?n:void 0===n?Tu:Eu(n),o.x=function(n){return arguments.length?(t="function"===typeof n?n:Eu(+n),o):t},o.y=function(t){return arguments.length?(n="function"===typeof t?t:Eu(+t),o):n},o.defined=function(t){return arguments.length?(e="function"===typeof t?t:Eu(!!t),o):e},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o};function $u(t,n,e){this.k=t,this.x=n,this.y=e}$u.prototype={constructor:$u,scale:function(t){return 1===t?this:new $u(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new $u(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Bu=new $u(1,0,0);function Ou(t){while(!t.__zoom)if(!(t=t.parentNode))return Bu;return t.__zoom}Ou.prototype=$u.prototype;var zu=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"tooltip",attrs:{id:"tooltip-1"}},[e("b-card",{attrs:{title:t.data.category}},[e("b-card-text",[t._v(" "+t._s(t.data.alc)+" ")])],1)],1)},Fu=[],Pu={name:"TooltipOne",props:["data","visible"]},Hu=Pu,Ru=(e("c4cc"),Object(l["a"])(Hu,zu,Fu,!1,null,"790a4940",null)),Du=Ru.exports,Lu=e("56d7"),Iu={name:"BarGraph",components:{TooltipOne:Du},props:["clusters"],data(){return{tipData:{category:"dddd",alc:"www"},tipVisible:!1,margin:null,width:null,height:null,x:null,y:null,color:null,svg:null}},mounted(){this.margin={top:20,right:20,bottom:70,left:40},this.width=this.$refs.chart.clientWidth-this.margin.left-this.margin.right,this.height=this.$refs.chart.clientHeight-this.margin.top-this.margin.bottom,this.x=ms().padding(.85).rangeRound([0,this.width]),this.y=pu().range([this.height,0]),this.color=mu,this.svg=Dn("#chart").append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.showBarGraph()},methods:{showBarGraph(){Wa("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/category_avg.csv").then(t=>{t.forEach((function(t){t.alc=+t.avg_lexical_change})),console.log("data",t),this.x.domain(t.map((function(t){return t.category}))),this.y.domain([0,.05+m(t,(function(t){return t.alc}))]),this.svg.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+this.height+")").call(j(this.x)).selectAll("text").attr("y",23).attr("x",9).attr("dy","-2em").attr("transform","rotate(90)").style("text-anchor","start"),this.svg.append("g").attr("class","axis axis--y").call($(this.y)).append("text").attr("y",6).attr("dy","0em").attr("text-anchor","end").text("Average Lexical Change");const n=this.svg.selectAll(".bar").data(t),e=this;n.enter().append("rect").attr("class","bar").attr("x",(function(t){return e.x(t.category)})).attr("y",(function(t){return e.y(t.alc)})).attr("width",20).attr("height",(function(t){return e.height-e.y(t.alc)})).style("fill","#ccc").on("click",(function(t,n){console.log(t);const r=e.clusters.filter(t=>t.category==n.category);e.showCheckbox({category:n.category,options:r}),console.log(r)})).on("mouseover",(function(t,n){console.log("over"),e.tipData.category=n.category,e.tipData.alc=n.alc,vu("#tooltip-1").style("left",t.clientX+"px").style("top",t.clientY-100+"px").transition().duration(500).style("opacity","1")})).on("mouseout",(function(){console.log("out"),vu("#tooltip-1").transition().duration(500).style("opacity","0")}));var r=v(t,(function(t){return t.alc})),i=r/t.length;this.svg.append("path").attr("class","mean").attr("d",ju()([[0,e.y(i)],[e.width,e.y(i)]])).attr("stroke","black"),this.svg.append("text").attr("transform","translate("+(this.width+3)+","+this.y(i)+")").attr("dy","1em").attr("text-anchor","end").style("fill","red").html("Average = $"+i)})},showCheckbox(t){Lu["eventBus"].$emit("show-checkbox",t)}}},Wu=Iu,qu=(e("60d2"),Object(l["a"])(Wu,p,g,!1,null,"14b95318",null)),Vu=qu.exports,Uu=function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.followingList.length>0?e("div",{attrs:{id:"following-list"}},[e("h5",[t._v(" Top Follows of Selected Community ")]),e("div",{attrs:{id:"follows"}},t._l(t.followingList,(function(t){return e("TwitterPreview",{key:t,attrs:{following:t}})})),1)]):t._e()},Yu=[],Gu=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("b-link",{attrs:{href:"https://twitter.com/"+t.following}},[t._v(" @"+t._s(t.following)+" ")])],1)},Xu=[],Ku={name:"TwitterPreview",props:["following"]},Zu=Ku,Ju=Object(l["a"])(Zu,Gu,Xu,!1,null,null,null),Qu=Ju.exports,tl={name:"Twitters",components:{TwitterPreview:Qu},props:["followingList"]},nl=tl,el=(e("4b5e"),Object(l["a"])(nl,Uu,Yu,!1,null,"558772b0",null)),rl=el.exports,il=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"checkbox"}},[e("h5",[t._v(" Clusters in Category "+t._s(t.category.toUpperCase())+" ")]),e("b-form-group",[e("b-form-radio-group",{attrs:{id:"checkbox-group",options:t.options},on:{change:function(n){return t.selectCommunity(t.selected)}},model:{value:t.selected,callback:function(n){t.selected=n},expression:"selected"}})],1)],1)},al=[],ol={name:"Checkbox",props:["options","category"],data(){return{selected:null}},methods:{selectCommunity:function(){Lu["eventBus"].$emit("select-community",this.selected)}}},sl=ol,ul=Object(l["a"])(sl,il,al,!1,null,"96bdc64e",null),ll=ul.exports,cl={name:"BarChart",components:{BarGraph:Vu,Checkbox:ll,Twitters:rl},data(){return{title:"Exploring patterns of language variation on social media",clusters:[],options:[],followingList:[],category:"",showingCheckbox:!1,showingTwitters:!1,showingHint2:!1}},created:function(){Lu["eventBus"].$on("show-checkbox",this.showCheckbox),Lu["eventBus"].$on("select-community",this.showTwitters)},beforeDestroy:function(){Lu["eventBus"].$off("show-checkbox",this.showCheckbox),Lu["eventBus"].$off("select-community",this.showTwitters)},mounted(){Wa("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(t=>{const n=this;t.forEach((function(t){n.clusters.push({text:t.cluster_name,value:t.cluster_name,category:t.category})}))})},methods:{showCheckbox(t){this.options=t.options,this.category=t.category,this.showingCheckbox=!0,this.showingHint2=!0,this.followingList=[]},showTwitters(t){Wa("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(n=>{const e=n.find(n=>n.cluster_name==t);this.followingList=e.top_follows.split(",")}),console.log(this.followingList),this.showingTwitters=!0,this.showingHint2=!1}}},hl=cl,fl=(e("5e50"),Object(l["a"])(hl,f,d,!1,null,"c9676f9e",null)),dl=fl.exports,pl=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"page"},[e("div",{attrs:{id:"left"}},[e("Ranking")],1),e("div",{ref:"right",attrs:{id:"right"}},[e("SizeGraph")],1)])},gl=[],ml=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{ref:"chart1",attrs:{id:"chart-1"}},[e("div",{ref:"svg-container",attrs:{id:"svg-container-1"}})])},vl=[],yl={name:"SizeGraph",props:["clusters"],data(){return{margin:null,margin2:null,width:null,width2:null,height:null,x:null,y:null,x2:null,y2:null,svg:null,xAxis:null,yAxis:null,xScale:null,yScale:null,brush:null,brushArea:null,content:null,focus:null}},created:function(){Lu["eventBus"].$on("select-ranking",this.reorder)},beforeDestroy:function(){Lu["eventBus"].$off("select-ranking",this.reorder)},mounted(){this.margin={top:20,right:10,bottom:20,left:120},this.margin2={top:20,right:5,bottom:20,left:5},this.width2=30,this.width=this.$refs.chart1.clientWidth-this.margin.left-this.margin.right,this.height=this.$refs.chart1.clientHeight-this.margin.top-this.margin.bottom,this.x=pu().range([this.margin.left,this.width-this.margin.right]).nice(),this.y=ms().range([this.height-this.margin.bottom,this.margin.top]).padding(.1),this.x2=pu().range([this.margin2.left,this.width2-this.margin2.right]).nice(),this.y2=ms().range([this.height-this.margin.bottom,this.margin.top]).padding(.1),this.svg=Dn("#chart-1").append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.content=this.svg.append("g").attr("transform","translate("+this.margin2.left+","+this.margin.top+")"),this.focus=this.svg.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")");const t=this;function n(n){const e=n.selection;if(e){const n=[];t.y2.domain().forEach(r=>{var i=t.y2(r)+t.y2.bandwidth()/2;i>e[0]&&i<e[1]&&n.push(r)}),t.y.domain(n),t.svg.selectAll(".bar").attr("y",n=>t.y(n.cluster_name)).attr("height",t.y.bandwidth()),t.yAxis.call(t.yScale,t.y)}}this.brush=xa().extent([[0,this.margin.top],[this.width2,this.height-this.margin.bottom]]).on("brush",n),this.brushArea=this.content.append("g").attr("class","brush"),this.focus.append("clipPath").attr("id","my-clip-path").append("rect").attr("x",0).attr("y",0).attr("width",this.chartWidth).attr("height",this.chartHeight),this.svg.append("rect").attr("class","zoom-panel").attr("x",this.margin.left).attr("y",this.margin.top).attr("width",this.width).attr("height",this.height-this.margin.top-this.margin.bottom).style("opacity",0),this.xScale=function(n){n.attr("transform",`translate(15, ${t.height-t.margin.bottom})`).call(j(t.x)).call(t=>t.select(".domain").remove())},this.xAxis=this.focus.append("g").attr("class","x-axis").call(this.xScale),this.focus.append("text").attr("x",(this.width+this.margin.left)/2).attr("y",this.height-5).attr("text-anchor","middle").attr("font-family","Helvetica Neue, Arial").attr("font-weight",700).attr("font-size",20).attr("fill","black").text(""),this.yScale=function(n,e){n.attr("transform",`translate(${t.margin.left+15}, 0)`).call($(e).ticks(t.width/80).tickSizeOuter(0))},this.yAxis=this.focus.append("g").attr("class","y-axis").attr("clip-path","url(#my-clip-path)").call(this.yScale,this.y),this.focus.append("text").attr("transform","rotate(-90)").attr("x",-(this.height-this.margin.bottom)/2-50).attr("y",15).attr("text-anchor","middle").attr("font-family","Helvetica Neue, Arial").attr("font-weight",700).attr("font-size",20).attr("fill","black").text(""),this.reorder("community_size")},computed:{chartHeight(){return this.$refs.chart1.clientHeight},chartWidth(){return this.$refs.chart1.clientWidth}},methods:{updateBars(t){this.x.domain([0,m(t,t=>t.value)]),this.xAxis.transition().duration(1e3).call(j(this.x)),this.y.domain(t.map(t=>t.cluster_name)),this.yAxis.transition().duration(1e3).call($(this.y)),this.x2.domain([0,m(t,t=>t.value)]),this.y2.domain(t.map(t=>t.cluster_name));const n=this.focus.selectAll(".bar").data(t),e=this;n.enter().append("rect").attr("clip-path","url(#my-clip-path)").attr("class","bar").attr("id",t=>t.cluster_name).attr("x",e.margin.left+15).attr("y",t=>e.y(t.cluster_name)).attr("width",t=>e.x(t.value)).attr("height",e.y.bandwidth()).attr("fill","Lightblue"),n.transition().duration(250).attr("x",e.margin.left+15).attr("y",t=>e.y(t.cluster_name)).attr("width",t=>e.x(t.value)).attr("height",e.y.bandwidth()).attr("fill","Lightblue"),n.exit().remove();const r=this.content.selectAll(".bar2").data(t);r.enter().append("rect").attr("class","bar2").attr("x",e.margin2.left).attr("y",t=>e.y(t.cluster_name)).attr("width",t=>e.x2(t.value)-e.margin2.left).attr("height",e.y.bandwidth()).attr("fill","Black"),r.transition().duration(250).attr("x",e.margin2.left).attr("y",t=>e.y(t.cluster_name)).attr("width",t=>e.x2(t.value)-e.margin2.left).attr("height",e.y.bandwidth()).attr("fill","Black"),r.exit().remove(),this.brushArea.call(e.brush).call(e.brush.move,[this.margin.top,this.height-this.margin.bottom])},reorder(t){Wa("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(n=>{n.forEach(n=>n.value=parseFloat(n[t])),n.sort((t,n)=>t.value-n.value),n.forEach((t,n)=>t.Rank=n+1),t=[],this.updateBars(n)})}}},wl=yl,_l=(e("dcc7"),Object(l["a"])(wl,ml,vl,!1,null,"3dd28fd2",null)),bl=_l.exports,xl=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("h2",[t._v(" Ranking Communities ")]),e("b-form-group",{attrs:{label:"Sort the communities by:"}},[e("b-form-radio-group",{staticClass:"button-radio",attrs:{id:"btn-radios-3",options:t.options,name:"radio-btn-stacked",buttons:"",stacked:"","button-variant":"outline-secondary"},on:{change:function(n){return t.selectRanking(t.selected)}},model:{value:t.selected,callback:function(n){t.selected=n},expression:"selected"}})],1),e("h4",[t._v(" Zoom in/out and move 👉 ")])],1)},Ml=[],kl={name:"Ranking",data(){return{selected:"community_size",options:[{text:"community size",value:"community_size"},{text:"average friends count",value:"friends_count_mean"},{text:"average follower count",value:"follower_count_mean"},{text:"average tweet count",value:"tweet_count_mean"},{text:"lexical change",value:"lexical_change"},{text:"ideology lexical change",value:"ideology_lexical_change"},{text:"male ratio",value:"male_ratio"}]}},created:function(){Lu["eventBus"].$on("select-ranking",this.changeButton)},beforeDestroy:function(){Lu["eventBus"].$off("select-ranking",this.changeButton)},methods:{selectRanking:function(){Lu["eventBus"].$emit("select-ranking",this.selected)},changeButton:function(t){this.selected=t}}},Al=kl,El=(e("8770"),Object(l["a"])(Al,xl,Ml,!1,null,"084e6565",null)),Nl=El.exports,Sl={name:"BarChart",components:{SizeGraph:bl,Ranking:Nl},data(){return{}},created:function(){},beforeDestroy:function(){},mounted(){},methods:{}},Cl=Sl,Tl=(e("fe3b"),Object(l["a"])(Cl,pl,gl,!1,null,"02dfca9e",null)),jl=Tl.exports,$l=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"page"},[e("div",{attrs:{id:"left"}},[e("Factors"),e("transition",{attrs:{name:"fade"}},[t.showingHint?e("div",[e("h4",[t._v(" Hover on a dot to see the topic words of the community 👉 ")])]):e("TooltipThree",{attrs:{clusterName:t.clusterName,topicWords:t.topicWords}})],1)],1),e("div",{ref:"right",attrs:{id:"right"}},[e("h2",[t._v(" Investigate how language variation relates to social factors ")]),e("ScatterGraph")],1)])},Bl=[],Ol=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{ref:"chart3",attrs:{id:"chart-3"}},[e("div",{ref:"svg-container-3",attrs:{id:"svg-container-3"}})])},zl=[],Fl={name:"ScatterGraph",props:["clusters"],data(){return{margin:null,width:null,height:null,x:null,y:null,color:null,svg:null,xAxis:null,yAxis:null,xScale:null,yScale:null,xText:"",yText:"",storedData:null}},created:function(){Lu["eventBus"].$on("select-factors",this.updateScatterPlot)},beforeDestroy:function(){Lu["eventBus"].$off("select-factors",this.updateScatterPlot)},mounted(){this.margin={top:20,right:10,bottom:50,left:70},this.width=this.$refs.chart3.clientWidth,this.height=this.$refs.chart3.clientHeight,this.x=pu().range([this.margin.left,this.width-this.margin.right]),this.y=pu().range([this.height-this.margin.bottom,this.margin.top]),this.svg=Dn("#chart-3").append("svg").attr("width",this.width).attr("height",this.height);const t=this;this.xAxis=this.svg.append("g").attr("class","x-axis").attr("transform",`translate(0, ${t.height-t.margin.bottom})`).call(j(t.x)),this.xText=this.xAxis.append("text").attr("text-anchor","middle").attr("font-family","Helvetica Neue, Arial").attr("x",(this.width-this.margin.right)/2).attr("y",40).attr("font-weight",700).attr("font-size",20).attr("fill","black").text(""),this.yAxis=this.svg.append("g").attr("class","y-axis").attr("transform",`translate(${t.margin.left}, 0)`).call($(t.y)),this.yText=this.yAxis.append("text").attr("transform","rotate(-90)").attr("text-anchor","middle").attr("x",-(this.height-this.margin.bottom)/2-50).attr("y",-40).attr("font-family","Helvetica Neue, Arial").attr("font-weight",700).attr("font-size",20).attr("fill","black").text(""),Wa("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(t=>{this.storedData=t,console.log(this.storedData),this.updateScatterPlot("community_size","lexical_change","all")}),this.svg.append("rect").attr("class","zoom-panel").attr("x",0).attr("y",0).attr("width",this.width).attr("height",this.height).style("opacity",.2)},methods:{updateScatterPlot(t,n,e){console.log(t,n,e);const r=this,i="all"!=e?r.storedData.filter(t=>t.category==e):r.storedData;console.log(r.storedData),console.log(i),this.x.domain([0,m(i,n=>parseFloat(n[t]))]),this.xAxis.transition().duration(1e3).call(j(this.x)),this.xText.text(t),this.y.domain([0,m(i,t=>parseFloat(t[n]))]),this.yAxis.transition().duration(1e3).call($(this.y)),this.yText.text(n);const a=this.svg.selectAll(".dot").data(i.filter((function(t,n){return n<1500})));console.log("Here"),a.enter().append("circle").attr("class","dot").attr("r",5).style("fill","#e25609").style("opacity",.3).style("stroke","white").on("mouseover",(function(t,n){console.log("over"),console.log(t);const e=n.cluster_name,r=n.topic_words;Lu["eventBus"].$emit("show-tooltip-3",e,r)})).on("mouseout",(function(){console.log("out"),Lu["eventBus"].$emit("hide-tooltip-3")})).transition().delay((function(t,n){return 3*n})).duration(2e3).attr("cx",(function(n){return r.x(n[t])})).attr("cy",(function(t){return r.y(t[n])})),console.log("Here"),a.transition().delay((function(t,n){return 3*n})).duration(2e3).attr("cx",(function(n){return r.x(n[t])})).attr("cy",(function(t){return r.y(t[n])})),console.log("Here"),a.exit().remove(),console.log("Here")}}},Pl=Fl,Hl=(e("945b"),Object(l["a"])(Pl,Ol,zl,!1,null,"0a4dc611",null)),Rl=Hl.exports,Dl=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("b-form-group",{attrs:{id:"input-group-1",label:"Choose two factors:","label-for":"m-2"}},[e("b-form-select",{attrs:{options:t.factors},on:{change:t.selectFactors},model:{value:t.factor1,callback:function(n){t.factor1=n},expression:"factor1"}}),e("b-form-select",{attrs:{options:t.factors},on:{change:t.selectFactors},model:{value:t.factor2,callback:function(n){t.factor2=n},expression:"factor2"}})],1),e("b-form-group",{attrs:{id:"input-group-3",label:"Choose a category:","label-for":"m-2"}},[e("b-form-select",{attrs:{options:t.categories},on:{change:t.selectFactors},model:{value:t.category,callback:function(n){t.category=n},expression:"category"}})],1)],1)},Ll=[],Il={name:"Ranking",data(){return{factor1:"community_size",factor2:"lexical_change",category:"all",categories:["all","atlanta","beauty","education","entertainment","health","other","politics","religion","social_justice","sports"],factors:["community_size","lexical_change","ideology_lexical_change","male_ratio","friends_count_mean","friends_count_median","follower_count_mean","follower_count_median","tweet_count_mean","tweet_count_median","tweet_count_rank"]}},methods:{selectFactors:function(){Lu["eventBus"].$emit("select-factors",this.factor1,this.factor2,this.category)}}},Wl=Il,ql=(e("d4fe"),Object(l["a"])(Wl,Dl,Ll,!1,null,"45f45f50",null)),Vl=ql.exports,Ul=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"tooltip-3"}},[e("vue-word-cloud",{attrs:{id:"wordcloud",rotation:t.rotate,spacing:t.spacing,words:t.topicWords,color:"black","font-family":"Roboto"}})],1)},Yl=[],Gl=e("2d8a"),Xl=e.n(Gl),Kl={name:"TooltipThree",props:["clusterName","topicWords"],components:{[Xl.a.name]:Xl.a},data(){return{words:[{text:"Vue",value:1e3},{text:"js",value:200},{text:"is",value:800},{text:"very cool",value:1e6},{text:"lunch",value:100}],margin:{top:0,right:0,bottom:0,left:0},rotate:null,spacing:1/4}},mounted(){this.rotate=function(){const t=[0,1/8,3/4,7/8],n=Math.floor(Math.random()*t.length);return t[n]}}},Zl=Kl,Jl=(e("c0b8"),Object(l["a"])(Zl,Ul,Yl,!1,null,"6f4fd53e",null)),Ql=Jl.exports,tc={name:"BarChart",components:{ScatterGraph:Rl,Factors:Vl,TooltipThree:Ql},data(){return{clusterName:"",topicWords:[],showingHint:!0}},created:function(){Lu["eventBus"].$on("show-tooltip-3",this.showTooltip),Lu["eventBus"].$on("hide-tooltip-3",this.hideTooltip)},beforeDestroy:function(){Lu["eventBus"].$off("show-tooltip-3",this.showTooltip),Lu["eventBus"].$off("hide-tooltip-3",this.hideTooltip)},methods:{showTooltip(t,n){console.log("show"),this.clusterName=t,this.topicWords=n.split(",").map(t=>({text:t,value:1})),this.showingHint=!1},hideTooltip(){this.showingHint=!0,console.log("hide")}}},nc=tc,ec=(e("44df"),Object(l["a"])(nc,$l,Bl,!1,null,"08800392",null)),rc=ec.exports,ic=function(){var t=this,n=t.$createElement;t._self._c;return t._m(0)},ac=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"spacing"},[e("h5",[t._v("⬇️ continue...")])])}],oc={name:"Spacing",data(){return{}}},sc=oc,uc=(e("5cd9"),Object(l["a"])(sc,ic,ac,!1,null,"63f214f0",null)),lc=uc.exports,cc=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"thanks"}},[e("div",{attrs:{id:"thanks-title"}},[e("h1",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}]},[t._v(" "+t._s(t.title1)+" ")])]),e("div",{attrs:{id:"thanks-content"}},[e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],attrs:{id:"thanks-text-block"}},[e("b-link",{attrs:{href:"https://github.com/6859-sp21/final-project-atlanta-community"}},[t._v("go to our github page")])],1),e("div",{directives:[{name:"scrollanimation",rawName:"v-scrollanimation"}],attrs:{id:"thanks-image-block"}},[e("b-button",{staticClass:"button-share",attrs:{"label-for":"input-1",variant:"link"}},[e("ShareNetwork",{attrs:{network:"twitter",url:"https://6859-sp21.github.io/final-project-atlanta-community/",title:"A visualization on tweets in Atlanta"}},[e("b-icon",{attrs:{icon:"twitter","font-scale":"3"}}),e("span",{staticStyle:{margin:"0.5em"}},[t._v("Share on twitter")])],1)],1),e("b-img")],1)])])},hc=[],fc={name:"Thanks",data(){return{title1:"Thanks for exploring"}}},dc=fc,pc=(e("6c29"),Object(l["a"])(dc,cc,hc,!1,null,"ede78a9a",null)),gc=pc.exports,mc=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"page"},[e("div",{attrs:{id:"left"}},[e("Ranking"),e("transition",{attrs:{name:"move"}},[t.showingTwitters?e("Twitters",{attrs:{followingList:t.followingList}}):t._e()],1),e("transition",{attrs:{name:"move"}},[t.showingHint2?e("div",{attrs:{id:"hint-2"}},[e("h4",[t._v(" Check a community to see the top follows 👉 ")])]):t._e()])],1),e("div",{ref:"right",attrs:{id:"right"}},[e("CircleGraph")],1)])},vc=[],yc=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{ref:"chart2",attrs:{id:"chart-2"}},[e("div",{attrs:{id:"svg-container-2"}})])},wc=[],_c={name:"CircleGraph",data(){return{width:null,height:null,color:null,svg:null,root:null,focus:null,view:null,label:null,storedData:null,node:null}},created:function(){Lu["eventBus"].$on("select-ranking",this.update)},beforeDestroy:function(){Lu["eventBus"].$off("select-ranking",this.update)},mounted(){this.width=this.$refs.chart2.clientWidth,this.height=this.$refs.chart2.clientHeight,console.log("!!!!"),console.log(this.width,this.height),this.width=Math.min(this.width,this.height),this.height=this.width,console.log(this.width,this.height),this.color=pu().domain([0,5]).range(["hsl(152,80%,80%)","hsl(228,30%,40%)"]).interpolate(hs);const t=this;console.log(t.width,t.height),this.svg=Dn("#chart-2").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox",`-${t.width/2} -${t.height/2} ${t.width} ${t.height}`).style("background",t.color(0)).style("cursor","pointer").on("click",n=>t.zoom(n,t.root)),this.node=this.svg.append("g"),this.label=this.svg.append("g").style("font","10px sans-serif").attr("pointer-events","none").attr("text-anchor","middle"),Wa("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(n=>{const e=new Map,r=new Map;n.forEach(t=>{if(e.get(t.cluster_group)?e.get(t.cluster_group).push({name:t.cluster_name,community_size:parseFloat(t.community_size),lexical_change:parseFloat(t.lexical_change),ideology_lexical_change:parseFloat(t.ideology_lexical_change),male_ratio:parseFloat(t.male_ratio),friends_count_mean:parseFloat(t.friends_count_mean),follower_count_mean:parseFloat(t.follower_count_mean),tweet_count_mean:parseFloat(t.tweet_count_mean)}):e.set(t.cluster_group,[{name:t.cluster_name,community_size:parseFloat(t.community_size),lexical_change:parseFloat(t.lexical_change),ideology_lexical_change:parseFloat(t.ideology_lexical_change),male_ratio:parseFloat(t.male_ratio),friends_count_mean:parseFloat(t.friends_count_mean),follower_count_mean:parseFloat(t.follower_count_mean),tweet_count_mean:parseFloat(t.tweet_count_mean)}]),r.get(t.category))r.get(t.category).add(t.cluster_group);else{const n=new Set;n.add(t.cluster_group),r.set(t.category,n)}});const i=[];r.forEach((t,n)=>{const r=[];t.forEach(t=>{r.push({name:t,children:e.get(t)})}),i.push({name:n,children:r})}),this.storedData={name:"Atlanta",children:i},console.log(this.storedData),this.root=ao(this.storedData).sum(t=>t["community_size"]).sort((t,n)=>n.value-t.value),console.log(t.root.descendants().slice(1)),this.node=this.svg.append("g").selectAll("circle").data(t.root.descendants().slice(1)).join("circle").attr("fill",n=>n.children?t.color(n.depth):"white").on("mouseover",(function(){Dn(this).attr("stroke","#000")})).on("mouseout",(function(){Dn(this).attr("stroke",null)})).on("click",(e,r)=>{console.log("!!!!!!"),console.log(r.data.name),r.children?(t.focus!==r&&(t.zoom(e,r),e.stopPropagation()),Lu["eventBus"].$emit("show-checkbox",n)):Lu["eventBus"].$emit("select-community",r.data.name)}),this.label=this.svg.append("g").style("font","10px sans-serif").attr("pointer-events","none").attr("text-anchor","middle").selectAll("text").data(t.root.descendants()).join("text").style("fill-opacity",n=>n.parent===t.root?1:0).style("display",n=>n.parent===t.root?"inline":"none").text(t=>t.data.name),this.update("community_size")})},methods:{pack(t){const n=Oo().size([this.width,this.height]).padding(3);return n(this.root.sum(n=>n[t]).sort((t,n)=>n.value-t.value))},update(t){this.root=this.pack(t),this.focus=this.root;const n=this;this.node.selectAll("circle").transition().duration(300).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).attr("r",(function(t){return t.r})),this.zoomTo([n.root.x,n.root.y,2*n.root.r])},zoomTo(t){const n=this.width/t[2];this.view=t,this.label.attr("transform",e=>`translate(${(e.x-t[0])*n},${(e.y-t[1])*n})`),this.node.attr("transform",e=>`translate(${(e.x-t[0])*n},${(e.y-t[1])*n})`),this.node.attr("r",t=>t.r*n)},zoom(t,n){this.focus=n;const e=this,r=this.svg.transition().duration(t.altKey?7500:750).tween("zoom",t=>{console.log(t);const n=Io(e.view,[e.focus.x,e.focus.y,2*e.focus.r]);return t=>e.zoomTo(n(t))});this.label.filter((function(t){return t.parent===e.focus||"inline"===this.style.display})).transition(r).style("fill-opacity",t=>t.parent===e.focus?1:0).on("start",(function(t){t.parent===e.focus&&(this.style.display="inline")})).on("end",(function(t){t.parent!==e.focus&&(this.style.display="none")}))}}},bc=_c,xc=(e("b719"),Object(l["a"])(bc,yc,wc,!1,null,"86264d2e",null)),Mc=xc.exports,kc={name:"CirclePacking",components:{CircleGraph:Mc,Ranking:Nl,Twitters:rl},data(){return{title:"Exploring patterns of language variation on social media",clusters:[],options:[],followingList:[],category:"",showingCheckbox:!1,showingTwitters:!1,showingHint2:!1}},created:function(){Lu["eventBus"].$on("show-checkbox",this.showCheckbox),Lu["eventBus"].$on("select-community",this.showTwitters)},beforeDestroy:function(){Lu["eventBus"].$off("show-checkbox",this.showCheckbox),Lu["eventBus"].$off("select-community",this.showTwitters)},mounted(){Wa("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(t=>{const n=this;t.forEach((function(t){n.clusters.push({text:t.cluster_name,value:t.cluster_name,category:t.category})}))})},methods:{showCheckbox(t){this.options=t.options,this.category=t.category,this.showingCheckbox=!0,this.showingHint2=!0,this.followingList=[]},showTwitters(t){Wa("https://raw.githubusercontent.com/6859-sp21/final-project-atlanta-community/main/data/filtered_data_category.csv").then(n=>{const e=n.find(n=>n.cluster_name==t);this.followingList=e.top_follows.split(",")}),console.log(this.followingList),this.showingTwitters=!0,this.showingHint2=!1}}},Ac=kc,Ec=(e("4d00"),Object(l["a"])(Ac,mc,vc,!1,null,"0266320a",null)),Nc=Ec.exports,Sc={components:{Intro:h,BarChart:dl,SizeChart:jl,ScatterChart:rc,Spacing:lc,Thanks:gc,CirclePacking:Nc},name:"Viz",data(){return{text:"Welcome to Novid"}}},Cc=Sc,Tc=(e("f0f2"),Object(l["a"])(Cc,r,i,!1,null,"0f4ac8ce",null));n["default"]=Tc.exports},"6c29":function(t,n,e){"use strict";e("3c6b")},7028:function(t,n,e){},7475:function(t,n,e){},8324:function(t,n,e){"use strict";e("7475")},8770:function(t,n,e){"use strict";e("1d0b")},"945b":function(t,n,e){"use strict";e("f6eb")},a5ce:function(t,n,e){},a7a1:function(t,n,e){},b719:function(t,n,e){"use strict";e("e5f5")},c0b8:function(t,n,e){"use strict";e("56d5")},c4cc:function(t,n,e){"use strict";e("7028")},cf05:function(t,n,e){t.exports=e.p+"img/logo.d2bca33d.png"},d305:function(t,n,e){},d4fe:function(t,n,e){"use strict";e("0eaa")},dcc7:function(t,n,e){"use strict";e("a7a1")},e1b9:function(t,n,e){},e3e3:function(t,n,e){},e5f5:function(t,n,e){},f0f2:function(t,n,e){"use strict";e("0931")},f6eb:function(t,n,e){},fe3b:function(t,n,e){"use strict";e("a5ce")}}]);
//# sourceMappingURL=chunk-7123bbc5.368448fb.js.map